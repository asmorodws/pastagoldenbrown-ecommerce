Project structure and file contents for folders: app, components from /media/asmorodwi/DATA/apaaja/penting/tmp/ecommerce

== app/
   üìÅ (shop)/
       üìÅ cart/
           üìÑ page.tsx
               --- Begin file: page.tsx ---
"use client"

import { useCartStore } from "@/store/cart"
import Image from "next/image"
import Link from "next/link"
import { Trash2, Plus, Minus, ShoppingBag, ArrowRight, Tag, Truck, Shield } from "lucide-react"

export default function CartPage() {
  const { items, removeItem, updateQuantity, getTotal } = useCartStore()

  if (items.length === 0) {
    return (
      <div className="min-h-screen bg-gradient-to-b from-gray-50 to-white">
        <div className="container mx-auto px-4 lg:px-8 py-16">
          <div className="max-w-2xl mx-auto text-center">
            <div className="w-32 h-32 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-8">
              <ShoppingBag className="w-16 h-16 text-gray-400" />
            </div>
            <h1 className="text-4xl font-bold text-[#05347e] mb-4">Keranjang Belanja Kosong</h1>
            <p className="text-gray-600 text-lg mb-8">
              Belum ada produk di keranjang. Yuk mulai belanja dan temukan produk favoritmu!
            </p>
            <Link
              href="/products"
              className="inline-flex items-center gap-2 bg-gradient-to-r from-[#05347e] to-[#032252] text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-[#032252] hover:to-[#05347e] transition-all shadow-lg hover:shadow-xl"
            >
              <ShoppingBag className="w-5 h-5" />
              Mulai Belanja
              <ArrowRight className="w-5 h-5" />
            </Link>
          </div>
        </div>
      </div>
    )
  }

  return (
    <div className="min-h-screen bg-gradient-to-b from-gray-50 to-white">
      <div className="container mx-auto px-4 lg:px-8 py-8">
        {/* Header */}
        <div className="mb-8">
          <h1 className="text-4xl font-bold text-[#05347e] mb-2">Keranjang Belanja</h1>
          <p className="text-gray-600">Kamu punya {items.length} produk di keranjang</p>
        </div>

        <div className="grid lg:grid-cols-3 gap-8">
          {/* Cart Items */}
          <div className="lg:col-span-2 space-y-4">
            {items.map((item: any) => (
              <div
                key={item.productId}
                className="bg-white rounded-2xl shadow-md border border-gray-200 p-6 hover:shadow-lg transition-all"
              >
                <div className="flex gap-6">
                  {/* Product Image */}
                  <div className="relative w-32 h-32 flex-shrink-0 bg-gray-50 rounded-xl overflow-hidden">
                    <Image
                      src={item.image || "/placeholder-product.jpg"}
                      alt={item.name}
                      fill
                      className="object-contain p-2"
                    />
                  </div>

                  {/* Product Info */}
                  <div className="flex-1 flex flex-col justify-between">
                    <div>
                      <h3 className="font-bold text-base text-[#05347e] mb-2 line-clamp-2">{item.name}</h3>
                      <div className="flex items-baseline gap-2">
                        <span className="text-xl font-bold text-[#db0705]">
                          Rp {item.price.toLocaleString("id-ID")}
                        </span>
                        <span className="text-gray-500 text-xs">/ item</span>
                      </div>
                    </div>

                    {/* Quantity Controls */}
                    <div className="flex items-center justify-between mt-4">
                      <div className="flex items-center gap-3">
                        <button
                          onClick={() => updateQuantity(item.productId, item.quantity - 1)}
                          className="w-10 h-10 flex items-center justify-center bg-gray-100 rounded-lg hover:bg-[#05347e] hover:text-white transition-all"
                        >
                          <Minus size={18} />
                        </button>
                        <span className="w-12 text-center text-xl font-bold text-[#05347e]">{item.quantity}</span>
                        <button
                          onClick={() => updateQuantity(item.productId, item.quantity + 1)}
                          className="w-10 h-10 flex items-center justify-center bg-gray-100 rounded-lg hover:bg-[#05347e] hover:text-white transition-all"
                        >
                          <Plus size={18} />
                        </button>
                      </div>

                      {/* Subtotal & Delete */}
                      <div className="flex items-center gap-4">
                        <div className="text-right">
                          <p className="text-xs text-gray-500 mb-1">Subtotal</p>
                          <p className="text-lg font-bold text-[#05347e]">
                            Rp {(item.price * item.quantity).toLocaleString("id-ID")}
                          </p>
                        </div>
                        <button
                          onClick={() => removeItem(item.productId)}
                          className="w-10 h-10 flex items-center justify-center text-[#db0705] hover:bg-red-50 rounded-lg transition-all"
                        >
                          <Trash2 size={20} />
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>

          {/* Order Summary */}
          <div className="lg:col-span-1">
            <div className="bg-white rounded-2xl shadow-md border border-gray-200 p-6 sticky top-24">
              <h2 className="text-xl font-bold text-[#05347e] mb-6">Ringkasan Pesanan</h2>
              
              {/* Summary Details */}
              <div className="space-y-4 mb-6 pb-6 border-b border-gray-200">
                <div className="flex justify-between items-center">
                  <span className="text-sm text-gray-600">Subtotal ({items.length} item)</span>
                  <span className="font-bold text-sm text-[#05347e]">
                    Rp {getTotal().toLocaleString("id-ID")}
                  </span>
                </div>
                <div className="flex justify-between items-center">
                  <span className="text-sm text-gray-600">Biaya Layanan</span>
                  <span className="font-bold text-sm text-[#05347e]">Rp 1.000</span>
                </div>
                <div className="flex justify-between items-center">
                  <div className="flex items-center gap-2">
                    <Truck className="w-4 h-4 text-green-600" />
                    <span className="text-sm text-gray-600">Ongkir</span>
                  </div>
                  <span className="font-bold text-sm text-green-600">GRATIS</span>
                </div>
              </div>

              {/* Total */}
              <div className="bg-gradient-to-br from-[#c49c0f]/10 to-[#f0c514]/10 rounded-xl p-4 mb-6 border border-[#c49c0f]/30">
                <div className="flex justify-between items-center">
                  <span className="text-base font-bold text-[#05347e]">Total Pembayaran</span>
                  <span className="text-xl font-bold text-[#db0705]">
                    Rp {(getTotal() + 1000).toLocaleString("id-ID")}
                  </span>
                </div>
              </div>

              {/* Checkout Button */}
              <Link
                href="/checkout"
                className="block w-full bg-gradient-to-r from-[#db0705] to-[#a60504] text-white text-center py-4 rounded-xl font-bold text-lg hover:from-[#a60504] hover:to-[#db0705] transition-all shadow-lg hover:shadow-xl mb-3"
              >
                Lanjut ke Checkout
              </Link>

              <Link
                href="/products"
                className="block w-full text-center py-3 text-[#05347e] hover:text-[#032252] transition font-semibold"
              >
                Lanjut Belanja
              </Link>

              {/* Benefits */}
              <div className="mt-6 pt-6 border-t border-gray-200 space-y-3">
                <div className="flex items-center gap-3 text-sm text-gray-600">
                  <div className="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                    <Shield className="w-4 h-4 text-green-600" />
                  </div>
                  <span>Pembayaran 100% Aman</span>
                </div>
                <div className="flex items-center gap-3 text-sm text-gray-600">
                  <div className="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                    <Truck className="w-4 h-4 text-blue-600" />
                  </div>
                  <span>Gratis Ongkir Seluruh Indonesia</span>
                </div>
                <div className="flex items-center gap-3 text-sm text-gray-600">
                  <div className="w-8 h-8 bg-[#c49c0f]/20 rounded-lg flex items-center justify-center">
                    <Tag className="w-4 h-4 text-[#c49c0f]" />
                  </div>
                  <span>Garansi Produk Original</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}

               --- End file: page.tsx ---

       üìÅ checkout/
           üìÑ page.tsx
               --- Begin file: page.tsx ---
"use client"

import { useState } from "react"
import { useRouter } from "next/navigation"
import { useSession } from "next-auth/react"
import { useCartStore } from "@/store/cart"
import toast from "react-hot-toast"
import Image from "next/image"
import { ShoppingBag, MapPin, CreditCard, CheckCircle, Truck, Phone, Mail, User, Home, Building2 } from "lucide-react"

export default function CheckoutPage() {
  const router = useRouter()
  const { data: session } = useSession()
  const { items, getTotal, clearCart } = useCartStore()
  const [loading, setLoading] = useState(false)
  const [currentStep, setCurrentStep] = useState(1)
  const [paymentMethod, setPaymentMethod] = useState("bank_transfer")
  const [formData, setFormData] = useState({
    name: session?.user?.name || "",
    email: session?.user?.email || "",
    phone: "",
    address: "",
    city: "",
    zip: "",
    country: "Indonesia",
    province: "",
    notes: "",
  })

  if (!session) {
    router.push("/auth/login")
    return null
  }

  if (items.length === 0) {
    router.push("/cart")
    return null
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setLoading(true)

    try {
      const response = await fetch("/api/orders", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          items: items.map((item: any) => ({
            productId: item.productId,
            quantity: item.quantity,
            price: item.price,
          })),
          shipping: {
            ...formData,
            paymentMethod,
          },
        }),
      })

      const data = await response.json()

      if (!response.ok) {
        toast.error(data.error || "Terjadi kesalahan saat checkout")
        return
      }

      toast.success("Pesanan berhasil dibuat!")
      clearCart()
      router.push(`/orders/${data.order.id}`)
    } catch (error) {
      toast.error("Terjadi kesalahan saat checkout")
    } finally {
      setLoading(false)
    }
  }

  const steps = [
    { number: 1, title: "Keranjang", icon: ShoppingBag },
    { number: 2, title: "Pengiriman", icon: MapPin },
    { number: 3, title: "Pembayaran", icon: CreditCard },
    { number: 4, title: "Selesai", icon: CheckCircle },
  ]

  const shippingCost = 0 // Free shipping
  const totalAmount = getTotal() + shippingCost

  return (
    <div className="min-h-screen bg-gradient-to-b from-slate-50 to-white py-8">
      <div className="container mx-auto px-4 lg:px-8">
        {/* Header */}
        <div className="mb-8 text-center">
          <h1 className="text-4xl font-bold text-slate-900 mb-2">Checkout</h1>
          <p className="text-slate-600">Selesaikan pesanan Anda dengan mudah dan aman</p>
        </div>

        {/* Steps */}
        <div className="mb-12">
          <div className="max-w-4xl mx-auto">
            <div className="flex items-center justify-between">
              {steps.map((step, index) => {
                const Icon = step.icon
                const isActive = currentStep === step.number
                const isCompleted = currentStep > step.number
                
                return (
                  <div key={step.number} className="flex items-center flex-1">
                    <div className="flex flex-col items-center flex-1">
                      <div
                        className={`w-14 h-14 rounded-full flex items-center justify-center transition-all ${
                          isCompleted
                            ? "bg-gradient-to-br from-green-500 to-green-600 text-white shadow-lg shadow-green-500/30"
                            : isActive
                            ? "bg-gradient-to-br from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/30"
                            : "bg-slate-200 text-slate-400"
                        }`}
                      >
                        {isCompleted ? (
                          <CheckCircle className="w-6 h-6" />
                        ) : (
                          <Icon className="w-6 h-6" />
                        )}
                      </div>
                      <p
                        className={`mt-2 text-sm font-semibold ${
                          isActive || isCompleted ? "text-slate-900" : "text-slate-400"
                        }`}
                      >
                        {step.title}
                      </p>
                    </div>
                    {index < steps.length - 1 && (
                      <div
                        className={`h-1 flex-1 mx-2 rounded-full transition-all ${
                          isCompleted ? "bg-green-500" : "bg-slate-200"
                        }`}
                      />
                    )}
                  </div>
                )
              })}
            </div>
          </div>
        </div>

        <div className="grid lg:grid-cols-3 gap-8 max-w-7xl mx-auto">
          {/* Checkout Form */}
          <div className="lg:col-span-2 space-y-6">{currentStep === 1 && (
              <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
                <div className="flex items-center gap-3 mb-6">
                  <div className="w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center">
                    <ShoppingBag className="w-5 h-5 text-white" />
                  </div>
                  <h2 className="text-2xl font-bold text-slate-900">Keranjang Belanja</h2>
                </div>

                <div className="space-y-4 mb-6">
                  {items.map((item: any) => (
                    <div key={item.productId} className="flex items-center gap-4 p-4 bg-slate-50 rounded-xl">
                      <div className="relative w-20 h-20 flex-shrink-0 bg-white rounded-lg overflow-hidden">
                        <Image
                          src={item.image || "/placeholder-product.jpg"}
                          alt={item.name}
                          fill
                          className="object-cover"
                        />
                      </div>
                      <div className="flex-1">
                        <p className="font-bold text-slate-900 line-clamp-1">{item.name}</p>
                        <p className="text-sm text-slate-600 mt-1">Jumlah: {item.quantity}</p>
                      </div>
                      <div className="text-right">
                        <p className="font-bold text-lg text-slate-900">
                          Rp {(item.price * item.quantity).toLocaleString("id-ID")}
                        </p>
                        <p className="text-sm text-slate-600">
                          @Rp {item.price.toLocaleString("id-ID")}
                        </p>
                      </div>
                    </div>
                  ))}
                </div>

                <button
                  onClick={() => setCurrentStep(2)}
                  className="w-full py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-blue-500/30 transition-all"
                >
                  Lanjut ke Pengiriman
                </button>
              </div>
            )}

            {currentStep === 2 && (
              <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
                <div className="flex items-center gap-3 mb-6">
                  <div className="w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center">
                    <MapPin className="w-5 h-5 text-white" />
                  </div>
                  <h2 className="text-2xl font-bold text-slate-900">Informasi Pengiriman</h2>
                </div>

                <form onSubmit={(e) => { e.preventDefault(); setCurrentStep(3); }} className="space-y-4">
                  {/* Personal Info */}
                  <div className="grid md:grid-cols-2 gap-4">
                    <div>
                      <label className="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                        <User className="w-4 h-4" />
                        Nama Lengkap
                      </label>
                      <input
                        type="text"
                        required
                        value={formData.name}
                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                        className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                        placeholder="John Doe"
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                        <Phone className="w-4 h-4" />
                        Nomor Telepon
                      </label>
                      <input
                        type="tel"
                        required
                        value={formData.phone}
                        onChange={(e) => setFormData({ ...formData, phone: e.target.value })}
                        className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                        placeholder="08123456789"
                      />
                    </div>
                  </div>

                  <div>
                    <label className="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                      <Mail className="w-4 h-4" />
                      Email
                    </label>
                    <input
                      type="email"
                      required
                      value={formData.email}
                      onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                      className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                      placeholder="johndoe@email.com"
                    />
                  </div>

                  {/* Address */}
                  <div>
                    <label className="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                      <Home className="w-4 h-4" />
                      Alamat Lengkap
                    </label>
                    <textarea
                      required
                      value={formData.address}
                      onChange={(e) => setFormData({ ...formData, address: e.target.value })}
                      className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800 resize-none"
                      rows={3}
                      placeholder="Jl. Contoh No. 123, RT/RW 01/02, Kelurahan..."
                    />
                  </div>

                  <div className="grid md:grid-cols-2 gap-4">
                    <div>
                      <label className="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                        <Building2 className="w-4 h-4" />
                        Provinsi
                      </label>
                      <input
                        type="text"
                        required
                        value={formData.province}
                        onChange={(e) => setFormData({ ...formData, province: e.target.value })}
                        className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                        placeholder="DKI Jakarta"
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-semibold text-slate-700 mb-2">
                        Kota/Kabupaten
                      </label>
                      <input
                        type="text"
                        required
                        value={formData.city}
                        onChange={(e) => setFormData({ ...formData, city: e.target.value })}
                        className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                        placeholder="Jakarta Selatan"
                      />
                    </div>
                  </div>

                  <div className="grid md:grid-cols-2 gap-4">
                    <div>
                      <label className="block text-sm font-semibold text-slate-700 mb-2">
                        Kode Pos
                      </label>
                      <input
                        type="text"
                        required
                        value={formData.zip}
                        onChange={(e) => setFormData({ ...formData, zip: e.target.value })}
                        className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                        placeholder="12345"
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-semibold text-slate-700 mb-2">
                        Negara
                      </label>
                      <input
                        type="text"
                        required
                        value={formData.country}
                        onChange={(e) => setFormData({ ...formData, country: e.target.value })}
                        className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                      />
                    </div>
                  </div>

                  <div>
                    <label className="block text-sm font-semibold text-slate-700 mb-2">
                      Catatan (Opsional)
                    </label>
                    <textarea
                      value={formData.notes}
                      onChange={(e) => setFormData({ ...formData, notes: e.target.value })}
                      className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800 resize-none"
                      rows={2}
                      placeholder="Catatan untuk pengiriman..."
                    />
                  </div>

                  <div className="flex gap-3 pt-4">
                    <button
                      type="button"
                      onClick={() => setCurrentStep(1)}
                      className="flex-1 py-4 bg-slate-200 text-slate-700 rounded-xl font-bold hover:bg-slate-300 transition-all"
                    >
                      Kembali
                    </button>
                    <button
                      type="submit"
                      className="flex-1 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-blue-500/30 transition-all"
                    >
                      Lanjut ke Pembayaran
                    </button>
                  </div>
                </form>
              </div>
            )}

            {currentStep === 3 && (
              <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
                <div className="flex items-center gap-3 mb-6">
                  <div className="w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center">
                    <CreditCard className="w-5 h-5 text-white" />
                  </div>
                  <h2 className="text-2xl font-bold text-slate-900">Metode Pembayaran</h2>
                </div>

                <form onSubmit={handleSubmit} className="space-y-4">
                  <div className="space-y-3">
                    {/* Bank Transfer */}
                    <div
                      onClick={() => setPaymentMethod("bank_transfer")}
                      className={`p-4 rounded-xl border-2 cursor-pointer transition-all ${
                        paymentMethod === "bank_transfer"
                          ? "border-blue-600 bg-blue-50"
                          : "border-slate-200 hover:border-slate-300"
                      }`}
                    >
                      <div className="flex items-center gap-3">
                        <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${
                          paymentMethod === "bank_transfer" ? "border-blue-600" : "border-slate-300"
                        }`}>
                          {paymentMethod === "bank_transfer" && (
                            <div className="w-3 h-3 bg-blue-600 rounded-full"></div>
                          )}
                        </div>
                        <div className="flex-1">
                          <p className="font-bold text-slate-900">Transfer Bank</p>
                          <p className="text-sm text-slate-600">BCA, Mandiri, BNI, BRI</p>
                        </div>
                        <p className="text-sm font-semibold text-green-600">Gratis</p>
                      </div>
                    </div>

                    {/* E-Wallet */}
                    <div
                      onClick={() => setPaymentMethod("ewallet")}
                      className={`p-4 rounded-xl border-2 cursor-pointer transition-all ${
                        paymentMethod === "ewallet"
                          ? "border-blue-600 bg-blue-50"
                          : "border-slate-200 hover:border-slate-300"
                      }`}
                    >
                      <div className="flex items-center gap-3">
                        <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${
                          paymentMethod === "ewallet" ? "border-blue-600" : "border-slate-300"
                        }`}>
                          {paymentMethod === "ewallet" && (
                            <div className="w-3 h-3 bg-blue-600 rounded-full"></div>
                          )}
                        </div>
                        <div className="flex-1">
                          <p className="font-bold text-slate-900">E-Wallet</p>
                          <p className="text-sm text-slate-600">GoPay, OVO, DANA, ShopeePay</p>
                        </div>
                        <p className="text-sm font-semibold text-slate-600">1.5%</p>
                      </div>
                    </div>

                    {/* Credit Card */}
                    <div
                      onClick={() => setPaymentMethod("credit_card")}
                      className={`p-4 rounded-xl border-2 cursor-pointer transition-all ${
                        paymentMethod === "credit_card"
                          ? "border-blue-600 bg-blue-50"
                          : "border-slate-200 hover:border-slate-300"
                      }`}
                    >
                      <div className="flex items-center gap-3">
                        <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${
                          paymentMethod === "credit_card" ? "border-blue-600" : "border-slate-300"
                        }`}>
                          {paymentMethod === "credit_card" && (
                            <div className="w-3 h-3 bg-blue-600 rounded-full"></div>
                          )}
                        </div>
                        <div className="flex-1">
                          <p className="font-bold text-slate-900">Kartu Kredit/Debit</p>
                          <p className="text-sm text-slate-600">Visa, Mastercard, JCB</p>
                        </div>
                        <p className="text-sm font-semibold text-slate-600">2.9%</p>
                      </div>
                    </div>
                  </div>

                  <div className="bg-blue-50 border border-blue-200 rounded-xl p-4 mt-4">
                    <div className="flex items-start gap-3">
                      <CheckCircle className="w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5" />
                      <div>
                        <p className="font-semibold text-blue-900 mb-1">Pembayaran Aman</p>
                        <p className="text-sm text-blue-700">
                          Semua transaksi dilindungi dengan enkripsi SSL 256-bit
                        </p>
                      </div>
                    </div>
                  </div>

                  <div className="flex gap-3 pt-4">
                    <button
                      type="button"
                      onClick={() => setCurrentStep(2)}
                      className="flex-1 py-4 bg-slate-200 text-slate-700 rounded-xl font-bold hover:bg-slate-300 transition-all"
                      disabled={loading}
                    >
                      Kembali
                    </button>
                    <button
                      type="submit"
                      disabled={loading}
                      className="flex-1 py-4 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-green-500/30 transition-all disabled:opacity-50"
                    >
                      {loading ? "Memproses..." : "Buat Pesanan"}
                    </button>
                  </div>
                </form>
              </div>
            )}
          </div>

          {/* Order Summary - Sticky Sidebar */}
          <div className="lg:col-span-1">
            <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sticky top-24">
              <h2 className="text-xl font-bold text-slate-900 mb-4 flex items-center gap-2">
                <Truck className="w-5 h-5" />
                Ringkasan Pesanan
              </h2>
              
              <div className="space-y-3 mb-6 max-h-64 overflow-y-auto">
                {items.map((item: any) => (
                  <div key={item.productId} className="flex items-center gap-3 p-3 bg-slate-50 rounded-xl">
                    <div className="relative w-14 h-14 flex-shrink-0 bg-white rounded-lg overflow-hidden">
                      <Image
                        src={item.image || "/placeholder-product.jpg"}
                        alt={item.name}
                        fill
                        className="object-cover"
                      />
                    </div>
                    <div className="flex-1 min-w-0">
                      <p className="text-sm font-bold text-slate-900 line-clamp-1">{item.name}</p>
                      <p className="text-xs text-slate-600">x{item.quantity}</p>
                    </div>
                    <p className="text-sm font-bold text-slate-900 flex-shrink-0">
                      Rp {(item.price * item.quantity).toLocaleString("id-ID")}
                    </p>
                  </div>
                ))}
              </div>

              <div className="border-t border-slate-200 pt-4 space-y-3">
                <div className="flex justify-between text-slate-600">
                  <span>Subtotal</span>
                  <span className="font-semibold text-slate-900">
                    Rp {getTotal().toLocaleString("id-ID")}
                  </span>
                </div>
                <div className="flex justify-between text-slate-600">
                  <span>Ongkos Kirim</span>
                  <span className="font-semibold text-green-600">Gratis</span>
                </div>
                <div className="border-t border-slate-200 pt-3 flex justify-between">
                  <span className="text-lg font-bold text-slate-900">Total</span>
                  <span className="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                    Rp {totalAmount.toLocaleString("id-ID")}
                  </span>
                </div>
              </div>

              <div className="mt-6 space-y-2">
                <div className="flex items-center gap-2 text-sm text-slate-600">
                  <CheckCircle className="w-4 h-4 text-green-600" />
                  <span>Gratis ongkir seluruh Indonesia</span>
                </div>
                <div className="flex items-center gap-2 text-sm text-slate-600">
                  <CheckCircle className="w-4 h-4 text-green-600" />
                  <span>Garansi uang kembali 100%</span>
                </div>
                <div className="flex items-center gap-2 text-sm text-slate-600">
                  <CheckCircle className="w-4 h-4 text-green-600" />
                  <span>Pembayaran aman & terenkripsi</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}

               --- End file: page.tsx ---

       üìÑ layout.tsx
           --- Begin file: layout.tsx ---
import Header from "@/components/Header";
import Footer from "@/components/Footer";

export default function ShopLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <>
      <Header />
      <main className="min-h-screen bg-gray-50">
        {children}
      </main>
      <Footer />
    </>
  );
}

           --- End file: layout.tsx ---

       üìÅ orders/
           üìÅ [id]/
               üìÑ page.tsx
                   --- Begin file: page.tsx ---
"use client"

import { useEffect, useState } from "react"
import { useParams, useRouter } from "next/navigation"
import { useSession } from "next-auth/react"
import Link from "next/link"
import Image from "next/image"
import { CheckCircle, Package, Truck, MapPin, Clock, CreditCard, Phone, Mail, ArrowLeft, Download } from "lucide-react"

const statusConfig = {
  PENDING: {
    label: "Menunggu Pembayaran",
    color: "bg-yellow-100 text-yellow-700 border-yellow-200",
    icon: Clock,
    gradient: "from-yellow-500 to-yellow-600",
  },
  PROCESSING: {
    label: "Sedang Diproses",
    color: "bg-blue-100 text-blue-700 border-blue-200",
    icon: Package,
    gradient: "from-blue-500 to-blue-600",
  },
  SHIPPED: {
    label: "Dalam Pengiriman",
    color: "bg-purple-100 text-purple-700 border-purple-200",
    icon: Truck,
    gradient: "from-purple-500 to-purple-600",
  },
  DELIVERED: {
    label: "Pesanan Selesai",
    color: "bg-green-100 text-green-700 border-green-200",
    icon: CheckCircle,
    gradient: "from-green-500 to-green-600",
  },
  CANCELLED: {
    label: "Dibatalkan",
    color: "bg-red-100 text-red-700 border-red-200",
    icon: Package,
    gradient: "from-red-500 to-red-600",
  },
}

export default function OrderDetailPage() {
  const params = useParams()
  const router = useRouter()
  const { data: session, status } = useSession()
  const [order, setOrder] = useState<any>(null)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    if (status === "unauthenticated") {
      router.push("/auth/login")
    }
  }, [status, router])

  useEffect(() => {
    const fetchOrder = async () => {
      try {
        const response = await fetch(`/api/orders/${params.id}`)
        const data = await response.json()

        if (response.ok) {
          setOrder(data.order)
        } else {
          router.push("/orders")
        }
      } catch (error) {
        console.error("Error fetching order:", error)
        router.push("/orders")
      } finally {
        setLoading(false)
      }
    }

    if (session && params.id) {
      fetchOrder()
    }
  }, [session, params.id, router])

  if (status === "loading" || loading) {
    return (
      <div className="min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center">
        <div className="flex flex-col items-center gap-4">
          <div className="animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"></div>
          <p className="text-slate-600">Memuat detail pesanan...</p>
        </div>
      </div>
    )
  }

  if (!order) {
    return null
  }

  const statusInfo = statusConfig[order.status as keyof typeof statusConfig]
  const StatusIcon = statusInfo.icon

  return (
    <div className="min-h-screen bg-gradient-to-b from-slate-50 to-white py-8">
      <div className="container mx-auto px-4 lg:px-8 max-w-6xl">
        {/* Header */}
        <div className="mb-8">
          <Link
            href="/orders"
            className="inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-4 transition-colors"
          >
            <ArrowLeft className="w-4 h-4" />
            Kembali ke Daftar Pesanan
          </Link>
          <h1 className="text-4xl font-bold text-slate-900 mb-2">Detail Pesanan</h1>
          <p className="text-slate-600">Order ID: #{order.id.slice(0, 8).toUpperCase()}</p>
        </div>

        {/* Status Banner */}
        <div className={`bg-gradient-to-r ${statusInfo.gradient} rounded-2xl shadow-lg p-6 mb-8 text-white`}>
          <div className="flex items-center gap-4">
            <div className="w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center">
              <StatusIcon className="w-8 h-8" />
            </div>
            <div className="flex-1">
              <p className="text-white/80 text-sm mb-1">Status Pesanan</p>
              <h2 className="text-2xl font-bold">{statusInfo.label}</h2>
              <p className="text-white/80 text-sm mt-1">
                {new Date(order.createdAt).toLocaleDateString("id-ID", {
                  weekday: "long",
                  year: "numeric",
                  month: "long",
                  day: "numeric",
                  hour: "2-digit",
                  minute: "2-digit",
                })}
              </p>
            </div>
            <div className="text-right">
              <p className="text-white/80 text-sm mb-1">Total Pembayaran</p>
              <p className="text-3xl font-bold">
                Rp {parseFloat(order.total).toLocaleString("id-ID")}
              </p>
            </div>
          </div>
        </div>

        <div className="grid lg:grid-cols-3 gap-8">
          {/* Main Content */}
          <div className="lg:col-span-2 space-y-6">
            {/* Order Items */}
            <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
              <h3 className="text-xl font-bold text-slate-900 mb-4 flex items-center gap-2">
                <Package className="w-5 h-5" />
                Produk yang Dipesan
              </h3>
              <div className="space-y-4">
                {order.items.map((item: any) => (
                  <div
                    key={item.id}
                    className="flex items-center gap-4 p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors"
                  >
                    <div className="relative w-20 h-20 flex-shrink-0 bg-white rounded-lg overflow-hidden">
                      <Image
                        src={item.product.image || "/placeholder-product.jpg"}
                        alt={item.product.name}
                        fill
                        className="object-cover"
                      />
                    </div>
                    <div className="flex-1">
                      <Link
                        href={`/products/${item.product.slug}`}
                        className="font-bold text-slate-900 hover:text-blue-600 transition-colors line-clamp-1"
                      >
                        {item.product.name}
                      </Link>
                      <p className="text-sm text-slate-600 mt-1">
                        Jumlah: {item.quantity} x Rp {parseFloat(item.price).toLocaleString("id-ID")}
                      </p>
                    </div>
                    <div className="text-right">
                      <p className="font-bold text-lg text-slate-900">
                        Rp {(parseFloat(item.price) * item.quantity).toLocaleString("id-ID")}
                      </p>
                    </div>
                  </div>
                ))}
              </div>

              {/* Order Summary */}
              <div className="border-t border-slate-200 mt-6 pt-6 space-y-3">
                <div className="flex justify-between text-slate-600">
                  <span>Subtotal</span>
                  <span className="font-semibold text-slate-900">
                    Rp {parseFloat(order.total).toLocaleString("id-ID")}
                  </span>
                </div>
                <div className="flex justify-between text-slate-600">
                  <span>Ongkos Kirim</span>
                  <span className="font-semibold text-green-600">Gratis</span>
                </div>
                <div className="border-t border-slate-200 pt-3 flex justify-between">
                  <span className="text-lg font-bold text-slate-900">Total</span>
                  <span className="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                    Rp {parseFloat(order.total).toLocaleString("id-ID")}
                  </span>
                </div>
              </div>
            </div>

            {/* Order Timeline */}
            <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
              <h3 className="text-xl font-bold text-slate-900 mb-6 flex items-center gap-2">
                <Clock className="w-5 h-5" />
                Timeline Pesanan
              </h3>
              <div className="space-y-4">
                <div className="flex gap-4">
                  <div className="flex flex-col items-center">
                    <div className={`w-10 h-10 rounded-full bg-gradient-to-br ${statusInfo.gradient} flex items-center justify-center`}>
                      <CheckCircle className="w-5 h-5 text-white" />
                    </div>
                    <div className="w-0.5 h-full bg-slate-200 mt-2"></div>
                  </div>
                  <div className="flex-1 pb-6">
                    <p className="font-bold text-slate-900">Pesanan Dibuat</p>
                    <p className="text-sm text-slate-600">
                      {new Date(order.createdAt).toLocaleDateString("id-ID", {
                        day: "numeric",
                        month: "long",
                        year: "numeric",
                        hour: "2-digit",
                        minute: "2-digit",
                      })}
                    </p>
                  </div>
                </div>

                {["PROCESSING", "SHIPPED", "DELIVERED"].includes(order.status) && (
                  <div className="flex gap-4">
                    <div className="flex flex-col items-center">
                      <div className={`w-10 h-10 rounded-full bg-gradient-to-br ${["SHIPPED", "DELIVERED"].includes(order.status) ? "from-blue-500 to-blue-600" : "from-slate-300 to-slate-400"} flex items-center justify-center`}>
                        <Package className="w-5 h-5 text-white" />
                      </div>
                      <div className="w-0.5 h-full bg-slate-200 mt-2"></div>
                    </div>
                    <div className="flex-1 pb-6">
                      <p className="font-bold text-slate-900">Pesanan Diproses</p>
                      <p className="text-sm text-slate-600">Pesanan sedang disiapkan</p>
                    </div>
                  </div>
                )}

                {["SHIPPED", "DELIVERED"].includes(order.status) && (
                  <div className="flex gap-4">
                    <div className="flex flex-col items-center">
                      <div className={`w-10 h-10 rounded-full bg-gradient-to-br ${order.status === "DELIVERED" ? "from-purple-500 to-purple-600" : "from-slate-300 to-slate-400"} flex items-center justify-center`}>
                        <Truck className="w-5 h-5 text-white" />
                      </div>
                      <div className="w-0.5 h-full bg-slate-200 mt-2"></div>
                    </div>
                    <div className="flex-1 pb-6">
                      <p className="font-bold text-slate-900">Pesanan Dikirim</p>
                      <p className="text-sm text-slate-600">Dalam perjalanan ke alamat tujuan</p>
                    </div>
                  </div>
                )}

                {order.status === "DELIVERED" && (
                  <div className="flex gap-4">
                    <div className="flex flex-col items-center">
                      <div className="w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center">
                        <CheckCircle className="w-5 h-5 text-white" />
                      </div>
                    </div>
                    <div className="flex-1">
                      <p className="font-bold text-slate-900">Pesanan Selesai</p>
                      <p className="text-sm text-slate-600">Pesanan telah diterima</p>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>

          {/* Sidebar */}
          <div className="lg:col-span-1 space-y-6">
            {/* Shipping Info */}
            <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
              <h3 className="text-lg font-bold text-slate-900 mb-4 flex items-center gap-2">
                <MapPin className="w-5 h-5" />
                Alamat Pengiriman
              </h3>
              <div className="space-y-3 text-sm">
                <div>
                  <p className="font-bold text-slate-900">{order.shippingName}</p>
                </div>
                <div className="flex items-start gap-2 text-slate-600">
                  <Phone className="w-4 h-4 mt-0.5 flex-shrink-0" />
                  <p>{order.shippingPhone || "-"}</p>
                </div>
                <div className="flex items-start gap-2 text-slate-600">
                  <Mail className="w-4 h-4 mt-0.5 flex-shrink-0" />
                  <p>{order.shippingEmail}</p>
                </div>
                <div className="flex items-start gap-2 text-slate-600">
                  <MapPin className="w-4 h-4 mt-0.5 flex-shrink-0" />
                  <div>
                    <p>{order.shippingAddress}</p>
                    <p>{order.shippingCity}, {order.shippingZip}</p>
                    <p>{order.shippingCountry}</p>
                  </div>
                </div>
              </div>
            </div>

            {/* Payment Info */}
            <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
              <h3 className="text-lg font-bold text-slate-900 mb-4 flex items-center gap-2">
                <CreditCard className="w-5 h-5" />
                Metode Pembayaran
              </h3>
              <div className="p-4 bg-slate-50 rounded-xl">
                <p className="font-semibold text-slate-900 mb-1">
                  {order.paymentMethod === "bank_transfer" && "Transfer Bank"}
                  {order.paymentMethod === "ewallet" && "E-Wallet"}
                  {order.paymentMethod === "credit_card" && "Kartu Kredit"}
                  {!order.paymentMethod && "Transfer Bank"}
                </p>
                <p className="text-sm text-slate-600">
                  {order.status === "PENDING" ? "Menunggu pembayaran" : "Pembayaran diterima"}
                </p>
              </div>
            </div>

            {/* Actions */}
            <div className="bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl shadow-lg p-6 text-white">
              <h3 className="text-lg font-bold mb-4">Butuh Bantuan?</h3>
              <p className="text-sm text-white/80 mb-4">
                Hubungi customer service kami untuk informasi lebih lanjut
              </p>
              <button className="w-full py-3 bg-white text-blue-600 rounded-xl font-bold hover:bg-blue-50 transition-colors">
                Hubungi CS
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}

                   --- End file: page.tsx ---

           üìÑ page.tsx
               --- Begin file: page.tsx ---
"use client"

import { useEffect, useState } from "react"
import { useSession } from "next-auth/react"
import { useRouter } from "next/navigation"
import Link from "next/link"
import Image from "next/image"
import { Package, Clock, Truck, CheckCircle, XCircle, ShoppingBag, Eye, Calendar, CreditCard } from "lucide-react"

const statusConfig = {
  PENDING: {
    label: "Menunggu",
    color: "bg-yellow-100 text-yellow-700 border-yellow-200",
    icon: Clock,
    gradient: "from-yellow-500 to-yellow-600",
  },
  PROCESSING: {
    label: "Diproses",
    color: "bg-blue-100 text-blue-700 border-blue-200",
    icon: Package,
    gradient: "from-blue-500 to-blue-600",
  },
  SHIPPED: {
    label: "Dikirim",
    color: "bg-purple-100 text-purple-700 border-purple-200",
    icon: Truck,
    gradient: "from-purple-500 to-purple-600",
  },
  DELIVERED: {
    label: "Selesai",
    color: "bg-green-100 text-green-700 border-green-200",
    icon: CheckCircle,
    gradient: "from-green-500 to-green-600",
  },
  CANCELLED: {
    label: "Dibatalkan",
    color: "bg-red-100 text-red-700 border-red-200",
    icon: XCircle,
    gradient: "from-red-500 to-red-600",
  },
}

export default function OrdersPage() {
  const { data: session, status } = useSession()
  const router = useRouter()
  const [orders, setOrders] = useState<any[]>([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    if (status === "unauthenticated") {
      router.push("/auth/login")
    }
  }, [status, router])

  useEffect(() => {
    const fetchOrders = async () => {
      try {
        const response = await fetch("/api/orders")
        const data = await response.json()

        if (response.ok) {
          setOrders(data.orders)
        }
      } catch (error) {
        console.error("Error fetching orders:", error)
      } finally {
        setLoading(false)
      }
    }

    if (session) {
      fetchOrders()
    }
  }, [session])

  if (status === "loading" || loading) {
    return (
      <div className="min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center">
        <div className="flex flex-col items-center gap-4">
          <div className="animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"></div>
          <p className="text-slate-600">Memuat pesanan...</p>
        </div>
      </div>
    )
  }

  return (
    <div className="min-h-screen bg-gradient-to-b from-slate-50 to-white py-8">
      <div className="container mx-auto px-4 lg:px-8 max-w-6xl">
        {/* Header */}
        <div className="mb-8">
          <h1 className="text-4xl font-bold text-slate-900 mb-2">Pesanan Saya</h1>
          <p className="text-slate-600">Pantau status dan riwayat pesanan Anda</p>
        </div>

        {orders.length === 0 ? (
          <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-12 text-center">
            <div className="w-24 h-24 bg-gradient-to-br from-slate-100 to-slate-200 rounded-full flex items-center justify-center mx-auto mb-6">
              <ShoppingBag className="w-12 h-12 text-slate-400" />
            </div>
            <h2 className="text-2xl font-bold text-slate-900 mb-3">Belum Ada Pesanan</h2>
            <p className="text-slate-600 mb-8 max-w-md mx-auto">
              Anda belum memiliki pesanan. Jelajahi koleksi produk kami dan mulai belanja sekarang!
            </p>
            <Link
              href="/products"
              className="inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-blue-500/30 transition-all"
            >
              <ShoppingBag className="w-5 h-5" />
              Mulai Belanja
            </Link>
          </div>
        ) : (
          <div className="space-y-6">
            {orders.map((order) => {
              const config = statusConfig[order.status as keyof typeof statusConfig]
              const StatusIcon = config.icon

              return (
                <div
                  key={order.id}
                  className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden hover:shadow-lg transition-shadow"
                >
                  {/* Order Header */}
                  <div className={`bg-gradient-to-r ${config.gradient} p-6 text-white`}>
                    <div className="flex items-center justify-between">
                      <div className="flex items-center gap-4">
                        <div className="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center">
                          <StatusIcon className="w-7 h-7" />
                        </div>
                        <div>
                          <p className="text-white/80 text-sm mb-1">Order ID</p>
                          <p className="text-xl font-bold">
                            #{order.id.slice(0, 8).toUpperCase()}
                          </p>
                        </div>
                      </div>
                      <div className="text-right">
                        <p className="text-white/80 text-sm mb-1">Total Pembayaran</p>
                        <p className="text-2xl font-bold">
                          Rp {parseFloat(order.total).toLocaleString("id-ID")}
                        </p>
                      </div>
                    </div>
                  </div>

                  <div className="p-6">
                    {/* Order Info */}
                    <div className="flex items-center gap-6 mb-6 pb-6 border-b border-slate-200">
                      <div className="flex items-center gap-2 text-sm text-slate-600">
                        <Calendar className="w-4 h-4" />
                        <span>
                          {new Date(order.createdAt).toLocaleDateString("id-ID", {
                            day: "numeric",
                            month: "long",
                            year: "numeric",
                          })}
                        </span>
                      </div>
                      <div className={`px-4 py-2 rounded-full border-2 ${config.color} font-semibold text-sm`}>
                        {config.label}
                      </div>
                    </div>

                    {/* Order Items */}
                    <div className="space-y-4 mb-6">
                      {order.items.map((item: any) => (
                        <div
                          key={item.id}
                          className="flex items-center gap-4 p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors"
                        >
                          <div className="relative w-20 h-20 flex-shrink-0 bg-white rounded-lg overflow-hidden">
                            <Image
                              src={item.product.image || "/placeholder-product.jpg"}
                              alt={item.product.name}
                              fill
                              className="object-cover"
                            />
                          </div>
                          <div className="flex-1 min-w-0">
                            <Link
                              href={`/products/${item.product.slug}`}
                              className="font-bold text-slate-900 hover:text-blue-600 transition-colors line-clamp-1 block"
                            >
                              {item.product.name}
                            </Link>
                            <p className="text-sm text-slate-600 mt-1">
                              {item.quantity} item √ó Rp {parseFloat(item.price).toLocaleString("id-ID")}
                            </p>
                          </div>
                          <div className="text-right flex-shrink-0">
                            <p className="font-bold text-lg text-slate-900">
                              Rp {(parseFloat(item.price) * item.quantity).toLocaleString("id-ID")}
                            </p>
                          </div>
                        </div>
                      ))}
                    </div>

                    {/* Shipping Address */}
                    <div className="bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6">
                      <p className="font-semibold text-blue-900 mb-2">Alamat Pengiriman</p>
                      <div className="text-sm text-blue-700">
                        <p className="font-semibold">{order.shippingName}</p>
                        <p>{order.shippingAddress}</p>
                        <p>
                          {order.shippingCity}, {order.shippingZip}
                        </p>
                        <p>{order.shippingCountry}</p>
                      </div>
                    </div>

                    {/* Action Button */}
                    <Link
                      href={`/orders/${order.id}`}
                      className="w-full flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-blue-500/30 transition-all"
                    >
                      <Eye className="w-5 h-5" />
                      Lihat Detail Pesanan
                    </Link>
                  </div>
                </div>
              )
            })}
          </div>
        )}
      </div>
    </div>
  )
}

               --- End file: page.tsx ---

       üìÑ page-corrupt.tsx
           --- Begin file: page-corrupt.tsx ---
import Link from "next/link"
import Image from "next/image"
import { ShoppingBag, Truck, CreditCard, HeadphonesIcon } from "lucide-react"
import ProductCard from "@/components/ProductCard"
import { prisma } from "@/lib/prisma"

async function getFeaturedProducts() {
  try {
    const products = await prisma.product.findMany({
      where: { featured: true },
      take: 8,
      include: { category: true },
    })
    return products
  } catch (error) {
    console.error("Error fetching products:", error)
    return []
  }
}

async function getCategories() {
  try {
    const categories = await prisma.category.findMany({
      take: 6,
    })
    return categories
  } catch (error) {
    console.error("Error fetching categories:", error)
    return []
  }
}

export default async function Home() {
  const featuredProducts = await getFeaturedProducts()
  const categories = await getCategories()

  return (
    <div className="min-h-screen">
      {/* Hero Section */}
      <section className="relative bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white overflow-hidden">
        <div className="absolute inset-0 bg-grid-white/[0.05] bg-[size:60px_60px]"></div>
        <div className="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"></div>
        
        <div className="container mx-auto px-4 lg:px-8 py-24 lg:py-32 relative z-10">
          <div className="grid lg:grid-cols-2 gap-12 items-center">
            <div className="space-y-8">
              <div className="inline-block">
                <span className="bg-gradient-to-r from-blue-400 to-cyan-400 text-slate-900 px-4 py-2 rounded-full text-sm font-semibold">
                  Premium Quality Products
                </span>
              </div>
              <h1 className="text-5xl lg:text-7xl font-bold leading-tight">
                Belanja Premium
                <span className="block bg-gradient-to-r from-blue-400 via-cyan-400 to-teal-400 bg-clip-text text-transparent">
                  Pengalaman Elite
                </span>
              </h1>
              <p className="text-xl lg:text-2xl text-slate-300 leading-relaxed">
                Temukan koleksi eksklusif produk berkualitas tinggi dengan layanan terbaik di kelasnya
              </p>
              <div className="flex flex-col sm:flex-row gap-4 pt-4">
                <Link
                  href="/products"
                  className="group bg-white text-slate-900 px-8 py-4 rounded-xl font-bold text-lg hover:bg-slate-100 transition-all shadow-xl hover:shadow-2xl transform hover:-translate-y-0.5 text-center"
                >
                  <span className="flex items-center justify-center gap-2">
                    Jelajahi Koleksi
                    <span className="group-hover:translate-x-1 transition-transform">‚Üí</span>
                  </span>
                </Link>
                <Link
                  href="/products?featured=true"
                  className="border-2 border-white/30 backdrop-blur-sm px-8 py-4 rounded-xl font-bold text-lg hover:bg-white/10 hover:border-white/50 transition-all text-center"
                >
                  Produk Unggulan
                </Link>
              </div>
              
              <div className="grid grid-cols-3 gap-6 pt-8">
                <div className="text-center">
                  <div className="text-3xl font-bold text-white">500+</div>
                  <div className="text-sm text-slate-400 mt-1">Produk Premium</div>
                </div>
                <div className="text-center">
                  <div className="text-3xl font-bold text-white">10K+</div>
                  <div className="text-sm text-slate-400 mt-1">Pelanggan Puas</div>
                </div>
                <div className="text-center">
                  <div className="text-3xl font-bold text-white">4.9</div>
                  <div className="text-sm text-slate-400 mt-1">Rating</div>
                </div>
              </div>
            </div>
            
            <div className="hidden lg:block relative">
              <div className="relative h-[500px] w-full">
                <div className="absolute inset-0 bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-3xl blur-3xl"></div>
                <div className="relative bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 h-full flex items-center justify-center">
                  <div className="text-center space-y-4">
                    <div className="text-8xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent">E</div>
                    <p className="text-2xl font-semibold text-white">Shopping Elite</p>
                    <p className="text-slate-300">Kualitas Premium untuk Anda</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Features */}
      <section className="py-20 bg-gradient-to-b from-white to-slate-50">
        <div className="container mx-auto px-4 lg:px-8">
          <div className="text-center mb-16">
            <h2 className="text-4xl font-bold text-slate-900 mb-4">Kenapa Memilih Kami?</h2>
            <p className="text-xl text-slate-600">Pengalaman berbelanja terbaik dengan layanan premium</p>
          </div>
          
          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
            <div className="group bg-white rounded-2xl p-8 shadow-md hover:shadow-xl transition-all hover:-translate-y-1 border border-slate-100">
              <div className="bg-gradient-to-br from-blue-500 to-cyan-500 w-16 h-16 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform shadow-lg">
                <Truck className="text-white" size={32} />
              </div>
              <h3 className="font-bold text-xl mb-3 text-slate-900">Gratis Ongkir</h3>
              <p className="text-slate-600 leading-relaxed">Pengiriman gratis untuk pembelian di atas Rp 100.000 ke seluruh Indonesia</p>
            </div>
            
            <div className="group bg-white rounded-2xl p-8 shadow-md hover:shadow-xl transition-all hover:-translate-y-1 border border-slate-100">
              <div className="bg-gradient-to-br from-emerald-500 to-teal-500 w-16 h-16 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform shadow-lg">
                <CreditCard className="text-white" size={32} />
              </div>
              <h3 className="font-bold text-xl mb-3 text-slate-900">Pembayaran Aman</h3>
              <p className="text-slate-600 leading-relaxed">Sistem pembayaran terenkripsi dengan berbagai metode pilihan</p>
            </div>
            
            <div className="group bg-white rounded-2xl p-8 shadow-md hover:shadow-xl transition-all hover:-translate-y-1 border border-slate-100">
              <div className="bg-gradient-to-br from-purple-500 to-pink-500 w-16 h-16 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform shadow-lg">
                <ShoppingBag className="text-white" size={32} />
              </div>
              <h3 className="font-bold text-xl mb-3 text-slate-900">Produk Original</h3>
              <p className="text-slate-600 leading-relaxed">100% produk original bergaransi resmi dari brand terpercaya</p>
            </div>
            
            <div className="group bg-white rounded-2xl p-8 shadow-md hover:shadow-xl transition-all hover:-translate-y-1 border border-slate-100">
              <div className="bg-gradient-to-br from-orange-500 to-red-500 w-16 h-16 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform shadow-lg">
                <HeadphonesIcon className="text-white" size={32} />
              </div>
              <h3 className="font-bold text-xl mb-3 text-slate-900">Support 24/7</h3>
              <p className="text-slate-600 leading-relaxed">Tim customer service profesional siap membantu Anda kapan saja</p>
            </div>
          </div>
        </div>
      </section>

      {/* Categories */}
      {categories.length > 0 && (
        <section className="py-20 bg-white">
          <div className="container mx-auto px-4 lg:px-8">
            <div className="text-center mb-12">
              <h2 className="text-4xl font-bold text-slate-900 mb-4">Jelajahi Kategori</h2>
              <p className="text-xl text-slate-600">Temukan produk sesuai kebutuhan Anda</p>
            </div>
            
            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6">
              {categories.map((category: any) => (
                <Link
                  key={category.id}
                  href={`/products?category=${category.slug}`}
                  className="group bg-gradient-to-br from-slate-50 to-white rounded-2xl p-6 text-center hover:shadow-2xl transition-all duration-300 border border-slate-100 hover:border-slate-300 hover:-translate-y-2"
                >
                  <div className="relative h-24 mb-4 flex items-center justify-center">
                    <div className="text-5xl group-hover:scale-110 transition-transform font-bold bg-gradient-to-br from-slate-800 to-slate-600 bg-clip-text text-transparent">
                      {category.name.charAt(0)}
                    </div>
                  </div>
                  <h3 className="font-bold text-slate-900 group-hover:text-slate-700">{category.name}</h3>
                </Link>
              ))}
            </div>
          </div>
        </section>
      )}

      {/* Featured Products */}
      {featuredProducts.length > 0 && (
        <section className="py-20 bg-gradient-to-b from-slate-50 to-white">
          <div className="container mx-auto px-4 lg:px-8">
            <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-4">
              <div>
                <h2 className="text-4xl font-bold text-slate-900 mb-2">Produk Pilihan</h2>
                <p className="text-xl text-slate-600">Koleksi terbaik spesial untuk Anda</p>
              </div>
              <Link
                href="/products"
                className="group flex items-center gap-2 bg-slate-900 text-white px-6 py-3 rounded-xl hover:bg-slate-700 transition-all shadow-md hover:shadow-lg font-semibold"
              >
                Lihat Semua Produk
                <span className="group-hover:translate-x-1 transition-transform">‚Üí</span>
              </Link>
            </div>
            
            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 lg:gap-8">
              {featuredProducts.map((product: any) => (
                <ProductCard
                  key={product.id}
                  id={product.id}
                  name={product.name}
                  price={parseFloat(product.price.toString())}
                  image={product.image || ""}
                  slug={product.slug}
                />
              ))}
            </div>
          </div>
        </section>
      )}

      {/* CTA Section */}
      <section className="relative py-24 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white overflow-hidden">
        <div className="absolute inset-0 bg-grid-white/[0.05] bg-[size:60px_60px]"></div>
        <div className="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"></div>
        
        <div className="container mx-auto px-4 lg:px-8 text-center relative z-10">
          <div className="max-w-3xl mx-auto space-y-8">
            <div className="inline-block">
              <span className="bg-gradient-to-r from-blue-400 to-cyan-400 text-slate-900 px-4 py-2 rounded-full text-sm font-semibold">
                Penawaran Spesial
              </span>
            </div>
            
            <h2 className="text-4xl lg:text-5xl font-bold leading-tight">
              Bergabung dengan
              <span className="block bg-gradient-to-r from-blue-400 via-cyan-400 to-teal-400 bg-clip-text text-transparent">
                10,000+ Pelanggan Premium
              </span>
            </h2>
            
            <p className="text-xl lg:text-2xl text-slate-300 leading-relaxed">
              Daftar sekarang dan nikmati diskon hingga 50% untuk member baru, plus gratis ongkir tanpa minimum pembelian!
            </p>
            
            <div className="flex flex-col sm:flex-row gap-4 justify-center pt-4">
              <Link
                href="/auth/register"
                className="group bg-white text-slate-900 px-8 py-4 rounded-xl font-bold text-lg hover:bg-slate-100 transition-all shadow-xl hover:shadow-2xl"
              >
                <span className="flex items-center justify-center gap-2">
                  Daftar Gratis Sekarang
                  <span className="group-hover:translate-x-1 transition-transform">‚Üí</span>
                </span>
              </Link>
              <Link
                href="/products"
                className="border-2 border-white/30 backdrop-blur-sm px-8 py-4 rounded-xl font-bold text-lg hover:bg-white/10 hover:border-white/50 transition-all"
              >
                Jelajahi Produk
              </Link>
            </div>
            
            <div className="flex items-center justify-center gap-8 pt-8 text-sm text-slate-400">
              <div className="flex items-center gap-2">
                <span className="text-green-400 font-bold">‚úì</span> Gratis Ongkir
              </div>
              <div className="flex items-center gap-2">
                <span className="text-green-400 font-bold">‚úì</span> Original 100%
              </div>
              <div className="flex items-center gap-2">
                <span className="text-green-400 font-bold">‚úì</span> Garansi Resmi
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  )
}

           --- End file: page-corrupt.tsx ---

       üìÑ page.tsx
           --- Begin file: page.tsx ---
import Link from "next/link"
import Image from "next/image"
import { ShoppingBag, CheckCircle2, Award, Truck, Users, Sparkles, Shield, Package, MessageCircle, UserPlus } from "lucide-react"
import ProductCard from "@/components/ProductCard"
import { prisma } from "@/lib/prisma"

async function getFeaturedProducts() {
  try {
    const products = await prisma.product.findMany({
      where: { featured: true },
      take: 8,
      include: { category: true },
    })
    return products
  } catch (error) {
    console.error("Error fetching products:", error)
    return []
  }
}

async function getCategories() {
  try {
    const categories = await prisma.category.findMany({
      take: 6,
    })
    return categories
  } catch (error) {
    console.error("Error fetching categories:", error)
    return []
  }
}

export default async function Home() {
  const featuredProducts = await getFeaturedProducts()
  const categories = await getCategories()

  return (
    <div className="min-h-screen">
      {/* Hero Section */}
      <section className="relative text-white overflow-hidden bg-gradient-to-br from-[#05347e] via-[#032252] to-[#05347e]">
        <div className="absolute inset-0 bg-grid-white/[0.02] bg-[size:60px_60px]"></div>
        <div className="absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent"></div>
        
        <div className="container mx-auto px-4 lg:px-8 py-20 lg:py-32 relative z-10">
          <div className="max-w-4xl mx-auto text-center space-y-8">
            {/* Badge */}
            <div className="inline-flex items-center gap-2 bg-gradient-to-r from-[#c49c0f] to-[#f0c514] text-[#05347e] px-6 py-3 rounded-full text-sm font-bold shadow-lg">
              <Award size={20} />
              Terpercaya Sejak 1980
            </div>
            
            {/* Main Heading */}
            <h1 className="text-5xl lg:text-7xl font-bold leading-tight">
              Golden Brown Pasta
            </h1>
            
            {/* Slogan */}
            <p className="text-2xl lg:text-4xl font-semibold bg-gradient-to-r from-[#c49c0f] via-[#f0c514] to-[#c49c0f] bg-clip-text text-transparent">
              Kualitas Terbaik, Harga Terjangkau
            </p>
            
            {/* Description */}
            <p className="text-lg lg:text-xl text-gray-200 max-w-2xl mx-auto leading-relaxed">
              Produsen pasta dan bahan makanan berkualitas dengan sertifikasi Halal MUI & BPOM. 
              Belanja mudah dengan promo eksklusif website!
            </p>
            
            {/* CTA Buttons */}
            <div className="flex flex-col sm:flex-row gap-4 justify-center pt-6">
              <Link
                href="/products"
                className="group bg-[#db0705] hover:bg-[#a60504] text-white px-10 py-4 rounded-xl font-bold text-lg transition-all shadow-xl hover:shadow-2xl transform hover:-translate-y-1 flex items-center justify-center gap-2"
              >
                <ShoppingBag size={24} />
                Belanja Sekarang
                <span className="group-hover:translate-x-1 transition-transform">‚Üí</span>
              </Link>
              <Link
                href="#tentang-kami"
                className="border-2 border-white/30 hover:border-[#c49c0f] text-white hover:bg-white/10 px-10 py-4 rounded-xl font-bold text-lg transition-all backdrop-blur-sm"
              >
                Tentang Kami
              </Link>
            </div>
            
            {/* Stats */}
            <div className="grid grid-cols-3 gap-6 max-w-3xl mx-auto pt-12">
              <div className="text-center bg-white/5 backdrop-blur-sm rounded-xl p-6 border border-white/10">
                <div className="text-4xl lg:text-5xl font-bold text-[#c49c0f] mb-2">40+</div>
                <div className="text-sm text-gray-300">Tahun Pengalaman</div>
              </div>
              <div className="text-center bg-white/5 backdrop-blur-sm rounded-xl p-6 border border-white/10">
                <div className="text-4xl lg:text-5xl font-bold text-[#c49c0f] mb-2">100%</div>
                <div className="text-sm text-gray-300">Halal & BPOM</div>
              </div>
              <div className="text-center bg-white/5 backdrop-blur-sm rounded-xl p-6 border border-white/10">
                <div className="text-4xl lg:text-5xl font-bold text-[#c49c0f] mb-2">1000+</div>
                <div className="text-sm text-gray-300">Mitra UMKM</div>
              </div>
            </div>
          </div>
        </div>
      </section>

     

      {/* Why Choose Us */}
      <section className="py-20 bg-gradient-to-b from-white to-gray-50">
        <div className="container mx-auto px-4 lg:px-8">
          <div className="text-center mb-16">
            <h2 className="text-4xl font-bold text-[#05347e] mb-4">Mengapa Memilih Kami?</h2>
            <p className="text-xl text-gray-600">Komitmen kami untuk kualitas dan kepercayaan pelanggan</p>
          </div>
          
          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
            <div className="group bg-white rounded-2xl p-8 shadow-md hover:shadow-xl transition-all hover:-translate-y-1 border border-gray-100 hover:border-[#05347e]">
              <div className="bg-[#05347e] w-16 h-16 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 group-hover:bg-[#db0705] transition-all shadow-lg">
                <Award className="text-white" size={32} />
              </div>
              <h3 className="font-bold text-xl mb-3 text-[#05347e]">Kualitas Produk Prioritas Utama</h3>
              <p className="text-gray-600 leading-relaxed">Produk Golden Brown Pasta menggunakan bahan pilihan dengan standar internasional dan food grade.</p>
            </div>
            
            <div className="group bg-white rounded-2xl p-8 shadow-md hover:shadow-xl transition-all hover:-translate-y-1 border border-gray-100 hover:border-[#05347e]">
              <div className="bg-[#05347e] w-16 h-16 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 group-hover:bg-[#db0705] transition-all shadow-lg">
                <Users className="text-white" size={32} />
              </div>
              <h3 className="font-bold text-xl mb-3 text-[#05347e]">Pelayanan Ramah & Terbaik</h3>
              <p className="text-gray-600 leading-relaxed">Tim kami siap memberikan pelayanan yang ramah, bersahabat, dan profesional untuk semua pelanggan.</p>
            </div>
            
            <div className="group bg-white rounded-2xl p-8 shadow-md hover:shadow-xl transition-all hover:-translate-y-1 border border-gray-100 hover:border-[#05347e]">
              <div className="bg-[#05347e] w-16 h-16 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 group-hover:bg-[#db0705] transition-all shadow-lg">
                <Shield className="text-white" size={32} />
              </div>
              <h3 className="font-bold text-xl mb-3 text-[#05347e]">Higienis & Harga Terjangkau</h3>
              <p className="text-gray-600 leading-relaxed">Produk higienis dengan bahan berkualitas dan harga yang kompetitif untuk semua kalangan UMKM.</p>
            </div>
            
            <div className="group bg-white rounded-2xl p-8 shadow-md hover:shadow-xl transition-all hover:-translate-y-1 border border-gray-100 hover:border-[#05347e]">
              <div className="bg-[#05347e] w-16 h-16 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 group-hover:bg-[#db0705] transition-all shadow-lg">
                <Sparkles className="text-white" size={32} />
              </div>
              <h3 className="font-bold text-xl mb-3 text-[#05347e]">Bersaing di Pasar Global</h3>
              <p className="text-gray-600 leading-relaxed">Produk kami dapat bersaing dengan produk sejenis dari luar negeri dengan kualitas setara.</p>
            </div>
          </div>
        </div>
      </section>

      {/* Tentang Kami Section */}
      <section id="tentang-kami" className="py-20 bg-white">
        <div className="container mx-auto px-4 lg:px-8">
          <div className="grid lg:grid-cols-2 gap-12 items-center">
            <div className="space-y-6">
              <div className="inline-block">
                <span className="bg-gradient-to-r from-[#c49c0f] to-[#f0c514] text-[#05347e] px-4 py-2 rounded-full text-sm font-bold">
                  Sejak 1980
                </span>
              </div>
              <h2 className="text-4xl font-bold text-[#05347e]">Tentang Golden Brown Pasta</h2>
              <div className="space-y-4 text-gray-700 leading-relaxed">
                <p>
                  Golden Brown Pasta terbuat dari bahan-bahan pilihan dengan standar internasional 
                  untuk jenis bahan tambahan makanan dengan pewarna terbaik yang sudah dinyatakan 
                  layak makan (Food Grade) oleh BPOM R.I dan bersertifikat HALAL dari M.U.I.
                </p>
                <p>
                  Oleh karena itu, produk-produk kami memberikan kenyamanan dan keamanan bagi para 
                  customer dan reseller. Kami akan selalu berusaha untuk berkembang agar produk kami 
                  dapat lebih berkualitas dan unggul, sesuai dengan selera konsumen Indonesia.
                </p>
                <p className="font-semibold text-[#05347e]">
                  Berdiri sejak tahun 1980, kami berkomitmen selalu memberikan kenyamanan dan keamanan 
                  bagi para customer dan reseller, kami akan selalu berusaha untuk berkembang agar 
                  produk kami dapat lebih berkualitas dan unggul, sesuai dengan selera konsumen Indonesia.
                </p>
              </div>
              <div className="flex flex-wrap gap-4 pt-4">
                <div className="flex items-center gap-2 bg-green-50 px-4 py-2 rounded-lg border border-green-200">
                  <CheckCircle2 className="text-green-600" size={20} />
                  <span className="text-sm font-semibold text-green-700">Halal MUI</span>
                </div>
                <div className="flex items-center gap-2 bg-blue-50 px-4 py-2 rounded-lg border border-blue-200">
                  <CheckCircle2 className="text-blue-600" size={20} />
                  <span className="text-sm font-semibold text-blue-700">BPOM Certified</span>
                </div>
                <div className="flex items-center gap-2 bg-purple-50 px-4 py-2 rounded-lg border border-purple-200">
                  <CheckCircle2 className="text-purple-600" size={20} />
                  <span className="text-sm font-semibold text-purple-700">Food Grade</span>
                </div>
              </div>
            </div>
            
            <div className="bg-gradient-to-br from-[#05347e] to-[#032252] rounded-3xl p-8 text-white">
              <h3 className="text-2xl font-bold mb-6 text-[#c49c0f]">Keunggulan Kami</h3>
              <div className="space-y-6">
                <div className="flex gap-4">
                  <div className="flex-shrink-0 w-10 h-10 bg-[#c49c0f] rounded-lg flex items-center justify-center text-[#05347e] font-bold">
                    1
                  </div>
                  <div>
                    <h4 className="font-bold mb-2">Sertifikasi Lengkap</h4>
                    <p className="text-sm text-gray-300">Produk kami telah tersertifikasi Halal MUI, BPJPH, terdaftar di BPOM dan memiliki NIB.</p>
                  </div>
                </div>
                
                <div className="flex gap-4">
                  <div className="flex-shrink-0 w-10 h-10 bg-[#c49c0f] rounded-lg flex items-center justify-center text-[#05347e] font-bold">
                    2
                  </div>
                  <div>
                    <h4 className="font-bold mb-2">Inovasi Berbasis Kebutuhan Pasar</h4>
                    <p className="text-sm text-gray-300">Didukung tim R&D berpengalaman yang terus menghadirkan solusi rasa, warna, dan formulasi sesuai tren industri.</p>
                  </div>
                </div>
                
                <div className="flex gap-4">
                  <div className="flex-shrink-0 w-10 h-10 bg-[#c49c0f] rounded-lg flex items-center justify-center text-[#05347e] font-bold">
                    3
                  </div>
                  <div>
                    <h4 className="font-bold mb-2">Formulasi Rasa Sesuai Permintaan</h4>
                    <p className="text-sm text-gray-300">Layanan formulasi khusus (custom flavoring & blending) untuk memenuhi kebutuhan setiap klien.*</p>
                  </div>
                </div>
                
                <div className="flex gap-4">
                  <div className="flex-shrink-0 w-10 h-10 bg-[#c49c0f] rounded-lg flex items-center justify-center text-[#05347e] font-bold">
                    4
                  </div>
                  <div>
                    <h4 className="font-bold mb-2">Skalabilitas Produksi</h4>
                    <p className="text-sm text-gray-300">Tersedia dalam berbagai ukuran dan volume, dari skala UMKM hingga industri manufaktur besar.</p>
                  </div>
                </div>
                
                <div className="flex gap-4">
                  <div className="flex-shrink-0 w-10 h-10 bg-[#c49c0f] rounded-lg flex items-center justify-center text-[#05347e] font-bold">
                    5
                  </div>
                  <div>
                    <h4 className="font-bold mb-2">Jaringan Distribusi Nasional</h4>
                    <p className="text-sm text-gray-300">Sistem distribusi dan agen yang luas serta efisien menjangkau seluruh Indonesia.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Categories */}
      {categories.length > 0 && (
        <section className="py-20 bg-gradient-to-b from-gray-50 to-white">
          <div className="container mx-auto px-4 lg:px-8">
            <div className="text-center mb-12">
              <h2 className="text-4xl font-bold text-[#05347e] mb-4">Kategori Produk</h2>
              <p className="text-xl text-gray-600">Temukan produk pasta dan bahan makanan sesuai kebutuhan Anda</p>
            </div>
            
            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6">
              {categories.map((category) => (
                <Link
                  key={category.id}
                  href={`/products?category=${category.slug}`}
                  className="group bg-white rounded-2xl p-6 text-center hover:shadow-2xl transition-all duration-300 border border-gray-100 hover:border-[#05347e] hover:-translate-y-2"
                >
                  <div className="relative h-24 mb-4 flex items-center justify-center">
                    <div className="text-5xl group-hover:scale-110 transition-transform font-bold bg-gradient-to-br from-[#05347e] to-[#032252] bg-clip-text text-transparent group-hover:from-[#db0705] group-hover:to-[#c49c0f]">
                      <Package className="mx-auto text-[#05347e] group-hover:text-[#db0705] transition-colors" size={56} />
                    </div>
                  </div>
                  <h3 className="font-bold text-[#05347e] group-hover:text-[#db0705] transition-colors">{category.name}</h3>
                </Link>
              ))}
            </div>
          </div>
        </section>
      )}

      {/* Featured Products */}
      {featuredProducts.length > 0 && (
        <section className="py-20 bg-white">
          <div className="container mx-auto px-4 lg:px-8">
            <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-4">
              <div>
                <h2 className="text-4xl font-bold text-[#05347e] mb-2">Produk Unggulan</h2>
                <p className="text-xl text-gray-600">Pilihan terbaik untuk bisnis UMKM Anda</p>
              </div>
              <Link
                href="/products"
                className="group flex items-center gap-2 bg-[#05347e] hover:bg-[#db0705] text-white px-6 py-3 rounded-xl transition-all shadow-md hover:shadow-lg font-semibold"
              >
                Lihat Semua Produk
                <span className="group-hover:translate-x-1 transition-transform">‚Üí</span>
              </Link>
            </div>
            
            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 lg:gap-8">
              {featuredProducts.map((product) => (
                <ProductCard
                  key={product.id}
                  id={product.id}
                  name={product.name}
                  price={parseFloat(product.price.toString())}
                  discount={product.discount ? parseFloat(product.discount.toString()) : undefined}
                  discountPrice={product.discountPrice ? parseFloat(product.discountPrice.toString()) : undefined}
                  image={product.image || ""}
                  slug={product.slug}
                />
              ))}
            </div>
          </div>
        </section>
      )}

      {/* CTA Section */}
      <section className="relative py-24 bg-gradient-to-br from-[#05347e] via-[#032252] to-[#db0705] text-white overflow-hidden">
        <div className="absolute inset-0 bg-grid-white/[0.02] bg-[size:60px_60px]"></div>
        <div className="absolute inset-0 bg-gradient-to-t from-[#032252] via-transparent to-transparent"></div>
        
        <div className="container mx-auto px-4 lg:px-8 text-center relative z-10">
          <div className="max-w-3xl mx-auto space-y-8">
            <div className="inline-block">
              <span className="bg-gradient-to-r from-[#c49c0f] to-[#f0c514] text-[#05347e] px-4 py-2 rounded-full text-sm font-semibold shadow-lg">
                Penawaran Khusus UMKM
              </span>
            </div>
            
            <h2 className="text-4xl lg:text-5xl font-bold leading-tight">
              Bergabung Dengan
              <span className="block bg-gradient-to-r from-[#c49c0f] via-[#f0c514] to-[#c49c0f] bg-clip-text text-transparent">
                1000+ Mitra UMKM Kami
              </span>
            </h2>
            
            <p className="text-xl lg:text-2xl text-gray-200 leading-relaxed">
              Daftar sekarang dan dapatkan harga spesial untuk pembelian grosir! 
              Produk berkualitas dengan sertifikasi lengkap untuk mendukung bisnis Anda.
            </p>
            
            <div className="flex flex-col sm:flex-row gap-4 justify-center pt-4">
              <a
                href="https://wa.me/6281234567890?text=Halo%20Golden%20Brown%20Pasta,%20saya%20ingin%20daftar%20jadi%20mitra%20UMKM"
                target="_blank"
                rel="noopener noreferrer"
                className="group bg-[#25D366] hover:bg-[#1fb855] text-white px-8 py-4 rounded-xl font-bold text-lg transition-all shadow-xl hover:shadow-2xl flex items-center justify-center gap-3"
              >
                <MessageCircle size={24} />
                <span>Daftar via WhatsApp</span>
              </a>
              <Link
                href="/auth/register"
                className="group bg-[#db0705] hover:bg-[#a60504] text-white px-8 py-4 rounded-xl font-bold text-lg transition-all shadow-xl hover:shadow-2xl flex items-center justify-center gap-3"
              >
                <UserPlus size={24} />
                <span>Daftar di Website</span>
              </Link>
            </div>
            
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-12 text-center">
              <div className="bg-white/10 backdrop-blur-sm rounded-xl p-4">
                <div className="text-3xl font-bold text-[#c49c0f]">40+</div>
                <div className="text-sm opacity-75">Tahun Pengalaman</div>
              </div>
              <div className="bg-white/10 backdrop-blur-sm rounded-xl p-4">
                <div className="text-3xl font-bold text-[#c49c0f]">1000+</div>
                <div className="text-sm opacity-75">Mitra UMKM</div>
              </div>
              <div className="bg-white/10 backdrop-blur-sm rounded-xl p-4">
                <div className="text-3xl font-bold text-[#c49c0f]">100%</div>
                <div className="text-sm opacity-75">Halal & BPOM</div>
              </div>
              <div className="bg-white/10 backdrop-blur-sm rounded-xl p-4">
                <div className="text-3xl font-bold text-[#c49c0f]">24/7</div>
                <div className="text-sm opacity-75">Layanan Support</div>
              </div>
            </div>
            
            <div className="flex flex-wrap items-center justify-center gap-6 pt-8 text-sm text-gray-300">
              <div className="flex items-center gap-2">
                <CheckCircle2 className="text-[#c49c0f]" size={20} />
                <span className="font-semibold">Halal MUI & BPOM</span>
              </div>
              <div className="flex items-center gap-2">
                <CheckCircle2 className="text-[#c49c0f]" size={20} />
                <span className="font-semibold">Food Grade</span>
              </div>
              <div className="flex items-center gap-2">
                <CheckCircle2 className="text-[#c49c0f]" size={20} />
                <span className="font-semibold">Harga Grosir</span>
              </div>
              <div className="flex items-center gap-2">
                <CheckCircle2 className="text-[#c49c0f]" size={20} />
                <span className="font-semibold">Pengiriman Nasional</span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  )
}

           --- End file: page.tsx ---

       üìÅ products/
           üìÑ ProductsClient.tsx
               --- Begin file: ProductsClient.tsx ---
"use client"

import { useState } from "react"
import { useRouter } from "next/navigation"
import Link from "next/link"
import { Search, SlidersHorizontal, Grid3x3, LayoutGrid, ChevronDown, ChevronLeft, ChevronRight } from "lucide-react"
import ProductCard from "@/components/ProductCard"

interface Product {
  id: string
  name: string
  price: number
  discount?: number
  discountPrice?: number
  image: string | null
  slug: string
  category: {
    id: string
    name: string
    slug: string
  }
}

interface Category {
  id: string
  name: string
  slug: string
}

interface ProductsClientProps {
  initialProducts: any[]
  categories: Category[]
  searchParams: { category?: string; search?: string; sort?: string; minPrice?: string; maxPrice?: string }
}

export default function ProductsClient({ initialProducts, categories, searchParams }: ProductsClientProps) {
  const router = useRouter()
  const [searchQuery, setSearchQuery] = useState(searchParams.search || "")
  const [selectedCategory, setSelectedCategory] = useState(searchParams.category || "")
  const [sortBy, setSortBy] = useState(searchParams.sort || "newest")
  const [priceRange, setPriceRange] = useState({ min: searchParams.minPrice || "", max: searchParams.maxPrice || "" })
  const [gridView, setGridView] = useState<3 | 4>(3)
  const [showFilters, setShowFilters] = useState(true)
  const [currentPage, setCurrentPage] = useState(1)
  const itemsPerPage = 12

  const products = initialProducts as Product[]

  // Pagination logic
  const totalPages = Math.ceil(products.length / itemsPerPage)
  const startIndex = (currentPage - 1) * itemsPerPage
  const endIndex = startIndex + itemsPerPage
  const paginatedProducts = products.slice(startIndex, endIndex)

  const goToPage = (page: number) => {
    setCurrentPage(page)
    window.scrollTo({ top: 0, behavior: 'smooth' })
  }

  const priceRanges = [
    { label: "Semua Harga", min: "", max: "" },
    { label: "Di bawah Rp 100.000", min: "", max: "100000" },
    { label: "Rp 100.000 - Rp 500.000", min: "100000", max: "500000" },
    { label: "Rp 500.000 - Rp 1.000.000", min: "500000", max: "1000000" },
    { label: "Di atas Rp 1.000.000", min: "1000000", max: "" },
  ]

  const handleSearch = () => {
    setCurrentPage(1) // Reset to first page on search
    const params = new URLSearchParams()
    if (searchQuery) params.set("search", searchQuery)
    if (selectedCategory) params.set("category", selectedCategory)
    if (sortBy !== "newest") params.set("sort", sortBy)
    if (priceRange.min) params.set("minPrice", priceRange.min)
    if (priceRange.max) params.set("maxPrice", priceRange.max)
    
    router.push(`/products?${params.toString()}`)
  }

  const handlePriceRangeChange = (min: string, max: string) => {
    setCurrentPage(1) // Reset to first page on filter change
    setPriceRange({ min, max })
    const params = new URLSearchParams()
    if (searchQuery) params.set("search", searchQuery)
    if (selectedCategory) params.set("category", selectedCategory)
    if (sortBy !== "newest") params.set("sort", sortBy)
    if (min) params.set("minPrice", min)
    if (max) params.set("maxPrice", max)
    
    router.push(`/products?${params.toString()}`)
  }

  const handleSortChange = (value: string) => {
    setCurrentPage(1) // Reset to first page on sort change
    setSortBy(value)
    const params = new URLSearchParams()
    if (searchQuery) params.set("search", searchQuery)
    if (selectedCategory) params.set("category", selectedCategory)
    if (value !== "newest") params.set("sort", value)
    if (priceRange.min) params.set("minPrice", priceRange.min)
    if (priceRange.max) params.set("maxPrice", priceRange.max)
    
    router.push(`/products?${params.toString()}`)
  }

  return (
    <div className="min-h-screen bg-gradient-to-b from-gray-50 to-white">
      <div className="container mx-auto px-4 lg:px-8 py-8">
        {/* Header */}
        <div className="mb-8">
          <h1 className="text-4xl font-bold text-[#05347e] mb-2">Jelajahi Produk</h1>
          <p className="text-gray-600">Temukan produk berkualitas sesuai kebutuhan Anda</p>
        </div>

        {/* Search & Filter Bar */}
        <div className="bg-white rounded-2xl shadow-md border border-gray-100 p-6 mb-8">
          <div className="grid lg:grid-cols-12 gap-4">
            {/* Search */}
            <div className="lg:col-span-5">
              <div className="relative">
                <Search className="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400" size={20} />
                <input
                  type="text"
                  placeholder="Cari produk..."
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && handleSearch()}
                  className="w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#05347e] focus:border-transparent text-gray-800"
                />
              </div>
            </div>

            {/* Sort */}
            <div className="lg:col-span-3">
              <div className="relative">
                <select
                  value={sortBy}
                  onChange={(e) => handleSortChange(e.target.value)}
                  className="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#05347e] appearance-none text-gray-800 font-medium cursor-pointer"
                >
                  <option value="newest">Terbaru</option>
                  <option value="price-asc">Harga Terendah</option>
                  <option value="price-desc">Harga Tertinggi</option>
                  <option value="name">Nama A-Z</option>
                </select>
                <ChevronDown className="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none" size={20} />
              </div>
            </div>

            {/* View Toggle */}
            <div className="lg:col-span-2 flex gap-2">
              <button
                onClick={() => setGridView(3)}
                className={`flex-1 p-3 rounded-xl border transition-all ${
                  gridView === 3
                    ? "bg-[#05347e] border-[#05347e] text-white"
                    : "bg-white border-gray-200 text-gray-600 hover:border-[#05347e]"
                }`}
              >
                <Grid3x3 className="mx-auto" size={20} />
              </button>
              <button
                onClick={() => setGridView(4)}
                className={`flex-1 p-3 rounded-xl border transition-all ${
                  gridView === 4
                    ? "bg-[#05347e] border-[#05347e] text-white"
                    : "bg-white border-gray-200 text-gray-600 hover:border-[#05347e]"
                }`}
              >
                <LayoutGrid className="mx-auto" size={20} />
              </button>
            </div>

            {/* Filter Toggle */}
            <div className="lg:col-span-2">
              <button
                onClick={() => setShowFilters(!showFilters)}
                className="w-full px-4 py-3 bg-[#05347e] text-white rounded-xl hover:bg-[#032252] transition-all font-medium flex items-center justify-center gap-2"
              >
                <SlidersHorizontal size={20} />
                {showFilters ? "Sembunyikan" : "Tampilkan"} Filter
              </button>
            </div>
          </div>
        </div>

        <div className="grid lg:grid-cols-12 gap-8">
          {/* Sidebar Filters */}
          {showFilters && (
            <div className="lg:col-span-3 space-y-6">
              {/* Categories */}
              <div className="bg-white rounded-2xl shadow-md border border-gray-100 p-6">
                <h3 className="font-bold text-lg text-[#05347e] mb-4 flex items-center gap-2">
                  <div className="w-1 h-6 bg-gradient-to-b from-[#c49c0f] to-[#f0c514] rounded-full"></div>
                  Kategori
                </h3>
                <ul className="space-y-2">
                  <li>
                    <Link
                      href="/products"
                      className={`block py-2.5 px-4 rounded-lg transition-all font-medium ${
                        !selectedCategory
                          ? "bg-[#05347e] text-white"
                          : "text-gray-600 hover:bg-gray-50"
                      }`}
                    >
                      Semua Produk
                    </Link>
                  </li>
                  {categories.map((category) => (
                    <li key={category.id}>
                      <Link
                        href={`/products?category=${category.slug}`}
                        className={`block py-2.5 px-4 rounded-lg transition-all font-medium ${
                          selectedCategory === category.slug
                            ? "bg-[#05347e] text-white"
                            : "text-gray-600 hover:bg-gray-50"
                        }`}
                      >
                        {category.name}
                      </Link>
                    </li>
                  ))}
                </ul>
              </div>

              {/* Price Range */}
              <div className="bg-white rounded-2xl shadow-md border border-gray-100 p-6">
                <h3 className="font-bold text-lg text-[#05347e] mb-4 flex items-center gap-2">
                  <div className="w-1 h-6 bg-gradient-to-b from-[#c49c0f] to-[#f0c514] rounded-full"></div>
                  Rentang Harga
                </h3>
                <ul className="space-y-2">
                  {priceRanges.map((range, index) => (
                    <li key={index}>
                      <button
                        onClick={() => handlePriceRangeChange(range.min, range.max)}
                        className={`w-full text-left py-2.5 px-4 rounded-lg transition-all font-medium ${
                          priceRange.min === range.min && priceRange.max === range.max
                            ? "bg-[#05347e] text-white"
                            : "text-gray-600 hover:bg-gray-50"
                        }`}
                      >
                        {range.label}
                      </button>
                    </li>
                  ))}
                </ul>
              </div>

              {/* Quick Stats */}
              <div className="bg-gradient-to-br from-[#05347e] to-[#032252] rounded-2xl shadow-md p-6 text-white">
                <h3 className="font-bold text-lg mb-4 text-[#c49c0f]">Statistik</h3>
                <div className="space-y-3">
                  <div className="flex justify-between items-center">
                    <span className="text-gray-300">Total Produk</span>
                    <span className="font-bold text-xl text-[#c49c0f]">{products.length}</span>
                  </div>
                  <div className="flex justify-between items-center">
                    <span className="text-gray-300">Kategori</span>
                    <span className="font-bold text-xl text-[#c49c0f]">{categories.length}</span>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Products Grid */}
          <div className={showFilters ? "lg:col-span-9" : "lg:col-span-12"}>
            {/* Results Info */}
            <div className="flex justify-between items-center mb-6">
              <p className="text-gray-600">
                Menampilkan <span className="font-bold text-[#05347e]">{startIndex + 1}-{Math.min(endIndex, products.length)}</span> dari <span className="font-bold text-[#05347e]">{products.length}</span> produk
                {selectedCategory && (
                  <span className="ml-2 px-3 py-1 bg-[#05347e] text-white rounded-full text-sm font-medium">
                    {categories.find(c => c.slug === selectedCategory)?.name}
                  </span>
                )}
              </p>
            </div>

            {products.length === 0 ? (
              <div className="text-center py-20">
                <div className="w-32 h-32 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6">
                  <Search className="text-gray-400" size={48} />
                </div>
                <h3 className="text-2xl font-bold text-[#05347e] mb-2">Produk Tidak Ditemukan</h3>
                <p className="text-gray-600 mb-6">Coba kata kunci atau filter lain</p>
                <Link
                  href="/products"
                  className="inline-block px-6 py-3 bg-[#05347e] text-white rounded-xl hover:bg-[#032252] transition-all font-medium"
                >
                  Reset Filter
                </Link>
              </div>
            ) : (
              <>
                <div className={`grid grid-cols-2 md:grid-cols-3 ${gridView === 4 ? 'lg:grid-cols-4' : 'lg:grid-cols-3'} gap-6 lg:gap-8`}>
                  {paginatedProducts.map((product) => (
                    <ProductCard
                      key={product.id}
                      id={product.id}
                      name={product.name}
                      price={parseFloat(product.price.toString())}
                      discount={product.discount ? parseFloat(product.discount.toString()) : undefined}
                      discountPrice={product.discountPrice ? parseFloat(product.discountPrice.toString()) : undefined}
                      image={product.image || ""}
                      slug={product.slug}
                    />
                  ))}
                </div>

                {/* Pagination */}
                {totalPages > 1 && (
                  <div className="mt-12 flex justify-center items-center gap-2">
                    {/* Previous Button */}
                    <button
                      onClick={() => goToPage(currentPage - 1)}
                      disabled={currentPage === 1}
                      className={`px-4 py-2 rounded-xl font-medium transition-all flex items-center gap-2 ${
                        currentPage === 1
                          ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                          : 'bg-white border-2 border-[#05347e] text-[#05347e] hover:bg-[#05347e] hover:text-white'
                      }`}
                    >
                      <ChevronLeft size={18} />
                      <span className="hidden sm:inline">Previous</span>
                    </button>

                    {/* Page Numbers */}
                    <div className="flex gap-2">
                      {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => {
                        // Show first page, last page, current page, and pages around current
                        if (
                          page === 1 ||
                          page === totalPages ||
                          (page >= currentPage - 1 && page <= currentPage + 1)
                        ) {
                          return (
                            <button
                              key={page}
                              onClick={() => goToPage(page)}
                              className={`w-10 h-10 rounded-xl font-bold transition-all ${
                                currentPage === page
                                  ? 'bg-[#05347e] text-white shadow-lg'
                                  : 'bg-white border-2 border-gray-200 text-[#05347e] hover:border-[#05347e] hover:bg-gray-50'
                              }`}
                            >
                              {page}
                            </button>
                          )
                        } else if (
                          page === currentPage - 2 ||
                          page === currentPage + 2
                        ) {
                          return <span key={page} className="w-10 h-10 flex items-center justify-center text-gray-400">...</span>
                        }
                        return null
                      })}
                    </div>

                    {/* Next Button */}
                    <button
                      onClick={() => goToPage(currentPage + 1)}
                      disabled={currentPage === totalPages}
                      className={`px-4 py-2 rounded-xl font-medium transition-all flex items-center gap-2 ${
                        currentPage === totalPages
                          ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                          : 'bg-white border-2 border-[#05347e] text-[#05347e] hover:bg-[#05347e] hover:text-white'
                      }`}
                    >
                      <span className="hidden sm:inline">Next</span>
                      <ChevronRight size={18} />
                    </button>
                  </div>
                )}
              </>
            )}
          </div>
        </div>
      </div>
    </div>
  )
}

               --- End file: ProductsClient.tsx ---

           üìÅ [slug]/
               üìÑ page.tsx
                   --- Begin file: page.tsx ---
"use client"

import { useState, useEffect } from "react"
import Image from "next/image"
import Link from "next/link"
import { useParams } from "next/navigation"
import { ShoppingCart, Minus, Plus, Heart, Share2, Star, Package, Shield, Truck, Check } from "lucide-react"
import { useCartStore } from "@/store/cart"
import toast from "react-hot-toast"
import ProductCard from "@/components/ProductCard"

interface Variant {
  name: string
  options: string[]
}

export default function ProductDetailPage() {
  const params = useParams()
  const slug = params.slug as string
  const [product, setProduct] = useState<any>(null)
  const [relatedProducts, setRelatedProducts] = useState<any[]>([])
  const [quantity, setQuantity] = useState(1)
  const [loading, setLoading] = useState(true)
  const [selectedVariants, setSelectedVariants] = useState<Record<string, string>>({})
  const [activeTab, setActiveTab] = useState<'description' | 'specs' | 'reviews'>('description')
  const [selectedImageIndex, setSelectedImageIndex] = useState(0)
  const addItem = useCartStore((state: { addItem: any }) => state.addItem)

  useEffect(() => {
    const fetchProduct = async () => {
      try {
        const response = await fetch(`/api/products/${slug}`)
        const data = await response.json()

        if (response.ok) {
          setProduct(data.product)
          setRelatedProducts(data.relatedProducts)
          
          // Initialize selected variants
          if (data.product.variants) {
            const variants = JSON.parse(data.product.variants) as Variant[]
            const initial: Record<string, string> = {}
            variants.forEach(v => {
              if (v.options.length > 0) {
                initial[v.name] = v.options[0]
              }
            })
            setSelectedVariants(initial)
          }
        }
      } catch (error) {
        console.error("Error fetching product:", error)
      } finally {
        setLoading(false)
      }
    }

    fetchProduct()
  }, [slug])

  const handleAddToCart = () => {
    if (!product) return

    addItem({
      id: product.id,
      productId: product.id,
      name: product.name,
      price: parseFloat(product.price),
      image: product.image || "",
      quantity,
    })

    toast.success(`${product.name} ditambahkan ke keranjang`)
  }

  const handleVariantChange = (variantName: string, option: string) => {
    setSelectedVariants(prev => ({
      ...prev,
      [variantName]: option
    }))
  }

  if (loading) {
    return (
      <div className="min-h-screen bg-gradient-to-b from-slate-50 to-white">
        <div className="container mx-auto px-4 lg:px-8 py-8">
          <div className="animate-pulse">
            <div className="h-8 bg-slate-200 rounded w-32 mb-8"></div>
            <div className="grid lg:grid-cols-2 gap-12">
              <div className="h-[600px] bg-slate-200 rounded-3xl"></div>
              <div className="space-y-6">
                <div className="h-12 bg-slate-200 rounded w-3/4"></div>
                <div className="h-8 bg-slate-200 rounded w-1/4"></div>
                <div className="h-24 bg-slate-200 rounded"></div>
                <div className="h-16 bg-slate-200 rounded"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    )
  }

  if (!product) {
    return (
      <div className="min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center">
        <div className="text-center">
          <h1 className="text-3xl font-bold text-slate-900 mb-4">Produk Tidak Ditemukan</h1>
          <p className="text-slate-600 mb-8">Maaf, produk yang Anda cari tidak tersedia</p>
          <Link
            href="/products"
            className="inline-block px-6 py-3 bg-slate-900 text-white rounded-xl hover:bg-slate-700 transition-all font-medium"
          >
            Kembali ke Produk
          </Link>
        </div>
      </div>
    )
  }

  const variants = product.variants ? JSON.parse(product.variants) as Variant[] : []
  const inStock = product.stock > 0
  const productImages = product.images ? JSON.parse(product.images) as string[] : [product.image || "/placeholder-product.jpg"]
  const currentImage = productImages[selectedImageIndex] || productImages[0]

  return (
    <div className="min-h-screen bg-gradient-to-b from-slate-50 to-white">
      <div className="container mx-auto px-4 lg:px-8 py-8">
        {/* Breadcrumb */}
        <div className="flex items-center gap-2 text-sm mb-8">
          <Link href="/" className="text-slate-600 hover:text-slate-900">Home</Link>
          <span className="text-slate-400">/</span>
          <Link href="/products" className="text-slate-600 hover:text-slate-900">Produk</Link>
          <span className="text-slate-400">/</span>
          <Link href={`/products?category=${product.category.slug}`} className="text-slate-600 hover:text-slate-900">
            {product.category.name}
          </Link>
          <span className="text-slate-400">/</span>
          <span className="text-slate-900 font-medium">{product.name}</span>
        </div>

        <div className="grid lg:grid-cols-2 gap-12 mb-16">
          {/* Product Images */}
          <div className="space-y-4">
            {/* Main Image */}
            <div className="relative aspect-square bg-white rounded-3xl overflow-hidden border border-slate-200 group">
              <Image
                src={currentImage}
                alt={product.name}
                fill
                className="object-contain p-8 group-hover:scale-105 transition-transform duration-500"
              />
              {product.featured && (
                <div className="absolute top-4 left-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg">
                  Featured
                </div>
              )}
              {!inStock && (
                <div className="absolute top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg">
                  Stok Habis
                </div>
              )}
            </div>

            {/* Thumbnail Gallery */}
            {productImages.length > 1 && (
              <div className="grid grid-cols-4 gap-3">
                {productImages.map((img, idx) => (
                  <button
                    key={idx}
                    onClick={() => setSelectedImageIndex(idx)}
                    className={`relative aspect-square bg-white rounded-xl overflow-hidden border-2 transition-all ${
                      selectedImageIndex === idx
                        ? 'border-slate-900 scale-105'
                        : 'border-slate-200 hover:border-slate-400'
                    }`}
                  >
                    <Image
                      src={img}
                      alt={`${product.name} ${idx + 1}`}
                      fill
                      className="object-contain p-2"
                    />
                  </button>
                ))}
              </div>
            )}
          </div>

          {/* Product Info */}
          <div className="space-y-6">
            <div>
              <div className="flex items-center gap-3 mb-4">
                <span className="px-4 py-1.5 bg-slate-900 text-white rounded-full text-sm font-semibold">
                  {product.category.name}
                </span>
                {product.brand && (
                  <span className="px-4 py-1.5 bg-slate-100 text-slate-700 rounded-full text-sm font-semibold">
                    {product.brand}
                  </span>
                )}
              </div>
              
              <h1 className="text-4xl lg:text-5xl font-bold text-slate-900 mb-4 leading-tight">
                {product.name}
              </h1>

              {/* Rating */}
              <div className="flex items-center gap-4 mb-6">
                <div className="flex items-center gap-1">
                  {[1, 2, 3, 4, 5].map((star) => (
                    <Star key={star} className="w-5 h-5 fill-yellow-400 text-yellow-400" />
                  ))}
                </div>
                <span className="text-slate-600 text-sm">(128 reviews)</span>
              </div>
            </div>

            {/* Price */}
            <div className="bg-gradient-to-br from-slate-50 to-white rounded-2xl p-6 border border-slate-200">
              <div className="flex items-baseline gap-3">
                <span className="text-5xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent">
                  Rp {parseFloat(product.price).toLocaleString("id-ID")}
                </span>
              </div>
              <p className="text-slate-600 mt-2">Termasuk PPN</p>
            </div>

            {/* Stock Status */}
            <div className="flex items-center gap-3">
              <div className={`flex items-center gap-2 px-4 py-2 rounded-xl ${
                inStock ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'
              }`}>
                <Package className="w-5 h-5" />
                <span className="font-semibold">
                  {inStock ? `${product.stock} unit tersedia` : 'Stok Habis'}
                </span>
              </div>
            </div>

            {/* Variants */}
            {variants.length > 0 && (
              <div className="space-y-4">
                {variants.map((variant) => (
                  <div key={variant.name}>
                    <label className="block text-sm font-bold text-slate-900 mb-3">
                      Pilih {variant.name}
                    </label>
                    <div className="flex flex-wrap gap-3">
                      {variant.options.map((option) => (
                        <button
                          key={option}
                          onClick={() => handleVariantChange(variant.name, option)}
                          className={`px-4 py-2.5 rounded-xl border-2 font-medium transition-all ${
                            selectedVariants[variant.name] === option
                              ? 'border-slate-900 bg-slate-900 text-white'
                              : 'border-slate-200 bg-white text-slate-700 hover:border-slate-400'
                          }`}
                        >
                          {option}
                        </button>
                      ))}
                    </div>
                  </div>
                ))}
              </div>
            )}

            {/* Quantity Selector */}
            <div>
              <label className="block text-sm font-bold text-slate-900 mb-3">Jumlah</label>
              <div className="flex items-center gap-4">
                <button
                  onClick={() => setQuantity(Math.max(1, quantity - 1))}
                  className="w-12 h-12 flex items-center justify-center bg-slate-100 rounded-xl hover:bg-slate-200 transition-all"
                >
                  <Minus size={20} className="text-slate-700" />
                </button>
                <span className="text-2xl font-bold text-slate-900 w-16 text-center">{quantity}</span>
                <button
                  onClick={() => setQuantity(Math.min(product.stock, quantity + 1))}
                  disabled={!inStock}
                  className="w-12 h-12 flex items-center justify-center bg-slate-100 rounded-xl hover:bg-slate-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  <Plus size={20} className="text-slate-700" />
                </button>
              </div>
            </div>

            {/* Action Buttons */}
            <div className="flex gap-4">
              <button
                onClick={handleAddToCart}
                disabled={!inStock}
                className="flex-1 bg-gradient-to-r from-slate-900 to-slate-700 text-white py-4 px-8 rounded-xl font-bold text-lg hover:from-slate-800 hover:to-slate-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 shadow-lg hover:shadow-xl"
              >
                <ShoppingCart size={24} />
                <span>{inStock ? 'Tambah ke Keranjang' : 'Stok Habis'}</span>
              </button>
              <button className="w-14 h-14 flex items-center justify-center bg-white border-2 border-slate-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition-all group">
                <Heart className="w-6 h-6 text-slate-600 group-hover:text-red-500 group-hover:fill-red-500" />
              </button>
              <button className="w-14 h-14 flex items-center justify-center bg-white border-2 border-slate-200 rounded-xl hover:border-slate-400 hover:bg-slate-50 transition-all">
                <Share2 className="w-6 h-6 text-slate-600" />
              </button>
            </div>

            {/* Guarantees */}
            <div className="grid grid-cols-3 gap-4 pt-6 border-t border-slate-200">
              <div className="text-center">
                <div className="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-2">
                  <Shield className="w-6 h-6 text-slate-700" />
                </div>
                <p className="text-xs font-semibold text-slate-700">Garansi Resmi</p>
              </div>
              <div className="text-center">
                <div className="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-2">
                  <Truck className="w-6 h-6 text-slate-700" />
                </div>
                <p className="text-xs font-semibold text-slate-700">Gratis Ongkir</p>
              </div>
              <div className="text-center">
                <div className="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-2">
                  <Check className="w-6 h-6 text-slate-700" />
                </div>
                <p className="text-xs font-semibold text-slate-700">100% Original</p>
              </div>
            </div>
          </div>
        </div>

        {/* Product Details Tabs */}
        <div className="bg-white rounded-3xl border border-slate-200 p-8 mb-16">
          {/* Tab Headers */}
          <div className="flex gap-6 border-b border-slate-200 mb-8">
            <button
              onClick={() => setActiveTab('description')}
              className={`pb-4 px-2 font-bold transition-all relative ${
                activeTab === 'description'
                  ? 'text-slate-900'
                  : 'text-slate-400 hover:text-slate-600'
              }`}
            >
              Deskripsi
              {activeTab === 'description' && (
                <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-slate-900"></div>
              )}
            </button>
            <button
              onClick={() => setActiveTab('specs')}
              className={`pb-4 px-2 font-bold transition-all relative ${
                activeTab === 'specs'
                  ? 'text-slate-900'
                  : 'text-slate-400 hover:text-slate-600'
              }`}
            >
              Spesifikasi
              {activeTab === 'specs' && (
                <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-slate-900"></div>
              )}
            </button>
            <button
              onClick={() => setActiveTab('reviews')}
              className={`pb-4 px-2 font-bold transition-all relative ${
                activeTab === 'reviews'
                  ? 'text-slate-900'
                  : 'text-slate-400 hover:text-slate-600'
              }`}
            >
              Review
              {activeTab === 'reviews' && (
                <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-slate-900"></div>
              )}
            </button>
          </div>

          {/* Tab Content */}
          <div className="prose prose-slate max-w-none">
            {activeTab === 'description' && (
              <div className="space-y-4 text-slate-700 leading-relaxed">
                <p className="text-lg">
                  {product.description || "Tidak ada deskripsi untuk produk ini."}
                </p>
              </div>
            )}

            {activeTab === 'specs' && (
              <div className="grid md:grid-cols-2 gap-6">
                {product.brand && (
                  <div className="flex justify-between py-3 border-b border-slate-100">
                    <span className="font-semibold text-slate-900">Brand</span>
                    <span className="text-slate-700">{product.brand}</span>
                  </div>
                )}
                {product.sku && (
                  <div className="flex justify-between py-3 border-b border-slate-100">
                    <span className="font-semibold text-slate-900">SKU</span>
                    <span className="text-slate-700">{product.sku}</span>
                  </div>
                )}
                {product.weight && (
                  <div className="flex justify-between py-3 border-b border-slate-100">
                    <span className="font-semibold text-slate-900">Berat</span>
                    <span className="text-slate-700">{product.weight} kg</span>
                  </div>
                )}
                {product.dimensions && (
                  <div className="flex justify-between py-3 border-b border-slate-100">
                    <span className="font-semibold text-slate-900">Dimensi</span>
                    <span className="text-slate-700">{product.dimensions}</span>
                  </div>
                )}
              </div>
            )}

            {activeTab === 'reviews' && (
              <div className="space-y-6">
                <div className="bg-slate-50 rounded-2xl p-6">
                  <div className="flex items-center gap-4 mb-4">
                    <div className="flex items-center gap-1">
                      {[1, 2, 3, 4, 5].map((star) => (
                        <Star key={star} className="w-5 h-5 fill-yellow-400 text-yellow-400" />
                      ))}
                    </div>
                    <span className="font-bold text-slate-900">5.0</span>
                    <span className="text-slate-600">dari 128 review</span>
                  </div>
                </div>
                <p className="text-slate-600 text-center py-8">Review akan segera hadir</p>
              </div>
            )}
          </div>
        </div>

        {/* Related Products */}
        {relatedProducts.length > 0 && (
          <div>
            <div className="mb-8">
              <h2 className="text-3xl font-bold text-slate-900 mb-2">Produk Terkait</h2>
              <p className="text-slate-600">Produk lain yang mungkin Anda sukai</p>
            </div>
            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 lg:gap-8">
              {relatedProducts.map((relatedProduct) => (
                <ProductCard
                  key={relatedProduct.id}
                  id={relatedProduct.id}
                  name={relatedProduct.name}
                  price={parseFloat(relatedProduct.price)}
                  image={relatedProduct.image || ""}
                  slug={relatedProduct.slug}
                />
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  )
}

                   --- End file: page.tsx ---

           üìÑ page.tsx
               --- Begin file: page.tsx ---
import ProductCard from "@/components/ProductCard"
import { prisma } from "@/lib/prisma"
import ProductsClient from "./ProductsClient"

async function getProducts(searchParams: any) {
  try {
    const params = await searchParams
    const where: any = {}

    if (params.category) {
      where.category = {
        slug: params.category,
      }
    }

    if (params.search) {
      where.OR = [
        { name: { contains: params.search } },
        { description: { contains: params.search } },
      ]
    }

    if (params.minPrice || params.maxPrice) {
      where.price = {}
      if (params.minPrice) {
        where.price.gte = parseFloat(params.minPrice)
      }
      if (params.maxPrice) {
        where.price.lte = parseFloat(params.maxPrice)
      }
    }

    let orderBy: any = { createdAt: "desc" }
    
    if (params.sort === "price-asc") {
      orderBy = { price: "asc" }
    } else if (params.sort === "price-desc") {
      orderBy = { price: "desc" }
    } else if (params.sort === "name") {
      orderBy = { name: "asc" }
    }

    const products = await prisma.product.findMany({
      where,
      include: {
        category: true,
      },
      orderBy,
    })

    // Convert Decimal to number
    return products.map((product) => ({
      ...product,
      price: parseFloat(product.price.toString()),
      discount: product.discount ? parseFloat(product.discount.toString()) : undefined,
      discountPrice: product.discountPrice ? parseFloat(product.discountPrice.toString()) : undefined,
      weight: product.weight ? parseFloat(product.weight.toString()) : null,
    }))
  } catch (error) {
    console.error("Error fetching products:", error)
    return []
  }
}

async function getCategories() {
  try {
    const categories = await prisma.category.findMany()
    return categories
  } catch (error) {
    console.error("Error fetching categories:", error)
    return []
  }
}

export default async function ProductsPage({
  searchParams,
}: {
  searchParams: Promise<{ category?: string; search?: string; sort?: string; minPrice?: string; maxPrice?: string }>
}) {
  const params = await searchParams
  const products = await getProducts(searchParams)
  const categories = await getCategories()

  return (
    <ProductsClient 
      initialProducts={products} 
      categories={categories}
      searchParams={params}
    />
  )
}

               --- End file: page.tsx ---

   üìÅ admin/
       üìÅ categories/
           üìÑ page.tsx
               --- Begin file: page.tsx ---
"use client"

import { useEffect, useState } from "react"
import { Plus, Edit, Trash2, FolderTree, X, Package } from "lucide-react"
import toast from "react-hot-toast"
import Image from "next/image"

export default function AdminCategoriesPage() {
  const [categories, setCategories] = useState<any[]>([])
  const [loading, setLoading] = useState(true)
  const [showModal, setShowModal] = useState(false)
  const [editingCategory, setEditingCategory] = useState<any>(null)
  const [formData, setFormData] = useState({
    name: "",
    slug: "",
    description: "",
    image: "",
  })

  useEffect(() => {
    fetchCategories()
  }, [])

  const fetchCategories = async () => {
    try {
      const response = await fetch("/api/admin/categories")
      const data = await response.json()
      if (response.ok) {
        setCategories(data.categories)
      }
    } catch (error) {
      console.error("Error fetching categories:", error)
    } finally {
      setLoading(false)
    }
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()

    try {
      const url = editingCategory
        ? `/api/admin/categories/${editingCategory.id}`
        : "/api/admin/categories"
      
      const method = editingCategory ? "PATCH" : "POST"

      const response = await fetch(url, {
        method,
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
      })

      const data = await response.json()

      if (response.ok) {
        toast.success(editingCategory ? "Kategori berhasil diupdate" : "Kategori berhasil ditambahkan")
        fetchCategories()
        closeModal()
      } else {
        toast.error(data.error || "Terjadi kesalahan")
      }
    } catch (error) {
      toast.error("Terjadi kesalahan")
    }
  }

  const handleDelete = async (id: string) => {
    if (!confirm("Apakah Anda yakin ingin menghapus kategori ini?")) return

    try {
      const response = await fetch(`/api/admin/categories/${id}`, {
        method: "DELETE",
      })

      const data = await response.json()

      if (response.ok) {
        toast.success("Kategori berhasil dihapus")
        fetchCategories()
      } else {
        toast.error(data.error || "Gagal menghapus kategori")
      }
    } catch (error) {
      toast.error("Terjadi kesalahan")
    }
  }

  const openModal = (category?: any) => {
    if (category) {
      setEditingCategory(category)
      setFormData({
        name: category.name,
        slug: category.slug,
        description: category.description || "",
        image: category.image || "",
      })
    } else {
      setEditingCategory(null)
      setFormData({
        name: "",
        slug: "",
        description: "",
        image: "",
      })
    }
    setShowModal(true)
  }

  const closeModal = () => {
    setShowModal(false)
    setEditingCategory(null)
    setFormData({
      name: "",
      slug: "",
      description: "",
      image: "",
    })
  }

  const generateSlug = (name: string) => {
    return name
      .toLowerCase()
      .replace(/[^a-z0-9]+/g, "-")
      .replace(/(^-|-$)/g, "")
  }

  if (loading) {
    return (
      <div className="flex items-center justify-center py-12">
        <div className="animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"></div>
      </div>
    )
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold text-slate-900">Kelola Kategori</h1>
          <p className="text-slate-600 mt-1">Atur kategori produk di toko Anda</p>
        </div>
        <button
          onClick={() => openModal()}
          className="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg hover:shadow-blue-500/30 transition-all flex items-center gap-2"
        >
          <Plus size={20} />
          <span>Tambah Kategori</span>
        </button>
      </div>

      {/* Categories Grid */}
      <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {categories.map((category) => (
          <div key={category.id} className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden hover:shadow-lg transition-shadow">
            {/* Category Image */}
            <div className="relative h-40 bg-gradient-to-br from-slate-100 to-slate-50">
              {category.image ? (
                <Image
                  src={category.image}
                  alt={category.name}
                  fill
                  className="object-cover"
                />
              ) : (
                <div className="absolute inset-0 flex items-center justify-center">
                  <FolderTree className="w-16 h-16 text-slate-300" />
                </div>
              )}
            </div>

            {/* Category Info */}
            <div className="p-6">
              <h3 className="text-xl font-bold text-slate-900 mb-2">{category.name}</h3>
              <p className="text-sm text-slate-600 mb-3 line-clamp-2">
                {category.description || "Tidak ada deskripsi"}
              </p>
              
              <div className="flex items-center justify-between mb-4">
                <div className="flex items-center gap-2 text-sm text-slate-500">
                  <Package className="w-4 h-4" />
                  <span>{category._count.products} produk</span>
                </div>
                <span className="text-xs font-mono text-slate-400">/{category.slug}</span>
              </div>

              {/* Actions */}
              <div className="flex gap-2">
                <button
                  onClick={() => openModal(category)}
                  className="flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors"
                >
                  <Edit size={16} />
                  <span className="text-sm font-medium">Edit</span>
                </button>
                <button
                  onClick={() => handleDelete(category.id)}
                  className="flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors"
                >
                  <Trash2 size={16} />
                  <span className="text-sm font-medium">Hapus</span>
                </button>
              </div>
            </div>
          </div>
        ))}

        {categories.length === 0 && (
          <div className="col-span-3 text-center py-12">
            <FolderTree className="w-16 h-16 text-slate-300 mx-auto mb-4" />
            <p className="text-slate-600">Belum ada kategori. Tambahkan kategori pertama Anda!</p>
          </div>
        )}
      </div>

      {/* Add/Edit Modal */}
      {showModal && (
        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
          <div className="bg-white rounded-2xl shadow-2xl max-w-2xl w-full">
            {/* Modal Header */}
            <div className="border-b border-slate-200 p-6 flex items-center justify-between">
              <h2 className="text-2xl font-bold text-slate-900">
                {editingCategory ? "Edit Kategori" : "Tambah Kategori Baru"}
              </h2>
              <button
                onClick={closeModal}
                className="p-2 hover:bg-slate-100 rounded-lg transition-colors"
              >
                <X size={24} className="text-slate-600" />
              </button>
            </div>

            {/* Modal Content */}
            <form onSubmit={handleSubmit} className="p-6 space-y-4">
              <div>
                <label className="block text-sm font-semibold text-slate-700 mb-2">
                  Nama Kategori *
                </label>
                <input
                  type="text"
                  value={formData.name}
                  onChange={(e) => {
                    setFormData({ 
                      ...formData, 
                      name: e.target.value,
                      slug: editingCategory ? formData.slug : generateSlug(e.target.value)
                    })
                  }}
                  required
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                  placeholder="contoh: Elektronik"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold text-slate-700 mb-2">
                  Slug *
                </label>
                <input
                  type="text"
                  value={formData.slug}
                  onChange={(e) => setFormData({ ...formData, slug: e.target.value })}
                  required
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800 font-mono text-sm"
                  placeholder="contoh: elektronik"
                />
                <p className="text-xs text-slate-500 mt-1">URL: /products?category={formData.slug}</p>
              </div>

              <div>
                <label className="block text-sm font-semibold text-slate-700 mb-2">
                  Deskripsi
                </label>
                <textarea
                  value={formData.description}
                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                  rows={3}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                  placeholder="Deskripsi singkat tentang kategori ini..."
                />
              </div>

              <div>
                <label className="block text-sm font-semibold text-slate-700 mb-2">
                  URL Gambar
                </label>
                <input
                  type="text"
                  value={formData.image}
                  onChange={(e) => setFormData({ ...formData, image: e.target.value })}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                  placeholder="https://example.com/image.jpg"
                />
              </div>

              {/* Actions */}
              <div className="flex gap-3 pt-4">
                <button
                  type="button"
                  onClick={closeModal}
                  className="flex-1 px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-semibold hover:bg-slate-200 transition-colors"
                >
                  Batal
                </button>
                <button
                  type="submit"
                  className="flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-blue-500/30 transition-all"
                >
                  {editingCategory ? "Update" : "Tambah"} Kategori
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
    </div>
  )
}

               --- End file: page.tsx ---

       üìÑ layout.tsx
           --- Begin file: layout.tsx ---
import { auth } from "@/auth"
import { redirect } from "next/navigation"
import AdminSidebar from "@/components/admin/AdminSidebar"
import AdminHeader from "@/components/admin/AdminHeader"
import { Toaster } from "react-hot-toast"
import Providers from "@/components/Providers"

export const metadata = {
  title: "Admin Panel - E-Shop",
  description: "Admin dashboard untuk mengelola toko online",
}

export default async function AdminLayout({
  children,
}: {
  children: React.ReactNode
}) {
  const session = await auth()

  // Redirect if not admin
  if (!session || session.user.role !== "ADMIN") {
    redirect("/")
  }

  return (
    <Providers>
      <div className="flex min-h-screen bg-slate-50">
        {/* Sidebar */}
        <AdminSidebar />

        {/* Main Content */}
        <div className="flex-1 ml-64">
          <AdminHeader />
          <main className="p-8">
            {children}
          </main>
        </div>
      </div>
      <Toaster position="top-right" />
    </Providers>
  )
}

           --- End file: layout.tsx ---

       üìÅ orders/
           üìÑ page.tsx
               --- Begin file: page.tsx ---
"use client"

import { useEffect, useState } from "react"
import { useRouter } from "next/navigation"
import { Search, Eye, X, Package, MapPin, User, CreditCard, Clock } from "lucide-react"
import toast from "react-hot-toast"
import Image from "next/image"

const statusOptions = [
  { value: "PENDING", label: "Menunggu", color: "bg-yellow-100 text-yellow-700 border-yellow-200" },
  { value: "PROCESSING", label: "Diproses", color: "bg-blue-100 text-blue-700 border-blue-200" },
  { value: "SHIPPED", label: "Dikirim", color: "bg-purple-100 text-purple-700 border-purple-200" },
  { value: "DELIVERED", label: "Selesai", color: "bg-green-100 text-green-700 border-green-200" },
  { value: "CANCELLED", label: "Dibatalkan", color: "bg-red-100 text-red-700 border-red-200" },
]

export default function AdminOrdersPage() {
  const router = useRouter()
  const [orders, setOrders] = useState<any[]>([])
  const [loading, setLoading] = useState(true)
  const [searchQuery, setSearchQuery] = useState("")
  const [filterStatus, setFilterStatus] = useState("")
  const [selectedOrder, setSelectedOrder] = useState<any>(null)
  const [showModal, setShowModal] = useState(false)

  useEffect(() => {
    fetchOrders()
  }, [])

  const fetchOrders = async () => {
    try {
      const response = await fetch("/api/admin/orders")
      const data = await response.json()
      if (response.ok) {
        setOrders(data.orders)
      }
    } catch (error) {
      console.error("Error fetching orders:", error)
    } finally {
      setLoading(false)
    }
  }

  const handleStatusChange = async (orderId: string, newStatus: string) => {
    try {
      const response = await fetch(`/api/admin/orders/${orderId}/status`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ status: newStatus }),
      })

      if (response.ok) {
        toast.success("Status pesanan berhasil diupdate")
        fetchOrders()
        if (selectedOrder?.id === orderId) {
          setSelectedOrder({ ...selectedOrder, status: newStatus })
        }
      } else {
        const data = await response.json()
        toast.error(data.error || "Gagal mengupdate status pesanan")
      }
    } catch (error) {
      toast.error("Terjadi kesalahan")
    }
  }

  const viewOrderDetails = (order: any) => {
    setSelectedOrder(order)
    setShowModal(true)
  }

  const filteredOrders = orders.filter((order) => {
    const matchesSearch = 
      order.id.toLowerCase().includes(searchQuery.toLowerCase()) ||
      order.user.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
      order.user.email.toLowerCase().includes(searchQuery.toLowerCase())
    const matchesStatus = !filterStatus || order.status === filterStatus
    return matchesSearch && matchesStatus
  })

  const getStatusColor = (status: string) => {
    return statusOptions.find(s => s.value === status)?.color || "bg-slate-100 text-slate-700"
  }

  if (loading) {
    return (
      <div className="flex items-center justify-center py-12">
        <div className="animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"></div>
      </div>
    )
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-slate-900">Kelola Pesanan</h1>
        <p className="text-slate-600 mt-1">Pantau dan kelola semua pesanan pelanggan</p>
      </div>

      {/* Search and Filter */}
      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
        <div className="grid md:grid-cols-2 gap-4">
          <div className="relative">
            <Search className="absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400" size={20} />
            <input
              type="text"
              placeholder="Cari order ID, nama, atau email..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
            />
          </div>
          <div className="relative">
            <select
              value={filterStatus}
              onChange={(e) => setFilterStatus(e.target.value)}
              className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800 appearance-none cursor-pointer"
            >
              <option value="">Semua Status</option>
              {statusOptions.map((option) => (
                <option key={option.value} value={option.value}>{option.label}</option>
              ))}
            </select>
          </div>
        </div>
        <div className="mt-4 flex items-center justify-between text-sm text-slate-600">
          <p>Menampilkan {filteredOrders.length} dari {orders.length} pesanan</p>
        </div>
      </div>

      {/* Orders Table */}
      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
        <div className="overflow-x-auto">
          <table className="w-full">
            <thead>
              <tr className="border-b border-slate-200 bg-slate-50">
                <th className="text-left py-4 px-6 text-sm font-semibold text-slate-600">Order ID</th>
                <th className="text-left py-4 px-6 text-sm font-semibold text-slate-600">Pelanggan</th>
                <th className="text-left py-4 px-6 text-sm font-semibold text-slate-600">Items</th>
                <th className="text-left py-4 px-6 text-sm font-semibold text-slate-600">Total</th>
                <th className="text-left py-4 px-6 text-sm font-semibold text-slate-600">Tanggal</th>
                <th className="text-left py-4 px-6 text-sm font-semibold text-slate-600">Status</th>
                <th className="text-right py-4 px-6 text-sm font-semibold text-slate-600">Aksi</th>
              </tr>
            </thead>
            <tbody>
              {filteredOrders.length === 0 ? (
                <tr>
                  <td colSpan={7} className="py-12 text-center">
                    <Package className="w-12 h-12 text-slate-300 mx-auto mb-3" />
                    <p className="text-slate-600">Tidak ada pesanan yang ditemukan</p>
                  </td>
                </tr>
              ) : (
                filteredOrders.map((order) => (
                  <tr key={order.id} className="border-b border-slate-100 hover:bg-slate-50 transition-colors">
                    <td className="py-4 px-6">
                      <span className="text-sm font-mono text-slate-900">#{order.id.slice(0, 8)}</span>
                    </td>
                    <td className="py-4 px-6">
                      <div>
                        <p className="font-medium text-slate-900">{order.user.name}</p>
                        <p className="text-xs text-slate-500">{order.user.email}</p>
                      </div>
                    </td>
                    <td className="py-4 px-6">
                      <span className="text-sm text-slate-600">{order.items.length} produk</span>
                    </td>
                    <td className="py-4 px-6">
                      <span className="font-semibold text-slate-900">
                        Rp {parseFloat(order.total).toLocaleString("id-ID")}
                      </span>
                    </td>
                    <td className="py-4 px-6">
                      <div className="text-sm">
                        <p className="text-slate-900">{new Date(order.createdAt).toLocaleDateString("id-ID")}</p>
                        <p className="text-xs text-slate-500">{new Date(order.createdAt).toLocaleTimeString("id-ID", { hour: "2-digit", minute: "2-digit" })}</p>
                      </div>
                    </td>
                    <td className="py-4 px-6">
                      <select
                        value={order.status}
                        onChange={(e) => handleStatusChange(order.id, e.target.value)}
                        className={`px-3 py-1.5 rounded-lg text-xs font-medium border cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500 ${getStatusColor(order.status)}`}
                      >
                        {statusOptions.map((option) => (
                          <option key={option.value} value={option.value}>
                            {option.label}
                          </option>
                        ))}
                      </select>
                    </td>
                    <td className="py-4 px-6">
                      <div className="flex justify-end">
                        <button
                          onClick={() => viewOrderDetails(order)}
                          className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                          title="Lihat Detail"
                        >
                          <Eye size={18} />
                        </button>
                      </div>
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      </div>

      {/* Order Detail Modal */}
      {showModal && selectedOrder && (
        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
          <div className="bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
            {/* Modal Header */}
            <div className="sticky top-0 bg-white border-b border-slate-200 p-6 flex items-center justify-between">
              <div>
                <h2 className="text-2xl font-bold text-slate-900">Detail Pesanan</h2>
                <p className="text-sm text-slate-600 mt-1">Order ID: #{selectedOrder.id.slice(0, 8)}</p>
              </div>
              <button
                onClick={() => setShowModal(false)}
                className="p-2 hover:bg-slate-100 rounded-lg transition-colors"
              >
                <X size={24} className="text-slate-600" />
              </button>
            </div>

            {/* Modal Content */}
            <div className="p-6 space-y-6">
              {/* Customer Info */}
              <div className="bg-slate-50 rounded-xl p-4">
                <div className="flex items-center gap-2 mb-3">
                  <User className="w-5 h-5 text-slate-600" />
                  <h3 className="font-semibold text-slate-900">Informasi Pelanggan</h3>
                </div>
                <div className="grid md:grid-cols-2 gap-3 text-sm">
                  <div>
                    <p className="text-slate-600">Nama</p>
                    <p className="font-medium text-slate-900">{selectedOrder.user.name}</p>
                  </div>
                  <div>
                    <p className="text-slate-600">Email</p>
                    <p className="font-medium text-slate-900">{selectedOrder.user.email}</p>
                  </div>
                </div>
              </div>

              {/* Shipping Info */}
              <div className="bg-slate-50 rounded-xl p-4">
                <div className="flex items-center gap-2 mb-3">
                  <MapPin className="w-5 h-5 text-slate-600" />
                  <h3 className="font-semibold text-slate-900">Alamat Pengiriman</h3>
                </div>
                <div className="text-sm space-y-1">
                  <p className="font-medium text-slate-900">{selectedOrder.shippingName}</p>
                  <p className="text-slate-600">{selectedOrder.shippingAddress}</p>
                  <p className="text-slate-600">{selectedOrder.shippingCity}, {selectedOrder.shippingZip}</p>
                  <p className="text-slate-600">{selectedOrder.shippingCountry}</p>
                  <p className="text-slate-600">{selectedOrder.shippingEmail}</p>
                </div>
              </div>

              {/* Order Items */}
              <div>
                <div className="flex items-center gap-2 mb-3">
                  <Package className="w-5 h-5 text-slate-600" />
                  <h3 className="font-semibold text-slate-900">Produk yang Dipesan</h3>
                </div>
                <div className="space-y-3">
                  {selectedOrder.items.map((item: any) => (
                    <div key={item.id} className="flex items-center gap-4 p-3 bg-slate-50 rounded-xl">
                      <div className="relative w-16 h-16 flex-shrink-0">
                        <Image
                          src={item.product.image || "/placeholder-product.jpg"}
                          alt={item.product.name}
                          fill
                          className="object-cover rounded-lg"
                        />
                      </div>
                      <div className="flex-1">
                        <p className="font-medium text-slate-900">{item.product.name}</p>
                        <p className="text-sm text-slate-600">Qty: {item.quantity}</p>
                      </div>
                      <div className="text-right">
                        <p className="font-semibold text-slate-900">
                          Rp {parseFloat(item.price).toLocaleString("id-ID")}
                        </p>
                        <p className="text-xs text-slate-600">
                          per item
                        </p>
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              {/* Order Summary */}
              <div className="bg-slate-50 rounded-xl p-4">
                <div className="flex items-center gap-2 mb-3">
                  <CreditCard className="w-5 h-5 text-slate-600" />
                  <h3 className="font-semibold text-slate-900">Ringkasan Pembayaran</h3>
                </div>
                <div className="space-y-2 text-sm">
                  <div className="flex justify-between">
                    <span className="text-slate-600">Subtotal</span>
                    <span className="font-medium text-slate-900">
                      Rp {parseFloat(selectedOrder.total).toLocaleString("id-ID")}
                    </span>
                  </div>
                  <div className="flex justify-between pt-2 border-t border-slate-200">
                    <span className="font-semibold text-slate-900">Total</span>
                    <span className="font-bold text-lg text-slate-900">
                      Rp {parseFloat(selectedOrder.total).toLocaleString("id-ID")}
                    </span>
                  </div>
                </div>
              </div>

              {/* Order Status */}
              <div className="bg-slate-50 rounded-xl p-4">
                <div className="flex items-center gap-2 mb-3">
                  <Clock className="w-5 h-5 text-slate-600" />
                  <h3 className="font-semibold text-slate-900">Status Pesanan</h3>
                </div>
                <select
                  value={selectedOrder.status}
                  onChange={(e) => handleStatusChange(selectedOrder.id, e.target.value)}
                  className={`w-full px-4 py-2.5 rounded-lg text-sm font-medium border cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500 ${getStatusColor(selectedOrder.status)}`}
                >
                  {statusOptions.map((option) => (
                    <option key={option.value} value={option.value}>
                      {option.label}
                    </option>
                  ))}
                </select>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}

               --- End file: page.tsx ---

       üìÑ page.tsx
           --- Begin file: page.tsx ---
import { prisma } from "@/lib/prisma"
import { ShoppingBag, Package, Users, DollarSign, TrendingUp, TrendingDown, Clock, CheckCircle } from "lucide-react"
import Link from "next/link"

async function getStats() {
  try {
    const [totalProducts, totalOrders, totalUsers, totalRevenue, pendingOrders, deliveredOrders] = await Promise.all([
      prisma.product.count(),
      prisma.order.count(),
      prisma.user.count(),
      prisma.order.aggregate({
        _sum: {
          total: true,
        },
      }),
      prisma.order.count({
        where: { status: "PENDING" }
      }),
      prisma.order.count({
        where: { status: "DELIVERED" }
      }),
    ])

    return {
      totalProducts,
      totalOrders,
      totalUsers,
      totalRevenue: totalRevenue._sum.total || 0,
      pendingOrders,
      deliveredOrders,
    }
  } catch (error) {
    console.error("Error fetching stats:", error)
    return {
      totalProducts: 0,
      totalOrders: 0,
      totalUsers: 0,
      totalRevenue: 0,
      pendingOrders: 0,
      deliveredOrders: 0,
    }
  }
}

async function getRecentOrders() {
  try {
    const orders = await prisma.order.findMany({
      take: 8,
      orderBy: {
        createdAt: "desc",
      },
      include: {
        user: true,
        items: {
          include: {
            product: true,
          }
        },
      },
    })
    return orders
  } catch (error) {
    console.error("Error fetching recent orders:", error)
    return []
  }
}

async function getLowStockProducts() {
  try {
    const products = await prisma.product.findMany({
      where: {
        stock: {
          lte: 10,
        }
      },
      take: 5,
      orderBy: {
        stock: "asc",
      },
      include: {
        category: true,
      }
    })
    return products
  } catch (error) {
    console.error("Error fetching low stock products:", error)
    return []
  }
}

export default async function AdminPage() {
  const stats = await getStats()
  const recentOrders = await getRecentOrders()
  const lowStockProducts = await getLowStockProducts()

  const statusLabels: Record<string, string> = {
    PENDING: "Menunggu",
    PROCESSING: "Diproses",
    SHIPPED: "Dikirim",
    DELIVERED: "Selesai",
    CANCELLED: "Dibatalkan",
  }

  return (
    <div className="space-y-6">
      {/* Page Header */}
      <div>
        <h1 className="text-3xl font-bold text-slate-900">Dashboard Admin</h1>
        <p className="text-slate-600 mt-1">Selamat datang kembali! Berikut ringkasan toko Anda.</p>
      </div>

      {/* Stats Grid */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {/* Total Revenue */}
        <div className="bg-white rounded-lg border border-slate-200 shadow-sm p-6">
          <div className="flex items-center justify-between mb-4">
            <div className="w-12 h-12 bg-slate-100 rounded-lg flex items-center justify-center">
              <DollarSign className="w-6 h-6 text-slate-700" />
            </div>
            <span className="flex items-center gap-1 text-sm text-green-600 bg-green-50 px-2 py-1 rounded">
              <TrendingUp className="w-4 h-4" />
              +12%
            </span>
          </div>
          <p className="text-slate-600 text-sm font-medium mb-1">Total Pendapatan</p>
          <p className="text-2xl font-bold text-slate-900">Rp {parseFloat(stats.totalRevenue.toString()).toLocaleString("id-ID")}</p>
        </div>

        {/* Total Orders */}
        <div className="bg-white rounded-lg border border-slate-200 shadow-sm p-6">
          <div className="flex items-center justify-between mb-4">
            <div className="w-12 h-12 bg-slate-100 rounded-lg flex items-center justify-center">
              <Package className="w-6 h-6 text-slate-700" />
            </div>
            <span className="flex items-center gap-1 text-sm text-green-600 bg-green-50 px-2 py-1 rounded">
              <TrendingUp className="w-4 h-4" />
              +8%
            </span>
          </div>
          <p className="text-slate-600 text-sm font-medium mb-1">Total Pesanan</p>
          <p className="text-2xl font-bold text-slate-900">{stats.totalOrders}</p>
          <p className="text-xs text-slate-500 mt-2">{stats.pendingOrders} menunggu konfirmasi</p>
        </div>

        {/* Total Products */}
        <div className="bg-white rounded-lg border border-slate-200 shadow-sm p-6">
          <div className="flex items-center justify-between mb-4">
            <div className="w-12 h-12 bg-slate-100 rounded-lg flex items-center justify-center">
              <ShoppingBag className="w-6 h-6 text-slate-700" />
            </div>
            <span className="flex items-center gap-1 text-sm text-red-600 bg-red-50 px-2 py-1 rounded">
              <TrendingDown className="w-4 h-4" />
              -2%
            </span>
          </div>
          <p className="text-slate-600 text-sm font-medium mb-1">Total Produk</p>
          <p className="text-2xl font-bold text-slate-900">{stats.totalProducts}</p>
          <p className="text-xs text-slate-500 mt-2">{lowStockProducts.length} stok menipis</p>
        </div>

        {/* Total Users */}
        <div className="bg-white rounded-lg border border-slate-200 shadow-sm p-6">
          <div className="flex items-center justify-between mb-4">
            <div className="w-12 h-12 bg-slate-100 rounded-lg flex items-center justify-center">
              <Users className="w-6 h-6 text-slate-700" />
            </div>
            <span className="flex items-center gap-1 text-sm text-green-600 bg-green-50 px-2 py-1 rounded">
              <TrendingUp className="w-4 h-4" />
              +15%
            </span>
          </div>
          <p className="text-slate-600 text-sm font-medium mb-1">Total Pengguna</p>
          <p className="text-2xl font-bold text-slate-900">{stats.totalUsers}</p>
        </div>
      </div>

      <div className="grid lg:grid-cols-3 gap-6">
        {/* Recent Orders - Takes 2 columns */}
        <div className="lg:col-span-2 bg-white rounded-lg shadow-sm border border-slate-200 p-6">
          <div className="flex items-center justify-between mb-6">
            <h2 className="text-xl font-bold text-slate-900">Pesanan Terbaru</h2>
            <Link 
              href="/admin/orders"
              className="text-sm text-slate-700 hover:text-slate-900 font-medium"
            >
              Lihat Semua
            </Link>
          </div>
          <div className="overflow-x-auto">
            <table className="w-full">
              <thead>
                <tr className="border-b border-slate-200">
                  <th className="text-left py-3 px-4 text-sm font-semibold text-slate-600">Order ID</th>
                  <th className="text-left py-3 px-4 text-sm font-semibold text-slate-600">Pelanggan</th>
                  <th className="text-left py-3 px-4 text-sm font-semibold text-slate-600">Items</th>
                  <th className="text-left py-3 px-4 text-sm font-semibold text-slate-600">Total</th>
                  <th className="text-left py-3 px-4 text-sm font-semibold text-slate-600">Status</th>
                </tr>
              </thead>
              <tbody>
                {recentOrders.map((order: any) => (
                  <tr key={order.id} className="border-b border-slate-100 hover:bg-slate-50 transition-colors">
                    <td className="py-4 px-4">
                      <span className="text-sm font-mono text-slate-900">#{order.id.slice(0, 8)}</span>
                    </td>
                    <td className="py-4 px-4">
                      <div>
                        <p className="text-sm font-medium text-slate-900">{order.user.name}</p>
                        <p className="text-xs text-slate-500">{order.user.email}</p>
                      </div>
                    </td>
                    <td className="py-4 px-4">
                      <span className="text-sm text-slate-600">{order.items.length} produk</span>
                    </td>
                    <td className="py-4 px-4">
                      <span className="text-sm font-semibold text-slate-900">
                        Rp {parseFloat(order.total.toString()).toLocaleString("id-ID")}
                      </span>
                    </td>
                    <td className="py-4 px-4">
                      <span
                        className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${
                          order.status === "PENDING"
                            ? "bg-yellow-100 text-yellow-700"
                            : order.status === "PROCESSING"
                            ? "bg-blue-100 text-blue-700"
                            : order.status === "SHIPPED"
                            ? "bg-purple-100 text-purple-700"
                            : order.status === "DELIVERED"
                            ? "bg-green-100 text-green-700"
                            : "bg-red-100 text-red-700"
                        }`}
                      >
                        {order.status === "PENDING" && <Clock className="w-3 h-3" />}
                        {order.status === "DELIVERED" && <CheckCircle className="w-3 h-3" />}
                        {statusLabels[order.status] || order.status}
                      </span>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>

        {/* Low Stock Alert */}
        <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
          <div className="flex items-center justify-between mb-6">
            <h2 className="text-xl font-bold text-slate-900">Stok Menipis</h2>
            <Link 
              href="/admin/products"
              className="text-sm text-blue-600 hover:text-blue-700 font-medium"
            >
              Lihat Semua
            </Link>
          </div>
          <div className="space-y-4">
            {lowStockProducts.length > 0 ? (
              lowStockProducts.map((product: any) => (
                <div key={product.id} className="flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-xl">
                  <div className="flex-1">
                    <p className="text-sm font-medium text-slate-900 line-clamp-1">{product.name}</p>
                    <p className="text-xs text-slate-500">{product.category.name}</p>
                  </div>
                  <div className="text-right">
                    <p className="text-sm font-bold text-red-600">{product.stock}</p>
                    <p className="text-xs text-slate-500">tersisa</p>
                  </div>
                </div>
              ))
            ) : (
              <div className="text-center py-8">
                <CheckCircle className="w-12 h-12 text-green-500 mx-auto mb-2" />
                <p className="text-sm text-slate-600">Semua produk stok aman</p>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  )
}

           --- End file: page.tsx ---

       üìÅ payments/
           üìÑ page.tsx
               --- Begin file: page.tsx ---
"use client"

import { useState } from "react"
import { CreditCard, Smartphone, Landmark, CheckCircle, XCircle } from "lucide-react"
import toast from "react-hot-toast"

interface PaymentMethod {
  id: string
  name: string
  type: string
  icon: any
  enabled: boolean
  description: string
  fee: string
}

export default function AdminPaymentsPage() {
  const [paymentMethods, setPaymentMethods] = useState<PaymentMethod[]>([
    {
      id: "1",
      name: "Transfer Bank",
      type: "bank_transfer",
      icon: Landmark,
      enabled: true,
      description: "Transfer melalui BCA, Mandiri, BNI, BRI",
      fee: "Gratis"
    },
    {
      id: "2",
      name: "Kartu Kredit/Debit",
      type: "card",
      icon: CreditCard,
      enabled: true,
      description: "Visa, Mastercard, JCB",
      fee: "2.9% + Rp 2.000"
    },
    {
      id: "3",
      name: "E-Wallet",
      type: "ewallet",
      icon: Smartphone,
      enabled: true,
      description: "GoPay, OVO, DANA, ShopeePay",
      fee: "1.5%"
    },
    {
      id: "4",
      name: "QRIS",
      type: "qris",
      icon: Smartphone,
      enabled: false,
      description: "Scan QR Code untuk pembayaran",
      fee: "0.7%"
    },
  ])

  const togglePaymentMethod = (id: string) => {
    setPaymentMethods(methods =>
      methods.map(method =>
        method.id === id ? { ...method, enabled: !method.enabled } : method
      )
    )
    toast.success("Status metode pembayaran berhasil diupdate")
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-slate-900">Metode Pembayaran</h1>
        <p className="text-slate-600 mt-1">Kelola metode pembayaran yang tersedia untuk pelanggan</p>
      </div>

      {/* Info Banner */}
      <div className="bg-slate-50 border border-slate-200 rounded-lg p-6">
        <div className="flex items-start gap-4">
          <div className="w-10 h-10 bg-slate-700 rounded-lg flex items-center justify-center flex-shrink-0">
            <CreditCard className="w-5 h-5 text-white" />
          </div>
          <div>
            <h3 className="font-semibold text-slate-900 mb-1">Pembayaran Manual</h3>
            <p className="text-sm text-slate-700">
              Semua pembayaran diproses secara manual. Pelanggan akan memilih metode pembayaran saat checkout,
              kemudian melakukan transfer manual dan menunggu konfirmasi dari admin.
            </p>
          </div>
        </div>
      </div>

      {/* Payment Methods Grid */}
      <div className="grid md:grid-cols-2 gap-6">
        {paymentMethods.map((method) => {
          const Icon = method.icon
          return (
            <div
              key={method.id}
              className={`bg-white rounded-lg border-2 transition-all ${
                method.enabled
                  ? "border-slate-300"
                  : "border-slate-200 opacity-60"
              }`}
            >
              <div className="p-6">
                <div className="flex items-start justify-between mb-4">
                  <div className="flex items-center gap-4">
                    <div
                      className={`w-14 h-14 rounded-lg flex items-center justify-center ${
                        method.enabled
                          ? "bg-slate-700"
                          : "bg-slate-200"
                      }`}
                    >
                      <Icon className={`w-7 h-7 ${method.enabled ? "text-white" : "text-slate-400"}`} />
                    </div>
                    <div>
                      <h3 className="text-lg font-bold text-slate-900">{method.name}</h3>
                      <p className="text-sm text-slate-600">{method.description}</p>
                    </div>
                  </div>
                </div>

                <div className="space-y-3 mb-4">
                  <div className="flex items-center justify-between text-sm">
                    <span className="text-slate-600">Biaya Admin</span>
                    <span className="font-semibold text-slate-900">{method.fee}</span>
                  </div>
                  <div className="flex items-center justify-between text-sm">
                    <span className="text-slate-600">Status</span>
                    <span
                      className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${
                        method.enabled
                          ? "bg-slate-100 text-slate-700"
                          : "bg-slate-50 text-slate-500"
                      }`}
                    >
                      {method.enabled ? (
                        <>
                          <CheckCircle className="w-3 h-3" />
                          Aktif
                        </>
                      ) : (
                        <>
                          <XCircle className="w-3 h-3" />
                          Nonaktif
                        </>
                      )}
                    </span>
                  </div>
                </div>

                <button
                  onClick={() => togglePaymentMethod(method.id)}
                  className={`w-full py-3 rounded-lg font-semibold transition-all ${
                    method.enabled
                      ? "bg-slate-100 text-slate-700 hover:bg-slate-200"
                      : "bg-slate-700 text-white hover:bg-slate-600"
                  }`}
                >
                  {method.enabled ? "Nonaktifkan" : "Aktifkan"}
                </button>
              </div>
            </div>
          )
        })}
      </div>
    </div>
  )
}

               --- End file: page.tsx ---

       üìÅ products/
           üìÑ page-old.tsx
               --- Begin file: page-old.tsx ---
"use client"

import { useEffect, useState } from "react"
import { useRouter } from "next/navigation"
import { Plus, Edit, Trash2, Search, Filter, Package, AlertCircle, X, Save } from "lucide-react"
import Image from "next/image"
import toast from "react-hot-toast"

interface ProductFormData {
  name: string
  slug: string
  description: string
  price: string
  stock: string
  categoryId: string
  image: string
  brand: string
  sku: string
  featured: boolean
}

export default function AdminProductsPage() {
  const router = useRouter()
  const [products, setProducts] = useState<any[]>([])
  const [loading, setLoading] = useState(true)
  const [searchQuery, setSearchQuery] = useState("")
  const [filterCategory, setFilterCategory] = useState("")
  const [categories, setCategories] = useState<any[]>([])
  const [showModal, setShowModal] = useState(false)
  const [editingProduct, setEditingProduct] = useState<any>(null)
  const [formData, setFormData] = useState<ProductFormData>({
    name: "",
    slug: "",
    description: "",
    price: "",
    stock: "",
    categoryId: "",
    image: "",
    brand: "",
    sku: "",
    featured: false,
  })

  useEffect(() => {
    fetchProducts()
    fetchCategories()
  }, [])

  const fetchProducts = async () => {
    try {
      const response = await fetch("/api/admin/products")
      const data = await response.json()
      if (response.ok) {
        setProducts(data.products)
      }
    } catch (error) {
      console.error("Error fetching products:", error)
    } finally {
      setLoading(false)
    }
  }

  const fetchCategories = async () => {
    try {
      const response = await fetch("/api/categories")
      const data = await response.json()
      if (response.ok) {
        setCategories(data)
      }
    } catch (error) {
      console.error("Error fetching categories:", error)
    }
  }

  const handleDelete = async (id: string) => {
    if (!confirm("Apakah Anda yakin ingin menghapus produk ini?")) return

    try {
      const response = await fetch(`/api/admin/products/${id}`, {
        method: "DELETE",
      })

      if (response.ok) {
        toast.success("Produk berhasil dihapus")
        fetchProducts()
      } else {
        toast.error("Gagal menghapus produk")
      }
    } catch (error) {
      toast.error("Terjadi kesalahan")
    }
  }

  const handleOpenModal = (product?: any) => {
    if (product) {
      setEditingProduct(product)
      setFormData({
        name: product.name,
        slug: product.slug,
        description: product.description || "",
        price: product.price.toString(),
        stock: product.stock.toString(),
        categoryId: product.categoryId,
        image: product.image || "",
        brand: product.brand || "",
        sku: product.sku || "",
        featured: product.featured,
      })
    } else {
      setEditingProduct(null)
      setFormData({
        name: "",
        slug: "",
        description: "",
        price: "",
        stock: "",
        categoryId: "",
        image: "",
        brand: "",
        sku: "",
        featured: false,
      })
    }
    setShowModal(true)
  }

  const handleCloseModal = () => {
    setShowModal(false)
    setEditingProduct(null)
  }

  const generateSlug = (name: string) => {
    return name
      .toLowerCase()
      .replace(/[^\w\s-]/g, "")
      .replace(/\s+/g, "-")
      .replace(/-+/g, "-")
      .trim()
  }

  const handleNameChange = (name: string) => {
    setFormData({
      ...formData,
      name,
      slug: generateSlug(name),
    })
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()

    try {
      const url = editingProduct
        ? `/api/admin/products/${editingProduct.id}`
        : "/api/admin/products"
      
      const method = editingProduct ? "PUT" : "POST"

      const response = await fetch(url, {
        method,
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          ...formData,
          price: parseFloat(formData.price),
          stock: parseInt(formData.stock),
        }),
      })

      if (response.ok) {
        toast.success(
          editingProduct
            ? "Produk berhasil diupdate"
            : "Produk berhasil ditambahkan"
        )
        handleCloseModal()
        fetchProducts()
      } else {
        const data = await response.json()
        toast.error(data.error || "Gagal menyimpan produk")
      }
    } catch (error) {
      toast.error("Terjadi kesalahan")
    }
  }

  const filteredProducts = products.filter((product) => {
    const matchesSearch = product.name.toLowerCase().includes(searchQuery.toLowerCase())
    const matchesCategory = !filterCategory || product.category.id === filterCategory
    return matchesSearch && matchesCategory
  })

  if (loading) {
    return (
      <div className="flex items-center justify-center py-12">
        <div className="animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"></div>
      </div>
    )
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold text-slate-900">Kelola Produk</h1>
          <p className="text-slate-600 mt-1">Atur dan kelola semua produk di toko Anda</p>
        </div>
        <button
          onClick={() => handleOpenModal()}
          className="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg hover:shadow-blue-500/30 transition-all flex items-center gap-2"
        >
          <Plus size={20} />
          <span>Tambah Produk</span>
        </button>
      </div>

      {/* Search and Filter */}
      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
        <div className="grid md:grid-cols-2 gap-4">
          <div className="relative">
            <Search className="absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400" size={20} />
            <input
              type="text"
              placeholder="Cari produk..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
            />
          </div>
          <div className="relative">
            <Filter className="absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400" size={20} />
            <select
              value={filterCategory}
              onChange={(e) => setFilterCategory(e.target.value)}
              className="w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800 appearance-none cursor-pointer"
            >
              <option value="">Semua Kategori</option>
              {categories.map((cat) => (
                <option key={cat.id} value={cat.id}>{cat.name}</option>
              ))}
            </select>
          </div>
        </div>
        <div className="mt-4 flex items-center justify-between text-sm text-slate-600">
          <p>Menampilkan {filteredProducts.length} dari {products.length} produk</p>
        </div>
      </div>

      {/* Products Table */}
      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
        <div className="overflow-x-auto">
          <table className="w-full">
            <thead>
              <tr className="border-b border-slate-200 bg-slate-50">
                <th className="text-left py-4 px-6 text-sm font-semibold text-slate-600">Produk</th>
                <th className="text-left py-4 px-6 text-sm font-semibold text-slate-600">Kategori</th>
                <th className="text-left py-4 px-6 text-sm font-semibold text-slate-600">Harga</th>
                <th className="text-left py-4 px-6 text-sm font-semibold text-slate-600">Stok</th>
                <th className="text-left py-4 px-6 text-sm font-semibold text-slate-600">Status</th>
                <th className="text-right py-4 px-6 text-sm font-semibold text-slate-600">Aksi</th>
              </tr>
            </thead>
            <tbody>
              {filteredProducts.length === 0 ? (
                <tr>
                  <td colSpan={6} className="py-12 text-center">
                    <Package className="w-12 h-12 text-slate-300 mx-auto mb-3" />
                    <p className="text-slate-600">Tidak ada produk yang ditemukan</p>
                  </td>
                </tr>
              ) : (
                filteredProducts.map((product) => (
                  <tr key={product.id} className="border-b border-slate-100 hover:bg-slate-50 transition-colors">
                    <td className="py-4 px-6">
                      <div className="flex items-center gap-4">
                        <div className="relative w-16 h-16 flex-shrink-0">
                          <Image
                            src={product.image || "/placeholder-product.jpg"}
                            alt={product.name}
                            fill
                            className="object-cover rounded-lg"
                          />
                        </div>
                        <div>
                          <p className="font-medium text-slate-900 line-clamp-1">{product.name}</p>
                          <p className="text-xs text-slate-500 mt-1">SKU: {product.sku || "N/A"}</p>
                        </div>
                      </div>
                    </td>
                    <td className="py-4 px-6">
                      <span className="inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-700 text-xs font-medium">
                        {product.category.name}
                      </span>
                    </td>
                    <td className="py-4 px-6">
                      <span className="font-semibold text-slate-900">
                        Rp {parseFloat(product.price).toLocaleString("id-ID")}
                      </span>
                    </td>
                    <td className="py-4 px-6">
                      <span className={`font-medium ${product.stock <= 10 ? "text-red-600" : "text-slate-900"}`}>
                        {product.stock}
                      </span>
                      {product.stock <= 10 && (
                        <AlertCircle className="inline ml-1 w-4 h-4 text-red-500" />
                      )}
                    </td>
                    <td className="py-4 px-6">
                      <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${
                        product.stock > 0 ? "bg-green-100 text-green-700" : "bg-red-100 text-red-700"
                      }`}>
                        {product.stock > 0 ? "Tersedia" : "Habis"}
                      </span>
                    </td>
                    <td className="py-4 px-6">
                      <div className="flex justify-end gap-2">
                        <button
                          onClick={() => handleOpenModal(product)}
                          className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                          title="Edit Produk"
                        >
                          <Edit size={18} />
                        </button>
                        <button
                          onClick={() => handleDelete(product.id)}
                          className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"
                          title="Hapus Produk"
                        >
                          <Trash2 size={18} />
                        </button>
                      </div>
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      </div>

      {/* Modal Form */}
      {showModal && (
        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
          <div className="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div className="sticky top-0 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 flex items-center justify-between">
              <h2 className="text-2xl font-bold">
                {editingProduct ? "Edit Produk" : "Tambah Produk Baru"}
              </h2>
              <button
                onClick={handleCloseModal}
                className="p-2 hover:bg-white/20 rounded-lg transition-colors"
              >
                <X className="w-6 h-6" />
              </button>
            </div>

            <form onSubmit={handleSubmit} className="p-6 space-y-4">
              <div>
                <label className="block text-sm font-semibold text-slate-700 mb-2">
                  Nama Produk *
                </label>
                <input
                  type="text"
                  required
                  value={formData.name}
                  onChange={(e) => handleNameChange(e.target.value)}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                  placeholder="Masukkan nama produk"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold text-slate-700 mb-2">
                  Slug (URL)
                </label>
                <input
                  type="text"
                  value={formData.slug}
                  onChange={(e) => setFormData({ ...formData, slug: e.target.value })}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                  placeholder="nama-produk"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold text-slate-700 mb-2">
                  Deskripsi
                </label>
                <textarea
                  value={formData.description}
                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                  rows={4}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800 resize-none"
                  placeholder="Deskripsi produk..."
                />
              </div>

              <div className="grid md:grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-semibold text-slate-700 mb-2">
                    Harga *
                  </label>
                  <input
                    type="number"
                    required
                    value={formData.price}
                    onChange={(e) => setFormData({ ...formData, price: e.target.value })}
                    className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                    placeholder="0"
                    step="0.01"
                  />
                </div>

                <div>
                  <label className="block text-sm font-semibold text-slate-700 mb-2">
                    Stok *
                  </label>
                  <input
                    type="number"
                    required
                    value={formData.stock}
                    onChange={(e) => setFormData({ ...formData, stock: e.target.value })}
                    className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                    placeholder="0"
                  />
                </div>
              </div>

              <div>
                <label className="block text-sm font-semibold text-slate-700 mb-2">
                  Kategori *
                </label>
                <select
                  required
                  value={formData.categoryId}
                  onChange={(e) => setFormData({ ...formData, categoryId: e.target.value })}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                >
                  <option value="">Pilih Kategori</option>
                  {categories.map((cat) => (
                    <option key={cat.id} value={cat.id}>
                      {cat.name}
                    </option>
                  ))}
                </select>
              </div>

              <div>
                <label className="block text-sm font-semibold text-slate-700 mb-2">
                  URL Gambar
                </label>
                <input
                  type="url"
                  value={formData.image}
                  onChange={(e) => setFormData({ ...formData, image: e.target.value })}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                  placeholder="https://..."
                />
              </div>

              <div className="grid md:grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-semibold text-slate-700 mb-2">
                    Brand
                  </label>
                  <input
                    type="text"
                    value={formData.brand}
                    onChange={(e) => setFormData({ ...formData, brand: e.target.value })}
                    className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                    placeholder="Nama brand"
                  />
                </div>

                <div>
                  <label className="block text-sm font-semibold text-slate-700 mb-2">
                    SKU
                  </label>
                  <input
                    type="text"
                    value={formData.sku}
                    onChange={(e) => setFormData({ ...formData, sku: e.target.value })}
                    className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
                    placeholder="SKU-001"
                  />
                </div>
              </div>

              <div className="flex items-center gap-3 p-4 bg-slate-50 rounded-xl">
                <input
                  type="checkbox"
                  id="featured"
                  checked={formData.featured}
                  onChange={(e) => setFormData({ ...formData, featured: e.target.checked })}
                  className="w-5 h-5 text-blue-600 border-slate-300 rounded focus:ring-blue-500"
                />
                <label htmlFor="featured" className="text-sm font-medium text-slate-700">
                  Produk Unggulan
                </label>
              </div>

              <div className="flex gap-3 pt-4">
                <button
                  type="button"
                  onClick={handleCloseModal}
                  className="flex-1 px-6 py-3 bg-slate-200 text-slate-700 rounded-xl font-semibold hover:bg-slate-300 transition-colors"
                >
                  Batal
                </button>
                <button
                  type="submit"
                  className="flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-blue-500/30 transition-all flex items-center justify-center gap-2"
                >
                  <Save className="w-5 h-5" />
                  {editingProduct ? "Update Produk" : "Tambah Produk"}
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
    </div>
  )
}

               --- End file: page-old.tsx ---

           üìÑ page.tsx
               --- Begin file: page.tsx ---
"use client"

import { useEffect, useState } from "react"
import { Plus, Edit, Trash2, Search, Package, Percent } from "lucide-react"
import Image from "next/image"
import toast from "react-hot-toast"
import Modal from "@/components/admin/Modal"
import Button from "@/components/ui/Button"
import Input from "@/components/ui/Input"
import Badge from "@/components/ui/Badge"
import MultipleImageUpload from "@/components/admin/MultipleImageUpload"

interface Product {
  id: string
  name: string
  slug: string
  description: string
  price: number
  discount?: number
  discountPrice?: number
  stock: number
  image: string
  images?: string
  categoryId: string
  brand?: string
  sku?: string
  featured: boolean
  category: { name: string }
}

interface ProductFormData {
  name: string
  slug: string
  description: string
  price: string
  discount: string
  stock: string
  categoryId: string
  images: string[]
  brand: string
  sku: string
  featured: boolean
}

export default function AdminProductsPage() {
  const [products, setProducts] = useState<Product[]>([])
  const [loading, setLoading] = useState(true)
  const [searchQuery, setSearchQuery] = useState("")
  const [categories, setCategories] = useState<any[]>([])
  const [showModal, setShowModal] = useState(false)
  const [editingProduct, setEditingProduct] = useState<Product | null>(null)
  const [formData, setFormData] = useState<ProductFormData>({
    name: "",
    slug: "",
    description: "",
    price: "",
    discount: "0",
    stock: "",
    categoryId: "",
    images: [],
    brand: "",
    sku: "",
    featured: false,
  })

  useEffect(() => {
    fetchProducts()
    fetchCategories()
  }, [])

  const fetchProducts = async () => {
    try {
      const response = await fetch("/api/admin/products")
      const data = await response.json()
      if (response.ok) {
        setProducts(data.products)
      }
    } catch (error) {
      console.error("Error:", error)
    } finally {
      setLoading(false)
    }
  }

  const fetchCategories = async () => {
    try {
      const response = await fetch("/api/categories")
      const data = await response.json()
      if (response.ok) setCategories(data)
    } catch (error) {
      console.error("Error:", error)
    }
  }

  const openAddModal = () => {
    setEditingProduct(null)
    setFormData({
      name: "",
      slug: "",
      description: "",
      price: "",
      discount: "0",
      stock: "",
      categoryId: "",
      images: [],
      brand: "",
      sku: "",
      featured: false,
    })
    setShowModal(true)
  }

  const openEditModal = (product: Product) => {
    setEditingProduct(product)
    const parsedImages = product.images ? JSON.parse(product.images) : []
    setFormData({
      name: product.name,
      slug: product.slug,
      description: product.description || "",
      price: product.price.toString(),
      discount: product.discount?.toString() || "0",
      stock: product.stock.toString(),
      categoryId: product.categoryId,
      images: Array.isArray(parsedImages) ? parsedImages : [product.image].filter(Boolean),
      brand: product.brand || "",
      sku: product.sku || "",
      featured: product.featured,
    })
    setShowModal(true)
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    
    const price = parseFloat(formData.price)
    const discount = parseFloat(formData.discount)
    const discountPrice = discount > 0 ? price - (price * discount / 100) : price

    const payload = {
      ...formData,
      price: parseFloat(formData.price),
      discount: parseFloat(formData.discount),
      discountPrice,
      stock: parseInt(formData.stock),
      image: formData.images[0] || "",
      images: JSON.stringify(formData.images),
    }

    try {
      const url = editingProduct
        ? `/api/admin/products/${editingProduct.id}`
        : "/api/admin/products"
      
      const response = await fetch(url, {
        method: editingProduct ? "PUT" : "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload),
      })

      if (response.ok) {
        toast.success(editingProduct ? "Produk diupdate" : "Produk ditambahkan")
        setShowModal(false)
        fetchProducts()
      } else {
        const data = await response.json()
        toast.error(data.error || "Terjadi kesalahan")
      }
    } catch (error) {
      toast.error("Gagal menyimpan produk")
    }
  }

  const handleDelete = async (id: string) => {
    if (!confirm("Hapus produk ini?")) return

    try {
      const response = await fetch(`/api/admin/products/${id}`, {
        method: "DELETE",
      })

      if (response.ok) {
        toast.success("Produk dihapus")
        fetchProducts()
      } else {
        toast.error("Gagal menghapus produk")
      }
    } catch (error) {
      toast.error("Terjadi kesalahan")
    }
  }

  const generateSlug = (name: string) => {
    const slug = name
      .toLowerCase()
      .replace(/[^a-z0-9]+/g, "-")
      .replace(/(^-|-$)/g, "")
    setFormData({ ...formData, name, slug })
  }

  const calculateDiscountPrice = () => {
    const price = parseFloat(formData.price) || 0
    const discount = parseFloat(formData.discount) || 0
    return price - (price * discount / 100)
  }

  const filteredProducts = products.filter(product =>
    product.name.toLowerCase().includes(searchQuery.toLowerCase())
  )

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold text-slate-900">Kelola Produk</h1>
          <p className="text-slate-600 mt-1">Manage produk toko Anda</p>
        </div>
        <Button onClick={openAddModal}>
          <Plus size={20} className="mr-2" />
          Tambah Produk
        </Button>
      </div>

      {/* Search */}
      <div className="bg-white rounded-lg border border-slate-200 p-4">
        <div className="relative">
          <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" size={20} />
          <input
            type="text"
            placeholder="Cari produk..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-300"
          />
        </div>
      </div>

      {/* Products Grid */}
      {loading ? (
        <div className="text-center py-12">Loading...</div>
      ) : (
        <div className="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
          {filteredProducts.map((product) => (
            <div
              key={product.id}
              className="bg-white rounded-lg border border-slate-200 overflow-hidden hover:shadow-lg transition-shadow"
            >
              <div className="relative h-48 bg-slate-100">
                <Image
                  src={product.image || "/placeholder.jpg"}
                  alt={product.name}
                  fill
                  className="object-cover"
                />
                {product.discount && product.discount > 0 && (
                  <div className="absolute top-2 right-2 bg-red-600 text-white px-2 py-1 rounded text-xs font-bold flex items-center gap-1">
                    <Percent size={12} />
                    -{product.discount}%
                  </div>
                )}
                {product.featured && (
                  <Badge variant="warning" className="absolute top-2 left-2">
                    Featured
                  </Badge>
                )}
              </div>
              <div className="p-4">
                <h3 className="font-semibold text-slate-900 mb-1 truncate">
                  {product.name}
                </h3>
                <p className="text-xs text-slate-500 mb-2">{product.category.name}</p>
                
                <div className="mb-3">
                  {product.discount && product.discount > 0 ? (
                    <>
                      <div className="flex items-center gap-2">
                        <p className="text-lg font-bold text-slate-900">
                          Rp {product.discountPrice?.toLocaleString("id-ID")}
                        </p>
                        <Badge variant="danger" className="text-xs">
                          -{product.discount}%
                        </Badge>
                      </div>
                      <p className="text-sm text-slate-500 line-through">
                        Rp {product.price.toLocaleString("id-ID")}
                      </p>
                    </>
                  ) : (
                    <p className="text-lg font-bold text-slate-900">
                      Rp {product.price.toLocaleString("id-ID")}
                    </p>
                  )}
                </div>

                <div className="flex items-center justify-between text-sm mb-3">
                  <span className="text-slate-600">Stok:</span>
                  <span className={product.stock < 10 ? "text-red-600 font-semibold" : "text-slate-900"}>
                    {product.stock}
                  </span>
                </div>

                <div className="flex gap-2">
                  <Button
                    variant="outline"
                    size="sm"
                    onClick={() => openEditModal(product)}
                    className="flex-1"
                  >
                    <Edit size={14} className="mr-1" />
                    Edit
                  </Button>
                  <Button
                    variant="danger"
                    size="sm"
                    onClick={() => handleDelete(product.id)}
                  >
                    <Trash2 size={14} />
                  </Button>
                </div>
              </div>
            </div>
          ))}
        </div>
      )}

      {/* Modal Form */}
      <Modal
        isOpen={showModal}
        onClose={() => setShowModal(false)}
        title={editingProduct ? "Edit Produk" : "Tambah Produk"}
        size="xl"
        footer={
          <>
            <Button variant="secondary" onClick={() => setShowModal(false)}>
              Batal
            </Button>
            <Button variant="primary" onClick={handleSubmit}>
              Simpan
            </Button>
          </>
        }
      >
        <form onSubmit={handleSubmit} className="space-y-6">
          <div className="grid md:grid-cols-2 gap-6">
            <Input
              label="Nama Produk"
              value={formData.name}
              onChange={(e) => generateSlug(e.target.value)}
              required
            />
            <Input
              label="Slug"
              value={formData.slug}
              onChange={(e) => setFormData({ ...formData, slug: e.target.value })}
              helperText="URL-friendly name"
              required
            />
          </div>

          <div>
            <label className="block text-sm font-semibold text-slate-700 mb-2">
              Deskripsi
            </label>
            <textarea
              value={formData.description}
              onChange={(e) => setFormData({ ...formData, description: e.target.value })}
              rows={4}
              className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-300"
            />
          </div>

          <div className="grid md:grid-cols-3 gap-6">
            <Input
              label="Harga Normal"
              type="number"
              value={formData.price}
              onChange={(e) => setFormData({ ...formData, price: e.target.value })}
              required
            />
            <Input
              label="Diskon (%)"
              type="number"
              min="0"
              max="100"
              value={formData.discount}
              onChange={(e) => setFormData({ ...formData, discount: e.target.value })}
              helperText="0 = tanpa diskon"
            />
            <div>
              <label className="block text-sm font-semibold text-slate-700 mb-2">
                Harga Setelah Diskon
              </label>
              <div className="px-4 py-3 bg-green-50 border border-green-200 rounded-lg text-green-700 font-bold">
                Rp {calculateDiscountPrice().toLocaleString("id-ID")}
              </div>
            </div>
          </div>

          <div className="grid md:grid-cols-3 gap-6">
            <Input
              label="Stok"
              type="number"
              value={formData.stock}
              onChange={(e) => setFormData({ ...formData, stock: e.target.value })}
              required
            />
            <div>
              <label className="block text-sm font-semibold text-slate-700 mb-2">
                Kategori <span className="text-red-500">*</span>
              </label>
              <select
                value={formData.categoryId}
                onChange={(e) => setFormData({ ...formData, categoryId: e.target.value })}
                className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-300"
                required
              >
                <option value="">Pilih Kategori</option>
                {categories.map((cat) => (
                  <option key={cat.id} value={cat.id}>
                    {cat.name}
                  </option>
                ))}
              </select>
            </div>
            <div className="flex items-center">
              <label className="flex items-center gap-2 cursor-pointer">
                <input
                  type="checkbox"
                  checked={formData.featured}
                  onChange={(e) => setFormData({ ...formData, featured: e.target.checked })}
                  className="w-4 h-4 text-slate-700 border-slate-300 rounded focus:ring-slate-500"
                />
                <span className="text-sm font-semibold text-slate-700">Produk Featured</span>
              </label>
            </div>
          </div>

          <div className="grid md:grid-cols-2 gap-6">
            <Input
              label="Brand"
              value={formData.brand}
              onChange={(e) => setFormData({ ...formData, brand: e.target.value })}
            />
            <Input
              label="SKU"
              value={formData.sku}
              onChange={(e) => setFormData({ ...formData, sku: e.target.value })}
            />
          </div>

          <div>
            <label className="block text-sm font-semibold text-slate-700 mb-3">
              Gambar Produk
            </label>
            <MultipleImageUpload
              images={formData.images}
              onChange={(images) => setFormData({ ...formData, images })}
              maxImages={5}
            />
          </div>
        </form>
      </Modal>
    </div>
  )
}

               --- End file: page.tsx ---

       üìÅ settings/
           üìÑ page.tsx
               --- Begin file: page.tsx ---
"use client"

import { useState } from "react"
import { Settings, Globe, Mail, Bell, Shield, Database, Save } from "lucide-react"
import toast from "react-hot-toast"

export default function AdminSettingsPage() {
  const [settings, setSettings] = useState({
    siteName: "E-Commerce Store",
    siteUrl: "https://example.com",
    siteDescription: "Toko online terpercaya dengan berbagai produk berkualitas",
    contactEmail: "support@example.com",
    contactPhone: "+62 812-3456-7890",
    emailNotifications: true,
    orderNotifications: true,
    stockAlerts: true,
    maintenanceMode: false,
  })

  const handleSave = () => {
    toast.success("Pengaturan berhasil disimpan")
  }

  const handleChange = (field: string, value: any) => {
    setSettings(prev => ({ ...prev, [field]: value }))
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold text-slate-900">Pengaturan</h1>
        <p className="text-slate-600 mt-1">Kelola pengaturan sistem dan konfigurasi toko</p>
      </div>

      {/* General Settings */}
      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
        <div className="bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4">
          <div className="flex items-center gap-3 text-white">
            <Globe className="w-5 h-5" />
            <h2 className="text-xl font-bold">Pengaturan Umum</h2>
          </div>
        </div>
        <div className="p-6 space-y-4">
          <div>
            <label className="block text-sm font-semibold text-slate-700 mb-2">
              Nama Situs
            </label>
            <input
              type="text"
              value={settings.siteName}
              onChange={(e) => handleChange("siteName", e.target.value)}
              className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
            />
          </div>
          <div>
            <label className="block text-sm font-semibold text-slate-700 mb-2">
              URL Situs
            </label>
            <input
              type="url"
              value={settings.siteUrl}
              onChange={(e) => handleChange("siteUrl", e.target.value)}
              className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
            />
          </div>
          <div>
            <label className="block text-sm font-semibold text-slate-700 mb-2">
              Deskripsi Situs
            </label>
            <textarea
              value={settings.siteDescription}
              onChange={(e) => handleChange("siteDescription", e.target.value)}
              rows={3}
              className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800 resize-none"
            />
          </div>
        </div>
      </div>

      {/* Contact Settings */}
      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
        <div className="bg-gradient-to-r from-green-600 to-teal-600 px-6 py-4">
          <div className="flex items-center gap-3 text-white">
            <Mail className="w-5 h-5" />
            <h2 className="text-xl font-bold">Informasi Kontak</h2>
          </div>
        </div>
        <div className="p-6 space-y-4">
          <div>
            <label className="block text-sm font-semibold text-slate-700 mb-2">
              Email Kontak
            </label>
            <input
              type="email"
              value={settings.contactEmail}
              onChange={(e) => handleChange("contactEmail", e.target.value)}
              className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 text-slate-800"
            />
          </div>
          <div>
            <label className="block text-sm font-semibold text-slate-700 mb-2">
              Nomor Telepon
            </label>
            <input
              type="tel"
              value={settings.contactPhone}
              onChange={(e) => handleChange("contactPhone", e.target.value)}
              className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 text-slate-800"
            />
          </div>
        </div>
      </div>

      {/* Notification Settings */}
      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
        <div className="bg-gradient-to-r from-orange-600 to-pink-600 px-6 py-4">
          <div className="flex items-center gap-3 text-white">
            <Bell className="w-5 h-5" />
            <h2 className="text-xl font-bold">Notifikasi</h2>
          </div>
        </div>
        <div className="p-6 space-y-4">
          <div className="flex items-center justify-between p-4 bg-slate-50 rounded-xl">
            <div>
              <p className="font-semibold text-slate-900">Notifikasi Email</p>
              <p className="text-sm text-slate-600">Terima notifikasi melalui email</p>
            </div>
            <label className="relative inline-flex items-center cursor-pointer">
              <input
                type="checkbox"
                checked={settings.emailNotifications}
                onChange={(e) => handleChange("emailNotifications", e.target.checked)}
                className="sr-only peer"
              />
              <div className="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
            </label>
          </div>
          <div className="flex items-center justify-between p-4 bg-slate-50 rounded-xl">
            <div>
              <p className="font-semibold text-slate-900">Notifikasi Pesanan</p>
              <p className="text-sm text-slate-600">Notifikasi saat ada pesanan baru</p>
            </div>
            <label className="relative inline-flex items-center cursor-pointer">
              <input
                type="checkbox"
                checked={settings.orderNotifications}
                onChange={(e) => handleChange("orderNotifications", e.target.checked)}
                className="sr-only peer"
              />
              <div className="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
            </label>
          </div>
          <div className="flex items-center justify-between p-4 bg-slate-50 rounded-xl">
            <div>
              <p className="font-semibold text-slate-900">Alert Stok</p>
              <p className="text-sm text-slate-600">Notifikasi saat stok produk rendah</p>
            </div>
            <label className="relative inline-flex items-center cursor-pointer">
              <input
                type="checkbox"
                checked={settings.stockAlerts}
                onChange={(e) => handleChange("stockAlerts", e.target.checked)}
                className="sr-only peer"
              />
              <div className="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
            </label>
          </div>
        </div>
      </div>

      {/* System Settings */}
      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
        <div className="bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-4">
          <div className="flex items-center gap-3 text-white">
            <Shield className="w-5 h-5" />
            <h2 className="text-xl font-bold">Sistem</h2>
          </div>
        </div>
        <div className="p-6 space-y-4">
          <div className="flex items-center justify-between p-4 bg-slate-50 rounded-xl">
            <div>
              <p className="font-semibold text-slate-900">Mode Maintenance</p>
              <p className="text-sm text-slate-600">Nonaktifkan akses sementara untuk maintenance</p>
            </div>
            <label className="relative inline-flex items-center cursor-pointer">
              <input
                type="checkbox"
                checked={settings.maintenanceMode}
                onChange={(e) => handleChange("maintenanceMode", e.target.checked)}
                className="sr-only peer"
              />
              <div className="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
            </label>
          </div>
          <div className="p-4 bg-blue-50 border border-blue-200 rounded-xl">
            <div className="flex items-start gap-3">
              <Database className="w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5" />
              <div>
                <p className="font-semibold text-blue-900 mb-1">Database</p>
                <p className="text-sm text-blue-700">
                  Backup database dilakukan otomatis setiap hari pada pukul 02:00 WIB
                </p>
                <button
                  onClick={() => toast.success("Backup database dimulai")}
                  className="mt-3 px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg hover:bg-blue-700 transition-colors"
                >
                  Backup Sekarang
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Save Button */}
      <div className="flex justify-end">
        <button
          onClick={handleSave}
          className="flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-blue-500/30 transition-all"
        >
          <Save className="w-5 h-5" />
          Simpan Semua Pengaturan
        </button>
      </div>
    </div>
  )
}

               --- End file: page.tsx ---

       üìÅ users/
           üìÑ page.tsx
               --- Begin file: page.tsx ---
"use client"

import { useEffect, useState } from "react"
import { Search, UserPlus, Edit2, Trash2, Shield, User, Mail, Calendar, Filter } from "lucide-react"
import toast from "react-hot-toast"
import Image from "next/image"

export default function AdminUsersPage() {
  const [users, setUsers] = useState<any[]>([])
  const [loading, setLoading] = useState(true)
  const [searchQuery, setSearchQuery] = useState("")
  const [filterRole, setFilterRole] = useState<string>("")

  useEffect(() => {
    fetchUsers()
  }, [])

  const fetchUsers = async () => {
    try {
      const response = await fetch("/api/admin/users")
      const data = await response.json()
      if (response.ok) {
        setUsers(data.users)
      }
    } catch (error) {
      console.error("Error fetching users:", error)
    } finally {
      setLoading(false)
    }
  }

  const handleDeleteUser = async (userId: string) => {
    if (!confirm("Apakah Anda yakin ingin menghapus user ini?")) return

    try {
      const response = await fetch(`/api/admin/users/${userId}`, {
        method: "DELETE",
      })

      if (response.ok) {
        toast.success("User berhasil dihapus")
        fetchUsers()
      } else {
        toast.error("Gagal menghapus user")
      }
    } catch (error) {
      toast.error("Terjadi kesalahan")
    }
  }

  const handleToggleRole = async (userId: string, currentRole: string) => {
    const newRole = currentRole === "ADMIN" ? "USER" : "ADMIN"
    
    try {
      const response = await fetch(`/api/admin/users/${userId}`, {
        method: "PATCH",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ role: newRole }),
      })

      if (response.ok) {
        toast.success(`Role berhasil diubah menjadi ${newRole}`)
        fetchUsers()
      } else {
        toast.error("Gagal mengubah role")
      }
    } catch (error) {
      toast.error("Terjadi kesalahan")
    }
  }

  const filteredUsers = users.filter((user) => {
    const matchesSearch =
      user.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||
      user.email.toLowerCase().includes(searchQuery.toLowerCase())
    const matchesRole = !filterRole || user.role === filterRole
    return matchesSearch && matchesRole
  })

  if (loading) {
    return (
      <div className="flex items-center justify-center py-12">
        <div className="animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"></div>
      </div>
    )
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold text-slate-900">Kelola Pengguna</h1>
          <p className="text-slate-600 mt-1">Manage user accounts dan permissions</p>
        </div>
        <button className="px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-blue-500/30 transition-all flex items-center gap-2">
          <UserPlus className="w-5 h-5" />
          Tambah Pengguna
        </button>
      </div>

      {/* Filters */}
      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
        <div className="grid md:grid-cols-2 gap-4">
          {/* Search */}
          <div className="relative">
            <Search className="absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400" size={20} />
            <input
              type="text"
              placeholder="Cari nama atau email..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800"
            />
          </div>

          {/* Role Filter */}
          <div className="relative">
            <Filter className="absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400" size={20} />
            <select
              value={filterRole}
              onChange={(e) => setFilterRole(e.target.value)}
              className="w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800 cursor-pointer appearance-none"
            >
              <option value="">Semua Role</option>
              <option value="USER">User</option>
              <option value="ADMIN">Admin</option>
            </select>
          </div>
        </div>
      </div>

      {/* Stats Cards */}
      <div className="grid md:grid-cols-3 gap-6">
        <div className="bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl p-6 text-white shadow-lg">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-blue-100 text-sm mb-1">Total Users</p>
              <p className="text-3xl font-bold">{users.filter(u => u.role === "USER").length}</p>
            </div>
            <div className="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center">
              <User className="w-7 h-7" />
            </div>
          </div>
        </div>

        <div className="bg-gradient-to-br from-purple-600 to-purple-700 rounded-2xl p-6 text-white shadow-lg">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-purple-100 text-sm mb-1">Total Admins</p>
              <p className="text-3xl font-bold">{users.filter(u => u.role === "ADMIN").length}</p>
            </div>
            <div className="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center">
              <Shield className="w-7 h-7" />
            </div>
          </div>
        </div>

        <div className="bg-gradient-to-br from-green-600 to-green-700 rounded-2xl p-6 text-white shadow-lg">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-green-100 text-sm mb-1">Total Users</p>
              <p className="text-3xl font-bold">{users.length}</p>
            </div>
            <div className="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center">
              <User className="w-7 h-7" />
            </div>
          </div>
        </div>
      </div>

      {/* Users Table */}
      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-slate-50 border-b border-slate-200">
              <tr>
                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">
                  User
                </th>
                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">
                  Email
                </th>
                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">
                  Role
                </th>
                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">
                  Bergabung
                </th>
                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">
                  Aksi
                </th>
              </tr>
            </thead>
            <tbody className="divide-y divide-slate-200">
              {filteredUsers.map((user) => (
                <tr key={user.id} className="hover:bg-slate-50 transition-colors">
                  <td className="px-6 py-4">
                    <div className="flex items-center gap-3">
                      <div className="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold">
                        {user.image ? (
                          <Image
                            src={user.image}
                            alt={user.name || "User"}
                            width={40}
                            height={40}
                            className="rounded-full"
                          />
                        ) : (
                          <span className="text-sm">
                            {user.name?.charAt(0)?.toUpperCase() || "U"}
                          </span>
                        )}
                      </div>
                      <div>
                        <p className="font-semibold text-slate-900">{user.name || "No Name"}</p>
                        <p className="text-sm text-slate-500">ID: {user.id.slice(0, 8)}</p>
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex items-center gap-2 text-slate-600">
                      <Mail className="w-4 h-4" />
                      <span className="text-sm">{user.email}</span>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <button
                      onClick={() => handleToggleRole(user.id, user.role)}
                      className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold transition-all ${
                        user.role === "ADMIN"
                          ? "bg-purple-100 text-purple-700 hover:bg-purple-200"
                          : "bg-blue-100 text-blue-700 hover:bg-blue-200"
                      }`}
                    >
                      {user.role === "ADMIN" ? (
                        <Shield className="w-3 h-3" />
                      ) : (
                        <User className="w-3 h-3" />
                      )}
                      {user.role}
                    </button>
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex items-center gap-2 text-slate-600">
                      <Calendar className="w-4 h-4" />
                      <span className="text-sm">
                        {new Date(user.createdAt).toLocaleDateString("id-ID")}
                      </span>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <div className="flex items-center gap-2">
                      <button
                        className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                        title="Edit User"
                      >
                        <Edit2 className="w-4 h-4" />
                      </button>
                      <button
                        onClick={() => handleDeleteUser(user.id)}
                        className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"
                        title="Hapus User"
                      >
                        <Trash2 className="w-4 h-4" />
                      </button>
                    </div>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>

          {filteredUsers.length === 0 && (
            <div className="text-center py-12">
              <User className="w-16 h-16 text-slate-300 mx-auto mb-4" />
              <p className="text-slate-600 font-semibold">Tidak ada user ditemukan</p>
              <p className="text-sm text-slate-500 mt-1">Coba ubah filter pencarian</p>
            </div>
          )}
        </div>
      </div>
    </div>
  )
}

               --- End file: page.tsx ---

   üìÅ api/
       üìÅ admin/
           üìÅ categories/
               üìÅ [id]/
                   üìÑ route.ts
                       --- Begin file: route.ts ---
import { auth } from "@/auth"
import { prisma } from "@/lib/prisma"
import { NextResponse } from "next/server"

export async function PATCH(
  request: Request,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json({ error: "Unauthorized" }, { status: 401 })
    }

    const { id } = await params
    const body = await request.json()
    const { name, slug, description, image } = body

    // Check if slug already exists (excluding current category)
    if (slug) {
      const existing = await prisma.category.findFirst({
        where: { 
          slug,
          NOT: { id }
        }
      })

      if (existing) {
        return NextResponse.json({ error: "Slug sudah digunakan" }, { status: 400 })
      }
    }

    const category = await prisma.category.update({
      where: { id },
      data: {
        name,
        slug,
        description,
        image,
      },
    })

    return NextResponse.json({ category })
  } catch (error) {
    console.error("Error updating category:", error)
    return NextResponse.json({ error: "Internal server error" }, { status: 500 })
  }
}

export async function DELETE(
  request: Request,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json({ error: "Unauthorized" }, { status: 401 })
    }

    const { id } = await params

    // Check if category has products
    const category = await prisma.category.findUnique({
      where: { id },
      include: {
        _count: {
          select: { products: true }
        }
      }
    })

    if (!category) {
      return NextResponse.json({ error: "Kategori tidak ditemukan" }, { status: 404 })
    }

    if (category._count.products > 0) {
      return NextResponse.json({ 
        error: `Tidak dapat menghapus kategori yang memiliki ${category._count.products} produk` 
      }, { status: 400 })
    }

    await prisma.category.delete({
      where: { id },
    })

    return NextResponse.json({ message: "Kategori berhasil dihapus" })
  } catch (error) {
    console.error("Error deleting category:", error)
    return NextResponse.json({ error: "Internal server error" }, { status: 500 })
  }
}

                       --- End file: route.ts ---

               üìÑ route.ts
                   --- Begin file: route.ts ---
import { auth } from "@/auth"
import { prisma } from "@/lib/prisma"
import { NextResponse } from "next/server"

export async function GET() {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json({ error: "Unauthorized" }, { status: 401 })
    }

    const categories = await prisma.category.findMany({
      include: {
        _count: {
          select: { products: true }
        }
      },
      orderBy: {
        createdAt: "desc"
      }
    })

    return NextResponse.json({ categories })
  } catch (error) {
    console.error("Error fetching categories:", error)
    return NextResponse.json({ error: "Internal server error" }, { status: 500 })
  }
}

export async function POST(request: Request) {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json({ error: "Unauthorized" }, { status: 401 })
    }

    const body = await request.json()
    const { name, slug, description, image } = body

    // Check if slug already exists
    const existing = await prisma.category.findUnique({
      where: { slug }
    })

    if (existing) {
      return NextResponse.json({ error: "Slug sudah digunakan" }, { status: 400 })
    }

    const category = await prisma.category.create({
      data: {
        name,
        slug,
        description,
        image,
      },
    })

    return NextResponse.json({ category }, { status: 201 })
  } catch (error) {
    console.error("Error creating category:", error)
    return NextResponse.json({ error: "Internal server error" }, { status: 500 })
  }
}

                   --- End file: route.ts ---

           üìÅ orders/
               üìÅ [id]/
                   üìÑ route.ts
                       --- Begin file: route.ts ---
import { NextRequest, NextResponse } from "next/server"
import { auth } from "@/auth"
import { prisma } from "@/lib/prisma"

export async function PATCH(
  req: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json(
        { error: "Unauthorized" },
        { status: 401 }
      )
    }

    const { status } = await req.json()
    const { id } = await params

    const order = await prisma.order.update({
      where: { id },
      data: { status },
    })

    return NextResponse.json({ order })
  } catch (error) {
    console.error("Error updating order:", error)
    return NextResponse.json(
      { error: "Terjadi kesalahan" },
      { status: 500 }
    )
  }
}

                       --- End file: route.ts ---

                   üìÅ status/
                       üìÑ route.ts
                           --- Begin file: route.ts ---
import { NextRequest, NextResponse } from "next/server"
import { auth } from "@/auth"
import { prisma } from "@/lib/prisma"

export async function PUT(
  request: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    // Check authentication
    const session = await auth()
    
    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json(
        { error: "Unauthorized - Admin access required" },
        { status: 401 }
      )
    }

    const { id } = await params
    const body = await request.json()
    const { status } = body

    // Validate status
    const validStatuses = ["PENDING", "PROCESSING", "SHIPPED", "DELIVERED", "CANCELLED"]
    if (!status || !validStatuses.includes(status)) {
      return NextResponse.json(
        { error: "Invalid status. Must be one of: " + validStatuses.join(", ") },
        { status: 400 }
      )
    }

    // Check if order exists
    const order = await prisma.order.findUnique({
      where: { id }
    })

    if (!order) {
      return NextResponse.json(
        { error: "Order not found" },
        { status: 404 }
      )
    }

    // Update order status
    const updatedOrder = await prisma.order.update({
      where: { id },
      data: { status },
      include: {
        user: {
          select: {
            name: true,
            email: true
          }
        },
        items: {
          include: {
            product: true
          }
        }
      }
    })

    return NextResponse.json({
      message: "Order status updated successfully",
      order: updatedOrder
    })

  } catch (error) {
    console.error("Error updating order status:", error)
    return NextResponse.json(
      { error: "Failed to update order status" },
      { status: 500 }
    )
  }
}

                           --- End file: route.ts ---

               üìÑ route.ts
                   --- Begin file: route.ts ---
import { NextRequest, NextResponse } from "next/server"
import { auth } from "@/auth"
import { prisma } from "@/lib/prisma"

export async function GET(req: NextRequest) {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json(
        { error: "Unauthorized" },
        { status: 401 }
      )
    }

    const orders = await prisma.order.findMany({
      include: {
        user: true,
        items: {
          include: {
            product: true,
          },
        },
      },
      orderBy: {
        createdAt: "desc",
      },
    })

    return NextResponse.json({ orders })
  } catch (error) {
    console.error("Error fetching orders:", error)
    return NextResponse.json(
      { error: "Terjadi kesalahan" },
      { status: 500 }
    )
  }
}

                   --- End file: route.ts ---

           üìÅ products/
               üìÅ [id]/
                   üìÑ route.ts
                       --- Begin file: route.ts ---
import { NextRequest, NextResponse } from "next/server"
import { auth } from "@/auth"
import { prisma } from "@/lib/prisma"

export async function DELETE(
  req: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json(
        { error: "Unauthorized" },
        { status: 401 }
      )
    }

    const { id } = await params

    await prisma.product.delete({
      where: { id },
    })

    return NextResponse.json({ message: "Produk berhasil dihapus" })
  } catch (error) {
    console.error("Error deleting product:", error)
    return NextResponse.json(
      { error: "Terjadi kesalahan" },
      { status: 500 }
    )
  }
}

export async function PATCH(
  req: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json(
        { error: "Unauthorized" },
        { status: 401 }
      )
    }

    const data = await req.json()
    const { id } = await params

    // Calculate discount price
    const discount = data.discount || 0
    const discountPrice = discount > 0 
      ? data.price - (data.price * discount / 100)
      : data.price

    const product = await prisma.product.update({
      where: { id },
      data: {
        name: data.name,
        slug: data.slug,
        description: data.description,
        price: data.price,
        discount: discount,
        discountPrice: discountPrice,
        image: data.image,
        images: data.images || null,
        stock: data.stock,
        categoryId: data.categoryId,
        featured: data.featured,
        brand: data.brand,
        sku: data.sku,
      },
      include: {
        category: true,
      },
    })

    return NextResponse.json({ product })
  } catch (error) {
    console.error("Error updating product:", error)
    return NextResponse.json(
      { error: "Terjadi kesalahan" },
      { status: 500 }
    )
  }
}

export const PUT = PATCH // Support both PATCH and PUT

                       --- End file: route.ts ---

               üìÑ route.ts
                   --- Begin file: route.ts ---
import { NextRequest, NextResponse } from "next/server"
import { auth } from "@/auth"
import { prisma } from "@/lib/prisma"

export async function GET(req: NextRequest) {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json(
        { error: "Unauthorized" },
        { status: 401 }
      )
    }

    const products = await prisma.product.findMany({
      include: {
        category: true,
      },
      orderBy: {
        createdAt: "desc",
      },
    })

    return NextResponse.json({ products })
  } catch (error) {
    console.error("Error fetching products:", error)
    return NextResponse.json(
      { error: "Terjadi kesalahan" },
      { status: 500 }
    )
  }
}

export async function POST(req: NextRequest) {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json(
        { error: "Unauthorized" },
        { status: 401 }
      )
    }

    const data = await req.json()

    // Calculate discount price
    const discount = data.discount || 0
    const discountPrice = discount > 0 
      ? data.price - (data.price * discount / 100)
      : data.price

    const product = await prisma.product.create({
      data: {
        name: data.name,
        slug: data.slug || data.name.toLowerCase().replace(/\s+/g, "-"),
        description: data.description,
        price: data.price,
        discount: discount,
        discountPrice: discountPrice,
        image: data.image,
        images: data.images || null,
        stock: data.stock,
        categoryId: data.categoryId,
        featured: data.featured || false,
        brand: data.brand,
        sku: data.sku,
      },
      include: {
        category: true,
      },
    })

    return NextResponse.json({ product })
  } catch (error) {
    console.error("Error creating product:", error)
    return NextResponse.json(
      { error: "Terjadi kesalahan" },
      { status: 500 }
    )
  }
}

                   --- End file: route.ts ---

           üìÅ users/
               üìÅ [id]/
                   üìÑ route.ts
                       --- Begin file: route.ts ---
import { NextRequest, NextResponse } from "next/server"
import { auth } from "@/auth"
import { prisma } from "@/lib/prisma"

export async function PATCH(
  request: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json({ error: "Unauthorized" }, { status: 401 })
    }

    const { id } = await params
    const body = await request.json()
    const { role } = body

    if (!role || !["USER", "ADMIN"].includes(role)) {
      return NextResponse.json(
        { error: "Invalid role. Must be USER or ADMIN" },
        { status: 400 }
      )
    }

    // Don't allow changing own role
    if (id === session.user.id) {
      return NextResponse.json(
        { error: "Cannot change your own role" },
        { status: 400 }
      )
    }

    const user = await prisma.user.update({
      where: { id },
      data: { role },
      select: {
        id: true,
        name: true,
        email: true,
        role: true,
      },
    })

    return NextResponse.json({
      message: "User role updated successfully",
      user,
    })
  } catch (error) {
    console.error("Error updating user:", error)
    return NextResponse.json(
      { error: "Failed to update user" },
      { status: 500 }
    )
  }
}

export async function DELETE(
  request: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json({ error: "Unauthorized" }, { status: 401 })
    }

    const { id } = await params

    // Don't allow deleting own account
    if (id === session.user.id) {
      return NextResponse.json(
        { error: "Cannot delete your own account" },
        { status: 400 }
      )
    }

    await prisma.user.delete({
      where: { id },
    })

    return NextResponse.json({
      message: "User deleted successfully",
    })
  } catch (error) {
    console.error("Error deleting user:", error)
    return NextResponse.json(
      { error: "Failed to delete user" },
      { status: 500 }
    )
  }
}

                       --- End file: route.ts ---

               üìÑ route.ts
                   --- Begin file: route.ts ---
import { NextResponse } from "next/server"
import { auth } from "@/auth"
import { prisma } from "@/lib/prisma"

export async function GET() {
  try {
    const session = await auth()

    if (!session || session.user.role !== "ADMIN") {
      return NextResponse.json({ error: "Unauthorized" }, { status: 401 })
    }

    const users = await prisma.user.findMany({
      select: {
        id: true,
        name: true,
        email: true,
        image: true,
        role: true,
        createdAt: true,
        _count: {
          select: {
            orders: true,
          },
        },
      },
      orderBy: {
        createdAt: "desc",
      },
    })

    return NextResponse.json({ users })
  } catch (error) {
    console.error("Error fetching users:", error)
    return NextResponse.json(
      { error: "Internal server error" },
      { status: 500 }
    )
  }
}

                   --- End file: route.ts ---

       üìÅ auth/
           üìÅ [...nextauth]/
               üìÑ route.ts
                   --- Begin file: route.ts ---
import { handlers } from "@/auth"

export const { GET, POST } = handlers

                   --- End file: route.ts ---

           üìÅ register/
               üìÑ route.ts
                   --- Begin file: route.ts ---
import { NextRequest, NextResponse } from "next/server"
import { prisma } from "@/lib/prisma"
import bcrypt from "bcryptjs"
import { sendVerificationEmail } from "@/lib/email"
import crypto from "crypto"

export async function POST(req: NextRequest) {
  try {
    const { name, email, password } = await req.json()

    if (!name || !email || !password) {
      return NextResponse.json(
        { error: "Semua field harus diisi" },
        { status: 400 }
      )
    }

    // Check if user already exists
    const existingUser = await prisma.user.findUnique({
      where: { email },
    })

    if (existingUser) {
      return NextResponse.json(
        { error: "Email sudah terdaftar" },
        { status: 400 }
      )
    }

    // Hash password
    const hashedPassword = await bcrypt.hash(password, 10)

    // Create user
    const user = await prisma.user.create({
      data: {
        name,
        email,
        password: hashedPassword,
      },
    })

    // Create verification token
    const token = crypto.randomBytes(32).toString("hex")
    const expires = new Date(Date.now() + 24 * 60 * 60 * 1000) // 24 hours

    await prisma.verificationToken.create({
      data: {
        email,
        token,
        expires,
        userId: user.id,
      },
    })

    // Check if email is configured
    const isEmailConfigured = 
      process.env.EMAIL_SERVER_HOST && 
      process.env.EMAIL_SERVER_USER && 
      process.env.EMAIL_SERVER_PASSWORD

    if (!isEmailConfigured) {
      // Auto-verify in development mode when email is not configured
      await prisma.user.update({
        where: { id: user.id },
        data: { emailVerified: new Date() },
      })
      
      console.log("‚ö†Ô∏è  Development mode: Email auto-verified")
      return NextResponse.json({
        message: "Registrasi berhasil! Anda dapat langsung login.",
      })
    }

    // Send verification email in production
    try {
      await sendVerificationEmail(email, token)
      return NextResponse.json({
        message: "Registrasi berhasil! Silakan cek email Anda untuk verifikasi.",
      })
    } catch (emailError) {
      console.error("Email error:", emailError)
      // If email fails, auto-verify as fallback
      await prisma.user.update({
        where: { id: user.id },
        data: { emailVerified: new Date() },
      })
      
      return NextResponse.json({
        message: "Registrasi berhasil! Email verifikasi gagal dikirim, tapi akun Anda sudah aktif.",
      })
    }
  } catch (error) {
    console.error("Register error:", error)
    return NextResponse.json(
      { error: "Terjadi kesalahan saat registrasi" },
      { status: 500 }
    )
  }
}

                   --- End file: route.ts ---

           üìÅ verify-email/
               üìÑ route.ts
                   --- Begin file: route.ts ---
import { NextRequest, NextResponse } from "next/server"
import { prisma } from "@/lib/prisma"

export async function GET(req: NextRequest) {
  try {
    const { searchParams } = new URL(req.url)
    const token = searchParams.get("token")

    if (!token) {
      return NextResponse.json(
        { error: "Token tidak valid" },
        { status: 400 }
      )
    }

    const verificationToken = await prisma.verificationToken.findUnique({
      where: { token },
    })

    if (!verificationToken) {
      return NextResponse.json(
        { error: "Token tidak ditemukan" },
        { status: 404 }
      )
    }

    if (verificationToken.expires < new Date()) {
      return NextResponse.json(
        { error: "Token sudah kadaluarsa" },
        { status: 400 }
      )
    }

    // Update user email verified
    await prisma.user.update({
      where: { id: verificationToken.userId },
      data: { emailVerified: new Date() },
    })

    // Delete verification token
    await prisma.verificationToken.delete({
      where: { token },
    })

    return NextResponse.json({
      message: "Email berhasil diverifikasi! Silakan login.",
    })
  } catch (error) {
    console.error("Verify email error:", error)
    return NextResponse.json(
      { error: "Terjadi kesalahan saat verifikasi email" },
      { status: 500 }
    )
  }
}

                   --- End file: route.ts ---

       üìÅ categories/
           üìÑ route.ts
               --- Begin file: route.ts ---
import { NextResponse } from "next/server"
import { prisma } from "@/lib/prisma"

export async function GET() {
  try {
    const categories = await prisma.category.findMany({
      orderBy: {
        name: "asc",
      },
    })

    return NextResponse.json(categories)
  } catch (error) {
    console.error("Error fetching categories:", error)
    return NextResponse.json(
      { error: "Internal server error" },
      { status: 500 }
    )
  }
}

               --- End file: route.ts ---

       üìÅ orders/
           üìÅ [id]/
               üìÑ route.ts
                   --- Begin file: route.ts ---
import { NextRequest, NextResponse } from "next/server"
import { auth } from "@/auth"
import { prisma } from "@/lib/prisma"

export async function GET(
  request: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const session = await auth()
    
    if (!session) {
      return NextResponse.json(
        { error: "Unauthorized" },
        { status: 401 }
      )
    }

    const { id } = await params

    const order = await prisma.order.findUnique({
      where: { id },
      include: {
        items: {
          include: {
            product: {
              select: {
                id: true,
                name: true,
                slug: true,
                image: true,
              }
            }
          }
        },
        user: {
          select: {
            id: true,
            name: true,
            email: true,
          }
        }
      }
    })

    if (!order) {
      return NextResponse.json(
        { error: "Order not found" },
        { status: 404 }
      )
    }

    // Check if the order belongs to the user (unless admin)
    if (session.user.role !== "ADMIN" && order.userId !== session.user.id) {
      return NextResponse.json(
        { error: "Forbidden" },
        { status: 403 }
      )
    }

    return NextResponse.json({ order })
  } catch (error) {
    console.error("Error fetching order:", error)
    return NextResponse.json(
      { error: "Internal server error" },
      { status: 500 }
    )
  }
}

                   --- End file: route.ts ---

           üìÑ route.ts
               --- Begin file: route.ts ---
import { NextRequest, NextResponse } from "next/server"
import { auth } from "@/auth"
import { prisma } from "@/lib/prisma"

export async function POST(req: NextRequest) {
  try {
    const session = await auth()

    if (!session || !session.user) {
      return NextResponse.json(
        { error: "Unauthorized" },
        { status: 401 }
      )
    }

    const { items, shipping } = await req.json()

    if (!items || items.length === 0) {
      return NextResponse.json(
        { error: "Keranjang kosong" },
        { status: 400 }
      )
    }

    // Calculate total
    const total = items.reduce(
      (sum: number, item: any) => sum + item.price * item.quantity,
      0
    )

    // Create order with items
    const order = await prisma.order.create({
      data: {
        userId: session.user.id,
        total,
        status: "PENDING",
        shippingName: shipping.name,
        shippingEmail: shipping.email,
        shippingPhone: shipping.phone || null,
        shippingAddress: shipping.address,
        shippingCity: shipping.city,
        shippingZip: shipping.zip,
        shippingCountry: shipping.country,
        shippingProvince: shipping.province || null,
        paymentMethod: shipping.paymentMethod || "bank_transfer",
        notes: shipping.notes || null,
        items: {
          create: items.map((item: any) => ({
            productId: item.productId,
            quantity: item.quantity,
            price: item.price,
          })),
        },
      },
      include: {
        items: {
          include: {
            product: true,
          },
        },
      },
    })

    // Update product stock
    for (const item of items) {
      await prisma.product.update({
        where: { id: item.productId },
        data: {
          stock: {
            decrement: item.quantity,
          },
        },
      })
    }

    return NextResponse.json({ order })
  } catch (error) {
    console.error("Order creation error:", error)
    return NextResponse.json(
      { error: "Terjadi kesalahan saat membuat pesanan" },
      { status: 500 }
    )
  }
}

export async function GET(req: NextRequest) {
  try {
    const session = await auth()

    if (!session || !session.user) {
      return NextResponse.json(
        { error: "Unauthorized" },
        { status: 401 }
      )
    }

    const orders = await prisma.order.findMany({
      where: {
        userId: session.user.id,
      },
      include: {
        items: {
          include: {
            product: true,
          },
        },
      },
      orderBy: {
        createdAt: "desc",
      },
    })

    return NextResponse.json({ orders })
  } catch (error) {
    console.error("Error fetching orders:", error)
    return NextResponse.json(
      { error: "Terjadi kesalahan saat mengambil data pesanan" },
      { status: 500 }
    )
  }
}

               --- End file: route.ts ---

       üìÅ products/
           üìÅ [slug]/
               üìÑ route.ts
                   --- Begin file: route.ts ---
import { NextResponse } from "next/server"
import { prisma } from "@/lib/prisma"

export async function GET(
  request: Request,
  { params }: { params: Promise<{ slug: string }> }
) {
  try {
    const { slug } = await params
    
    const product = await prisma.product.findUnique({
      where: {
        slug,
      },
      include: {
        category: true,
      },
    })

    if (!product) {
      return NextResponse.json(
        { error: "Produk tidak ditemukan" },
        { status: 404 }
      )
    }

    // Get related products
    const relatedProducts = await prisma.product.findMany({
      where: {
        categoryId: product.categoryId,
        id: { not: product.id },
      },
      take: 4,
    })

    // Convert Decimal to number for JSON serialization
    const serializedProduct = {
      ...product,
      price: parseFloat(product.price.toString()),
      discount: product.discount ? parseFloat(product.discount.toString()) : null,
      discountPrice: product.discountPrice ? parseFloat(product.discountPrice.toString()) : null,
      weight: product.weight ? parseFloat(product.weight.toString()) : null,
    }

    const serializedRelatedProducts = relatedProducts.map(p => ({
      ...p,
      price: parseFloat(p.price.toString()),
      discount: p.discount ? parseFloat(p.discount.toString()) : null,
      discountPrice: p.discountPrice ? parseFloat(p.discountPrice.toString()) : null,
      weight: p.weight ? parseFloat(p.weight.toString()) : null,
    }))

    return NextResponse.json({
      product: serializedProduct,
      relatedProducts: serializedRelatedProducts,
    })
  } catch (error) {
    console.error("Error fetching product:", error)
    return NextResponse.json(
      { error: "Terjadi kesalahan saat mengambil data produk" },
      { status: 500 }
    )
  }
}

                   --- End file: route.ts ---

           üìÑ route.ts
               --- Begin file: route.ts ---
import { NextResponse } from "next/server"
import { prisma } from "@/lib/prisma"

export async function GET(request: Request) {
  try {
    const { searchParams } = new URL(request.url)
    const category = searchParams.get("category")
    const search = searchParams.get("search")
    const page = parseInt(searchParams.get("page") || "1")
    const limit = parseInt(searchParams.get("limit") || "12")
    const skip = (page - 1) * limit

    const where: any = {}

    if (category) {
      where.category = {
        slug: category,
      }
    }

    if (search) {
      where.OR = [
        { name: { contains: search } },
        { description: { contains: search } },
      ]
    }

    const [products, total] = await Promise.all([
      prisma.product.findMany({
        where,
        include: {
          category: true,
        },
        skip,
        take: limit,
        orderBy: {
          createdAt: "desc",
        },
      }),
      prisma.product.count({ where }),
    ])

    // Convert Decimal to number for JSON serialization
    const serializedProducts = products.map(product => ({
      ...product,
      price: parseFloat(product.price.toString()),
      discount: product.discount ? parseFloat(product.discount.toString()) : null,
      discountPrice: product.discountPrice ? parseFloat(product.discountPrice.toString()) : null,
      weight: product.weight ? parseFloat(product.weight.toString()) : null,
    }))

    return NextResponse.json({
      products: serializedProducts,
      pagination: {
        page,
        limit,
        total,
        pages: Math.ceil(total / limit),
      },
    })
  } catch (error) {
    console.error("Error fetching products:", error)
    return NextResponse.json(
      { error: "Terjadi kesalahan saat mengambil data produk" },
      { status: 500 }
    )
  }
}

               --- End file: route.ts ---

   üìÅ auth/
       üìÅ login/
           üìÑ page.tsx
               --- Begin file: page.tsx ---
"use client"

import { useState } from "react"
import { signIn } from "next-auth/react"
import { useRouter } from "next/navigation"
import Link from "next/link"
import toast from "react-hot-toast"

export default function LoginPage() {
  const router = useRouter()
  const [loading, setLoading] = useState(false)
  const [formData, setFormData] = useState({
    email: "",
    password: "",
  })

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setLoading(true)

    try {
      const result = await signIn("credentials", {
        email: formData.email,
        password: formData.password,
        redirect: false,
      })

      if (result?.error) {
        toast.error(result.error)
      } else {
        toast.success("Login berhasil!")
        router.push("/")
        router.refresh()
      }
    } catch (error) {
      toast.error("Terjadi kesalahan saat login")
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center py-12 px-4 bg-gradient-to-br from-slate-50 via-white to-slate-100">
      <div className="max-w-md w-full">
        {/* Card */}
        <div className="bg-white rounded-3xl shadow-2xl overflow-hidden border border-slate-100">
          {/* Header */}
          <div className="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-8 py-10 text-white">
            <div className="flex items-center justify-center mb-4">
              <div className="bg-white text-slate-900 w-16 h-16 rounded-2xl flex items-center justify-center font-bold text-2xl shadow-lg">
                E
              </div>
            </div>
            <h2 className="text-3xl font-bold text-center mb-2">Selamat Datang</h2>
            <p className="text-center text-slate-300">Masuk ke akun EliteShop Anda</p>
          </div>

          {/* Form */}
          <div className="px-8 py-10">
            <form onSubmit={handleSubmit} className="space-y-6">
              <div>
                <label htmlFor="email" className="block text-sm font-bold text-slate-800 mb-2">
                  Alamat Email
                </label>
                <input
                  id="email"
                  type="email"
                  required
                  value={formData.email}
                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-transparent transition-all text-slate-800 placeholder:text-slate-400"
                  placeholder="nama@email.com"
                />
              </div>

              <div>
                <label htmlFor="password" className="block text-sm font-bold text-slate-800 mb-2">
                  Password
                </label>
                <input
                  id="password"
                  type="password"
                  required
                  value={formData.password}
                  onChange={(e) => setFormData({ ...formData, password: e.target.value })}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-transparent transition-all text-slate-800 placeholder:text-slate-400"
                  placeholder="Masukkan password Anda"
                />
              </div>

              <div className="flex items-center justify-between text-sm">
                <label className="flex items-center cursor-pointer">
                  <input type="checkbox" className="w-4 h-4 rounded border-slate-300 text-slate-800 focus:ring-slate-400 mr-2" />
                  <span className="text-slate-600">Ingat saya</span>
                </label>
                <Link href="/auth/forgot-password" className="text-slate-600 hover:text-slate-900 font-medium">
                  Lupa password?
                </Link>
              </div>

              <button
                type="submit"
                disabled={loading}
                className="w-full bg-slate-700 text-white py-4 rounded-lg font-bold text-lg hover:bg-slate-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {loading ? (
                  <span className="flex items-center justify-center gap-2">
                    <svg className="animate-spin h-5 w-5" viewBox="0 0 24 24">
                      <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
                      <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
                    </svg>
                    Memproses...
                  </span>
                ) : (
                  "Masuk"
                )}
              </button>
            </form>

            <div className="mt-8 text-center">
              <p className="text-slate-600">
                Belum punya akun?{" "}
                <Link href="/auth/register" className="text-slate-800 hover:text-slate-600 font-bold">
                  Daftar Sekarang
                </Link>
              </p>
            </div>
          </div>
        </div>

        {/* Additional Info */}
        <div className="mt-8 text-center">
          <p className="text-sm text-slate-500">
            Dengan masuk, Anda menyetujui{" "}
            <Link href="/terms" className="text-slate-700 hover:text-slate-900 font-medium">
              Syarat & Ketentuan
            </Link>{" "}
            dan{" "}
            <Link href="/privacy" className="text-slate-700 hover:text-slate-900 font-medium">
              Kebijakan Privasi
            </Link>
          </p>
        </div>
      </div>
    </div>
  )
}

               --- End file: page.tsx ---

       üìÅ register/
           üìÑ page.tsx
               --- Begin file: page.tsx ---
"use client"

import { useState } from "react"
import { useRouter } from "next/navigation"
import Link from "next/link"
import toast from "react-hot-toast"

export default function RegisterPage() {
  const router = useRouter()
  const [loading, setLoading] = useState(false)
  const [formData, setFormData] = useState({
    name: "",
    email: "",
    password: "",
    confirmPassword: "",
  })

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    
    if (formData.password !== formData.confirmPassword) {
      toast.error("Password tidak cocok")
      return
    }

    if (formData.password.length < 6) {
      toast.error("Password minimal 6 karakter")
      return
    }

    setLoading(true)

    try {
      const response = await fetch("/api/auth/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          name: formData.name,
          email: formData.email,
          password: formData.password,
        }),
      })

      const data = await response.json()

      if (!response.ok) {
        toast.error(data.error || "Terjadi kesalahan saat registrasi")
        return
      }

      toast.success(data.message)
      router.push("/auth/login")
    } catch (error) {
      toast.error("Terjadi kesalahan saat registrasi")
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center py-12 px-4 bg-gradient-to-br from-slate-50 via-white to-slate-100">
      <div className="max-w-md w-full">
        {/* Card */}
        <div className="bg-white rounded-3xl shadow-2xl overflow-hidden border border-slate-100">
          {/* Header */}
          <div className="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-8 py-10 text-white">
            <div className="flex items-center justify-center mb-4">
              <div className="bg-white text-slate-900 w-16 h-16 rounded-2xl flex items-center justify-center font-bold text-2xl shadow-lg">
                E
              </div>
            </div>
            <h2 className="text-3xl font-bold text-center mb-2">Buat Akun Baru</h2>
            <p className="text-center text-slate-300">Bergabung dengan EliteShop sekarang</p>
          </div>

          {/* Form */}
          <div className="px-8 py-10">
            <form onSubmit={handleSubmit} className="space-y-5">
              <div>
                <label htmlFor="name" className="block text-sm font-bold text-slate-800 mb-2">
                  Nama Lengkap
                </label>
                <input
                  id="name"
                  type="text"
                  required
                  value={formData.name}
                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-transparent transition-all text-slate-800 placeholder:text-slate-400"
                  placeholder="Masukkan nama lengkap"
                />
              </div>

              <div>
                <label htmlFor="email" className="block text-sm font-bold text-slate-800 mb-2">
                  Alamat Email
                </label>
                <input
                  id="email"
                  type="email"
                  required
                  value={formData.email}
                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-transparent transition-all text-slate-800 placeholder:text-slate-400"
                  placeholder="nama@email.com"
                />
              </div>

              <div>
                <label htmlFor="password" className="block text-sm font-bold text-slate-800 mb-2">
                  Password
                </label>
                <input
                  id="password"
                  type="password"
                  required
                  value={formData.password}
                  onChange={(e) => setFormData({ ...formData, password: e.target.value })}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-transparent transition-all text-slate-800 placeholder:text-slate-400"
                  placeholder="Minimal 6 karakter"
                />
                <p className="text-xs text-slate-500 mt-1.5">Minimal 6 karakter, kombinasi huruf dan angka</p>
              </div>

              <div>
                <label htmlFor="confirmPassword" className="block text-sm font-bold text-slate-800 mb-2">
                  Konfirmasi Password
                </label>
                <input
                  id="confirmPassword"
                  type="password"
                  required
                  value={formData.confirmPassword}
                  onChange={(e) => setFormData({ ...formData, confirmPassword: e.target.value })}
                  className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-transparent transition-all text-slate-800 placeholder:text-slate-400"
                  placeholder="Ulangi password Anda"
                />
              </div>

              <div className="flex items-start pt-2">
                <input 
                  type="checkbox" 
                  required
                  className="w-4 h-4 rounded border-slate-300 text-slate-800 focus:ring-slate-400 mt-1 mr-3" 
                />
                <label className="text-sm text-slate-600">
                  Saya menyetujui{" "}
                  <Link href="/terms" className="text-slate-800 hover:text-slate-600 font-medium">
                    Syarat & Ketentuan
                  </Link>{" "}
                  dan{" "}
                  <Link href="/privacy" className="text-slate-800 hover:text-slate-600 font-medium">
                    Kebijakan Privasi
                  </Link>
                </label>
              </div>

              <button
                type="submit"
                disabled={loading}
                className="w-full bg-slate-700 text-white py-4 rounded-lg font-bold text-lg hover:bg-slate-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed mt-6"
              >
                {loading ? (
                  <span className="flex items-center justify-center gap-2">
                    <svg className="animate-spin h-5 w-5" viewBox="0 0 24 24">
                      <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
                      <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
                    </svg>
                    Memproses...
                  </span>
                ) : (
                  "Daftar Sekarang"
                )}
              </button>
            </form>

            <div className="mt-8 text-center">
              <p className="text-slate-600">
                Sudah punya akun?{" "}
                <Link href="/auth/login" className="text-slate-800 hover:text-slate-600 font-bold">
                  Masuk di sini
                </Link>
              </p>
            </div>
          </div>
        </div>

        {/* Benefits */}
        <div className="mt-8 grid grid-cols-3 gap-4 text-center">
          <div className="bg-white/50 backdrop-blur-sm rounded-xl p-4 border border-slate-100">
            <div className="text-2xl mb-2 font-bold text-slate-800">50%</div>
            <p className="text-xs font-medium text-slate-700">Diskon Member</p>
          </div>
          <div className="bg-white/50 backdrop-blur-sm rounded-xl p-4 border border-slate-100">
            <div className="text-2xl mb-2 font-bold text-slate-800">Free</div>
            <p className="text-xs font-medium text-slate-700">Gratis Ongkir</p>
          </div>
          <div className="bg-white/50 backdrop-blur-sm rounded-xl p-4 border border-slate-100">
            <div className="text-2xl mb-2 font-bold text-slate-800">100%</div>
            <p className="text-xs font-medium text-slate-700">Original</p>
          </div>
        </div>
      </div>
    </div>
  )
}

               --- End file: page.tsx ---

       üìÅ verify/
           üìÑ page.tsx
               --- Begin file: page.tsx ---
"use client"

import { Suspense, useEffect, useState } from "react"
import { useRouter, useSearchParams } from "next/navigation"
import Link from "next/link"
import { CheckCircle, XCircle } from "lucide-react"

function VerifyContent() {
  const router = useRouter()
  const searchParams = useSearchParams()
  const token = searchParams.get("token")
  const [status, setStatus] = useState<"loading" | "success" | "error">("loading")
  const [message, setMessage] = useState("")

  useEffect(() => {
    if (!token) {
      setStatus("error")
      setMessage("Token tidak valid")
      return
    }

    const verifyEmail = async () => {
      try {
        const response = await fetch(`/api/auth/verify-email?token=${token}`)
        const data = await response.json()

        if (response.ok) {
          setStatus("success")
          setMessage(data.message)
        } else {
          setStatus("error")
          setMessage(data.error)
        }
      } catch (error) {
        setStatus("error")
        setMessage("Terjadi kesalahan saat verifikasi email")
      }
    }

    verifyEmail()
  }, [token])

  return (
    <div className="min-h-screen flex items-center justify-center py-12 px-4">
      <div className="max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center">
        {status === "loading" && (
          <>
            <div className="animate-spin rounded-full h-16 w-16 border-b-2 border-slate-600 mx-auto mb-4"></div>
            <h2 className="text-2xl font-bold mb-4">Memverifikasi Email...</h2>
            <p className="text-slate-600">Mohon tunggu sebentar</p>
          </>
        )}

        {status === "success" && (
          <>
            <CheckCircle className="text-green-500 mx-auto mb-4" size={64} />
            <h2 className="text-2xl font-bold mb-4 text-green-600">Berhasil!</h2>
            <p className="text-slate-600 mb-6">{message}</p>
            <Link
              href="/auth/login"
              className="bg-slate-700 text-white px-6 py-3 rounded-lg font-semibold hover:bg-slate-600 transition inline-block"
            >
              Login Sekarang
            </Link>
          </>
        )}

        {status === "error" && (
          <>
            <XCircle className="text-red-500 mx-auto mb-4" size={64} />
            <h2 className="text-2xl font-bold mb-4 text-red-600">Gagal!</h2>
            <p className="text-slate-600 mb-6">{message}</p>
            <Link
              href="/auth/register"
              className="bg-slate-700 text-white px-6 py-3 rounded-lg font-semibold hover:bg-slate-600 transition inline-block"
            >
              Daftar Ulang
            </Link>
          </>
        )}
      </div>
    </div>
  )
}

export default function VerifyPage() {
  return (
    <Suspense fallback={
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-16 w-16 border-b-2 border-slate-600"></div>
      </div>
    }>
      <VerifyContent />
    </Suspense>
  )
}

               --- End file: page.tsx ---

   üìÑ globals.css
       --- Begin file: globals.css ---
@import "tailwindcss";

@theme {
  --color-primary: #05347e;
  --color-primary-dark: #032252;
  --color-primary-light: #0746a8;
  --color-primary-lighter: #e8eef7;
  
  --color-accent: #db0705;
  --color-accent-dark: #a60504;
  --color-accent-light: #ff0907;
  --color-accent-lighter: #fde8e8;
  
  --color-gold: #c49c0f;
  --color-gold-dark: #9a7b0c;
  --color-gold-light: #f0c514;
  --color-gold-lighter: #fdf6e3;
}

:root {
  --primary: #05347e;
  --primary-dark: #032252;
  --primary-light: #0746a8;
  --primary-lighter: #e8eef7;
  
  --accent: #db0705;
  --accent-dark: #a60504;
  --accent-light: #ff0907;
  --accent-lighter: #fde8e8;
  
  --gold: #c49c0f;
  --gold-dark: #9a7b0c;
  --gold-light: #f0c514;
  --gold-lighter: #fdf6e3;
}

body {
  font-family: var(--font-inter), -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0f172a;
    --foreground: #f8fafc;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', 'Roboto', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Smooth scroll */
html {
  scroll-behavior: smooth;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

       --- End file: globals.css ---

   üìÑ layout.tsx
       --- Begin file: layout.tsx ---
import type { Metadata } from "next";
import { Inter } from "next/font/google";
// @ts-ignore: side-effect import of global CSS without type declarations
import "./globals.css";
import { Toaster } from "react-hot-toast";
import Providers from "@/components/Providers";
import WhatsAppButton from "@/components/WhatsAppButton";

const inter = Inter({
  subsets: ["latin"],
  variable: "--font-inter",
});

export const metadata: Metadata = {
  title: "Golden Brown Pasta - Produk Pasta Berkualitas Sejak 1980",
  description: "Golden Brown Pasta menyediakan produk pasta dan bahan makanan berkualitas dengan sertifikasi Halal MUI dan BPOM. Berdiri sejak 1980, kami berkomitmen memberikan produk terbaik untuk konsumen Indonesia.",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="id">
      <body
        className={`${inter.variable} antialiased`}
      >
        <Providers>
          {children}
          <Toaster position="top-right" />
          <WhatsAppButton />
        </Providers>
      </body>
    </html>
  );
}

       --- End file: layout.tsx ---


== components/
   üìÑ Footer.tsx
       --- Begin file: Footer.tsx ---
import Link from "next/link"
import { Facebook, Twitter, Instagram, Mail, Phone, MapPin, CheckCircle2 } from "lucide-react"

export default function Footer() {
  return (
    <footer className="bg-[#032252] text-gray-300 border-t border-[#05347e]">
      <div className="container mx-auto px-4 lg:px-8 py-16">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12">
          {/* Company Info */}
          <div className="space-y-4">
            <div className="flex items-center space-x-2">
              <div className="bg-[#c49c0f] text-[#05347e] w-10 h-10 rounded-lg flex items-center justify-center font-bold text-lg shadow-md">
                GB
              </div>
              <span className="text-xl font-bold text-white">Golden Brown Pasta</span>
            </div>
            <p className="text-sm leading-relaxed text-gray-400">
              Produsen pasta dan bahan makanan berkualitas sejak 1980. Bersertifikat Halal MUI dan BPOM 
              dengan standar Food Grade untuk mendukung bisnis UMKM Indonesia.
            </p>
            <div className="flex space-x-3 pt-2">
              <a href="#" className="bg-[#05347e] hover:bg-[#db0705] p-3 rounded-lg transition-all group shadow-md">
                <Facebook size={20} className="text-white" />
              </a>
              <a href="#" className="bg-[#05347e] hover:bg-[#db0705] p-3 rounded-lg transition-all group shadow-md">
                <Twitter size={20} className="text-white" />
              </a>
              <a href="#" className="bg-[#05347e] hover:bg-[#db0705] p-3 rounded-lg transition-all group shadow-md">
                <Instagram size={20} className="text-white" />
              </a>
            </div>
          </div>

          {/* Quick Links */}
          <div>
            <h4 className="text-white font-bold text-lg mb-6">Navigasi Cepat</h4>
            <ul className="space-y-3">
              <li>
                <Link href="/products" className="text-gray-400 hover:text-[#c49c0f] transition-colors flex items-center group">
                  <span className="mr-2 group-hover:translate-x-1 transition-transform">‚Üí</span>
                  Semua Produk
                </Link>
              </li>
              <li>
                <Link href="/#tentang-kami" className="text-gray-400 hover:text-[#c49c0f] transition-colors flex items-center group">
                  <span className="mr-2 group-hover:translate-x-1 transition-transform">‚Üí</span>
                  Tentang Kami
                </Link>
              </li>
              <li>
                <Link href="/contact" className="text-gray-400 hover:text-[#c49c0f] transition-colors flex items-center group">
                  <span className="mr-2 group-hover:translate-x-1 transition-transform">‚Üí</span>
                  Hubungi Kami
                </Link>
              </li>
              <li>
                <Link href="/auth/register" className="text-gray-400 hover:text-[#c49c0f] transition-colors flex items-center group">
                  <span className="mr-2 group-hover:translate-x-1 transition-transform">‚Üí</span>
                  Daftar Mitra
                </Link>
              </li>
            </ul>
          </div>

          {/* Customer Service */}
          <div>
            <h4 className="text-white font-bold text-lg mb-6">Layanan Pelanggan</h4>
            <ul className="space-y-3">
              <li>
                <Link href="/orders" className="text-gray-400 hover:text-[#c49c0f] transition-colors flex items-center group">
                  <span className="mr-2 group-hover:translate-x-1 transition-transform">‚Üí</span>
                  Lacak Pesanan
                </Link>
              </li>
              <li>
                <Link href="/cart" className="text-gray-400 hover:text-[#c49c0f] transition-colors flex items-center group">
                  <span className="mr-2 group-hover:translate-x-1 transition-transform">‚Üí</span>
                  Keranjang Belanja
                </Link>
              </li>
              <li>
                <Link href="/shipping" className="text-gray-400 hover:text-[#c49c0f] transition-colors flex items-center group">
                  <span className="mr-2 group-hover:translate-x-1 transition-transform">‚Üí</span>
                  Info Pengiriman
                </Link>
              </li>
              <li>
                <Link href="/terms" className="text-gray-400 hover:text-[#c49c0f] transition-colors flex items-center group">
                  <span className="mr-2 group-hover:translate-x-1 transition-transform">‚Üí</span>
                  Syarat & Ketentuan
                </Link>
              </li>
            </ul>
          </div>

          {/* Contact */}
          <div>
            <h4 className="text-white font-bold text-lg mb-6">Kontak Kami</h4>
            <ul className="space-y-4">
              <li className="flex items-start space-x-3 group">
                <div className="bg-[#05347e] p-2 rounded-lg mt-0.5 group-hover:bg-[#db0705] transition-colors shadow-md">
                  <MapPin size={18} className="text-white" />
                </div>
                <div>
                  <div className="text-xs text-gray-500 mb-1">Alamat Pabrik</div>
                  <span className="text-sm text-gray-300 leading-relaxed">
                    Jl. Raya Industri No. 123<br/>Jakarta, Indonesia
                  </span>
                </div>
              </li>
              <li className="flex items-start space-x-3 group">
                <div className="bg-[#05347e] p-2 rounded-lg group-hover:bg-[#db0705] transition-colors shadow-md">
                  <Phone size={18} className="text-white" />
                </div>
                <div>
                  <div className="text-xs text-gray-500 mb-1">Telepon</div>
                  <span className="text-sm text-gray-300">+62 21-xxxx-xxxx</span>
                </div>
              </li>
              <li className="flex items-start space-x-3 group">
                <div className="bg-[#05347e] p-2 rounded-lg group-hover:bg-[#db0705] transition-colors shadow-md">
                  <Mail size={18} className="text-white" />
                </div>
                <div>
                  <div className="text-xs text-gray-500 mb-1">Email</div>
                  <span className="text-sm text-gray-300">info@goldenbrownpasta.com</span>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <div className="border-t border-[#05347e] mt-12 pt-8">
          <div className="flex flex-col md:flex-row justify-between items-center gap-4">
            <p className="text-sm text-gray-400">
              &copy; {new Date().getFullYear()} <span className="text-[#c49c0f] font-semibold">Golden Brown Pasta</span>. Sejak 1980. Semua hak cipta dilindungi.
            </p>
            <div className="flex items-center gap-6 text-sm text-gray-400">
              <Link href="/privacy" className="hover:text-[#c49c0f] transition-colors">Kebijakan Privasi</Link>
              <span className="text-gray-700">‚Ä¢</span>
              <Link href="/terms" className="hover:text-[#c49c0f] transition-colors">Syarat & Ketentuan</Link>
              <span className="text-gray-700">‚Ä¢</span>
              <div className="flex items-center gap-2">
                <CheckCircle2 size={16} className="text-green-500" />
                <span className="text-green-400 font-semibold">Halal MUI & BPOM</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
  )
}

       --- End file: Footer.tsx ---

   üìÑ Header.tsx
       --- Begin file: Header.tsx ---
"use client"

import Link from "next/link"
import { ShoppingCart, User, Search, Menu } from "lucide-react"
import { useSession, signOut } from "next-auth/react"
import { useCartStore } from "@/store/cart"

export default function Header() {
  const { data: session } = useSession()
  const cartItems = useCartStore((state) => state.items)
  const cartCount = cartItems.reduce((sum, item) => sum + item.quantity, 0)

  return (
    <header className="bg-[#05347e] border-b border-[#032252] sticky top-0 z-50 shadow-lg backdrop-blur-sm bg-[#05347e]/95">
      <div className="container mx-auto px-4 lg:px-8">
        <div className="flex items-center justify-between h-20">
          {/* Logo */}
          <Link href="/" className="flex items-center space-x-2 group">
            <div className="bg-[#c49c0f] text-[#05347e] w-10 h-10 rounded-lg flex items-center justify-center font-bold text-lg shadow-md">
              GB
            </div>
            <span className="text-xl lg:text-2xl font-bold text-white">
              Golden Brown Pasta
            </span>
          </Link>

          
          {/* Navigation */}
          <nav className="flex items-center space-x-2 lg:space-x-4">
            {session?.user?.role === "ADMIN" && (
              <Link
                href="/admin"
                className="px-4 py-2 text-white hover:text-[#c49c0f] font-medium transition-colors rounded-lg hover:bg-white/10"
              >
                Admin
              </Link>
            )}
            
            <Link href="/products" className="px-4 py-2 text-white hover:text-[#c49c0f] font-medium transition-colors rounded-lg hover:bg-white/10">
              Produk
            </Link>

            <Link href="/cart" className="relative p-2 text-white hover:text-[#c49c0f] transition-colors rounded-lg hover:bg-white/10">
              <ShoppingCart size={24} />
              {cartCount > 0 && (
                <span className="absolute -top-1 -right-1 bg-[#db0705] text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-md">
                  {cartCount}
                </span>
              )}
            </Link>

            {session ? (
              <div className="relative group/profile">
                <button className="flex items-center space-x-2 px-4 py-2 text-white hover:text-[#c49c0f] font-medium transition-colors rounded-lg hover:bg-white/10">
                  <div className="w-8 h-8 bg-[#c49c0f] rounded-full flex items-center justify-center text-[#05347e] font-semibold text-sm shadow-md">
                    {session.user.name?.[0]?.toUpperCase() || 'U'}
                  </div>
                  <span className="hidden lg:inline text-white">{session.user.name}</span>
                </button>
                <div className="absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-200 py-2 opacity-0 invisible group-hover/profile:opacity-100 group-hover/profile:visible transition-all duration-200">
                  <div className="px-4 py-3 border-b border-gray-100">
                    <p className="text-sm font-semibold text-[#05347e]">{session.user.name}</p>
                    <p className="text-xs text-gray-500 truncate">{session.user.email}</p>
                  </div>
                  <Link
                    href="/orders"
                    className="block px-4 py-2.5 text-[#05347e] hover:bg-gray-50 hover:text-[#db0705] transition-colors"
                  >
                    Pesanan Saya
                  </Link>
                  <Link
                    href="/profile"
                    className="block px-4 py-2.5 text-[#05347e] hover:bg-gray-50 hover:text-[#db0705] transition-colors"
                  >
                    Profile
                  </Link>
                  <hr className="my-2 border-gray-100" />
                  <button
                    onClick={() => signOut()}
                    className="block w-full text-left px-4 py-2.5 text-[#db0705] hover:bg-gray-100 transition-colors font-medium"
                  >
                    Logout
                  </button>
                </div>
              </div>
            ) : (
              <Link
                href="/auth/login"
                className="bg-[#db0705] text-white px-6 py-2.5 rounded-lg hover:bg-[#a60504] transition-colors shadow-md"
              >
                Login
              </Link>
            )}

            <button className="md:hidden p-2 text-white hover:bg-white/10 rounded-lg">
              <Menu size={24} />
            </button>
          </nav>
        </div>
      </div>
    </header>
  )
}

       --- End file: Header.tsx ---

   üìÑ ProductCard.tsx
       --- Begin file: ProductCard.tsx ---
import Image from "next/image"
import Link from "next/link"
import { ShoppingCart, Percent } from "lucide-react"

interface ProductCardProps {
  id: string
  name: string
  price: number
  discount?: number
  discountPrice?: number
  image: string
  slug: string
}

export default function ProductCard({ id, name, price, discount, discountPrice, image, slug }: ProductCardProps) {
  const hasDiscount = discount && discount > 0
  const displayPrice = hasDiscount ? discountPrice : price

  return (
    <Link href={`/products/${slug}`} className="block">
      <div className="group bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-2xl transition-all duration-300 border border-gray-100 hover:border-[#05347e] hover:-translate-y-2 cursor-pointer">
        <div className="relative h-56 overflow-hidden bg-gray-50">
          <Image
            src={image || "/placeholder-product.jpg"}
            alt={name}
            fill
            className="object-contain p-4 group-hover:scale-110 transition duration-500"
          />
          {hasDiscount && (
            <div className="absolute top-3 right-3 bg-[#db0705] text-white px-3 py-1.5 rounded-full text-xs font-bold shadow-md flex items-center gap-1">
              <Percent size={12} />
              -{discount}%
            </div>
          )}
        </div>
        <div className="p-4">
          <h3 className="font-semibold text-sm mb-2 line-clamp-2 text-[#05347e] group-hover:text-[#db0705] min-h-[2rem] transition-colors">
            {name}
          </h3>
          <div className="flex items-end justify-between">
            <div>
              <div className="text-xs text-gray-600 mb-1">Harga</div>
              {hasDiscount ? (
                <>
                  <div className="flex items-center gap-2 mb-1">
                    <span className="text-lg font-bold text-[#db0705]">
                      Rp {displayPrice?.toLocaleString("id-ID")}
                    </span>
                  </div>
                  <div className="text-xs text-gray-500 line-through">
                    Rp {price.toLocaleString("id-ID")}
                  </div>
                </>
              ) : (
                <span className="text-lg font-bold text-[#05347e]">
                  Rp {price.toLocaleString("id-ID")}
                </span>
              )}
            </div>
            <div className="bg-[#05347e] group-hover:bg-[#db0705] text-white p-2.5 rounded-lg transition-all">
              <ShoppingCart size={18} />
            </div>
          </div>
        </div>
      </div>
    </Link>
  )
}

       --- End file: ProductCard.tsx ---

   üìÑ PromoBar.tsx
       --- Begin file: PromoBar.tsx ---
"use client"

import { X, Sparkles } from "lucide-react"
import { useState } from "react"

export default function PromoBar() {
  const [isVisible, setIsVisible] = useState(true)

  if (!isVisible) return null

  return (
    <div className="bg-gradient-to-r from-[#db0705] via-[#ff0805] to-[#db0705] text-white py-3 px-4 sticky top-0 z-40 shadow-lg">
      <div className="container mx-auto flex items-center justify-between gap-4">
        <div className="flex items-center gap-2 flex-1 justify-center text-sm md:text-base">
          <Sparkles size={20} className="text-[#c49c0f] animate-pulse" />
          <span className="font-bold">
            PROMO WEBSITE EKSKLUSIF! Diskon 30% + Gratis Ongkir untuk Member Baru!
          </span>
          <Sparkles size={20} className="text-[#c49c0f] animate-pulse" />
        </div>
        <button
          onClick={() => setIsVisible(false)}
          className="hover:bg-white/20 rounded-full p-1 transition-all flex-shrink-0"
          aria-label="Tutup promo banner"
        >
          <X size={20} />
        </button>
      </div>
    </div>
  )
}

       --- End file: PromoBar.tsx ---

   üìÑ Providers.tsx
       --- Begin file: Providers.tsx ---
"use client"

import { SessionProvider } from "next-auth/react"

export default function Providers({ children }: { children: React.ReactNode }) {
  return <SessionProvider>{children}</SessionProvider>
}

       --- End file: Providers.tsx ---

   üìÑ WhatsAppButton.tsx
       --- Begin file: WhatsAppButton.tsx ---
"use client"

import { MessageCircle } from "lucide-react"

export default function WhatsAppButton() {
  const phoneNumber = "6281234567890" // Nomor WhatsApp Golden Brown Pasta
  const message = encodeURIComponent("Halo Golden Brown Pasta! Saya ingin bertanya tentang produk Anda.")

  return (
    <a
      href={`https://wa.me/${phoneNumber}?text=${message}`}
      target="_blank"
      rel="noopener noreferrer"
      className="fixed bottom-6 right-6 z-50 bg-[#25D366] hover:bg-[#1fb855] text-white p-4 rounded-full shadow-2xl transition-all transform hover:scale-110 flex items-center gap-2 group"
      aria-label="Chat via WhatsApp"
    >
      <MessageCircle size={28} className="group-hover:animate-pulse" />
      <span className="hidden md:inline-block font-semibold pr-2">
        Chat Sekarang
      </span>
    </a>
  )
}

       --- End file: WhatsAppButton.tsx ---

   üìÅ admin/
       üìÑ AdminHeader.tsx
           --- Begin file: AdminHeader.tsx ---
"use client"

import { Bell, Search, Menu, User } from "lucide-react"
import { useSession } from "next-auth/react"
import Image from "next/image"

interface AdminHeaderProps {
  onToggleSidebar?: () => void
}

export default function AdminHeader({ onToggleSidebar }: AdminHeaderProps) {
  const { data: session } = useSession()

  return (
    <header className="bg-white border-b border-slate-200 h-16 flex items-center justify-between px-6 sticky top-0 z-40 shadow-sm">
      {/* Left Side */}
      <div className="flex items-center gap-4">
        <button
          onClick={onToggleSidebar}
          className="lg:hidden p-2 hover:bg-slate-100 rounded-lg transition-colors"
        >
          <Menu className="w-5 h-5 text-slate-600" />
        </button>
        
        {/* Search */}
        <div className="hidden md:flex items-center gap-2 bg-slate-50 px-4 py-2 rounded-xl border border-slate-200 w-80">
          <Search className="w-4 h-4 text-slate-400" />
          <input
            type="text"
            placeholder="Cari produk, pesanan, pelanggan..."
            className="bg-transparent outline-none text-sm flex-1 text-slate-600 placeholder:text-slate-400"
          />
        </div>
      </div>

      {/* Right Side */}
      <div className="flex items-center gap-4">
        {/* Notification Bell */}
        <button className="relative p-2 hover:bg-slate-100 rounded-lg transition-colors">
          <Bell className="w-5 h-5 text-slate-600" />
          <span className="absolute top-1 right-1 w-2 h-2 bg-slate-700 rounded-full"></span>
        </button>

        {/* User Profile */}
        {/* User Profile */}
        <div className="flex items-center gap-3">
          <p className="text-sm font-semibold text-slate-700 hidden md:block">
            {session?.user?.name}
            <p className="text-xs text-slate-500">{session?.user?.email}</p>
          </p>
          <div className="w-10 h-10 bg-slate-700 rounded-full flex items-center justify-center text-white font-bold">
            {session?.user?.name?.[0]?.toUpperCase()}
          </div>
        </div>
      </div>
    </header>
  )
}

           --- End file: AdminHeader.tsx ---

       üìÑ AdminSidebar.tsx
           --- Begin file: AdminSidebar.tsx ---
"use client"

import Link from "next/link"
import { usePathname } from "next/navigation"
import { 
  LayoutDashboard, 
  Package, 
  ShoppingCart, 
  FolderTree, 
  CreditCard, 
  Users, 
  Settings,
  LogOut,
  Store
} from "lucide-react"
import { signOut } from "next-auth/react"

const menuItems = [
  { icon: LayoutDashboard, label: "Dashboard", href: "/admin" },
  { icon: Package, label: "Produk", href: "/admin/products" },
  { icon: ShoppingCart, label: "Pesanan", href: "/admin/orders" },
  { icon: FolderTree, label: "Kategori", href: "/admin/categories" },
  { icon: CreditCard, label: "Pembayaran", href: "/admin/payments" },
  { icon: Users, label: "Pengguna", href: "/admin/users" },
  { icon: Settings, label: "Pengaturan", href: "/admin/settings" },
]

export default function AdminSidebar() {
  const pathname = usePathname()

  return (
    <aside className="w-64 bg-slate-800 text-white flex flex-col h-screen fixed left-0 top-0 border-r border-slate-700">
      {/* Logo */}
      <div className="p-6 border-b border-slate-700">
        <Link href="/admin" className="flex items-center gap-3 group">
          <div className="w-10 h-10 bg-slate-700 rounded-lg flex items-center justify-center">
            <Store className="w-6 h-6" />
          </div>
          <div>
            <h1 className="text-xl font-bold">Admin Panel</h1>
            <p className="text-xs text-slate-400">E-Shop Management</p>
          </div>
        </Link>
      </div>

      {/* Menu Items */}
      <nav className="flex-1 py-6 px-4 overflow-y-auto">
        <ul className="space-y-2">
          {menuItems.map((item) => {
            const Icon = item.icon
            const isActive = pathname === item.href
            
            return (
              <li key={item.href}>
                <Link
                  href={item.href}
                  className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${
                    isActive
                      ? "bg-slate-700 text-white"
                      : "text-slate-300 hover:bg-slate-700/50 hover:text-white"
                  }`}
                >
                  <Icon className={`w-5 h-5 ${isActive ? "animate-pulse" : "group-hover:scale-110 transition-transform"}`} />
                  <span className="font-medium">{item.label}</span>
                </Link>
              </li>
            )
          })}
        </ul>
      </nav>

      {/* Bottom Actions */}
      <div className="p-4 border-t border-slate-700 space-y-2">
        <Link
          href="/"
          className="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-700 hover:text-white transition-all"
        >
          <Store className="w-5 h-5" />
          <span className="font-medium">Lihat Toko</span>
        </Link>
        <button
          onClick={() => signOut()}
          className="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-700 hover:text-white transition-all"
        >
          <LogOut className="w-5 h-5" />
          <span className="font-medium">Keluar</span>
        </button>
      </div>
    </aside>
  )
}

           --- End file: AdminSidebar.tsx ---

       üìÑ DataTable.tsx
           --- Begin file: DataTable.tsx ---
import { ReactNode } from "react"
import { Search } from "lucide-react"
import { cn } from "@/lib/utils"

interface DataTableProps<T> {
  data: T[]
  columns: {
    key: string
    label: string
    render?: (item: T) => ReactNode
  }[]
  searchable?: boolean
  searchPlaceholder?: string
  onSearch?: (query: string) => void
  className?: string
}

export default function DataTable<T extends Record<string, any>>({
  data,
  columns,
  searchable = false,
  searchPlaceholder = "Cari...",
  onSearch,
  className
}: DataTableProps<T>) {
  return (
    <div className={cn("bg-white rounded-lg border border-slate-200", className)}>
      {searchable && (
        <div className="p-4 border-b border-slate-200">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" size={20} />
            <input
              type="text"
              placeholder={searchPlaceholder}
              onChange={(e) => onSearch?.(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-300"
            />
          </div>
        </div>
      )}
      <div className="overflow-x-auto">
        <table className="w-full">
          <thead className="bg-slate-50 border-b border-slate-200">
            <tr>
              {columns.map((column) => (
                <th
                  key={column.key}
                  className="px-6 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider"
                >
                  {column.label}
                </th>
              ))}
            </tr>
          </thead>
          <tbody className="divide-y divide-slate-200">
            {data.length === 0 ? (
              <tr>
                <td
                  colSpan={columns.length}
                  className="px-6 py-12 text-center text-slate-500"
                >
                  Tidak ada data
                </td>
              </tr>
            ) : (
              data.map((item, index) => (
                <tr key={index} className="hover:bg-slate-50">
                  {columns.map((column) => (
                    <td key={column.key} className="px-6 py-4 text-sm text-slate-900">
                      {column.render ? column.render(item) : item[column.key]}
                    </td>
                  ))}
                </tr>
              ))
            )}
          </tbody>
        </table>
      </div>
    </div>
  )
}

           --- End file: DataTable.tsx ---

       üìÑ EmptyState.tsx
           --- Begin file: EmptyState.tsx ---
import { ReactNode } from "react"
import { cn } from "@/lib/utils"

interface EmptyStateProps {
  icon: ReactNode
  title: string
  description: string
  action?: ReactNode
  className?: string
}

export default function EmptyState({ icon, title, description, action, className }: EmptyStateProps) {
  return (
    <div className={cn("text-center py-12", className)}>
      <div className="inline-flex items-center justify-center w-16 h-16 bg-slate-100 rounded-full text-slate-400 mb-4">
        {icon}
      </div>
      <h3 className="text-lg font-semibold text-slate-900 mb-2">{title}</h3>
      <p className="text-slate-600 mb-6 max-w-md mx-auto">{description}</p>
      {action && action}
    </div>
  )
}

           --- End file: EmptyState.tsx ---

       üìÑ Modal.tsx
           --- Begin file: Modal.tsx ---
import { ReactNode } from "react"
import { X } from "lucide-react"
import { cn } from "@/lib/utils"

interface ModalProps {
  isOpen: boolean
  onClose: () => void
  title: string
  children: ReactNode
  footer?: ReactNode
  size?: "sm" | "md" | "lg" | "xl"
}

export default function Modal({ isOpen, onClose, title, children, footer, size = "md" }: ModalProps) {
  if (!isOpen) return null

  const sizes = {
    sm: "max-w-md",
    md: "max-w-lg",
    lg: "max-w-2xl",
    xl: "max-w-4xl",
  }

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto">
      <div className="flex min-h-screen items-center justify-center p-4">
        {/* Backdrop */}
        <div
          className="fixed inset-0 bg-black bg-opacity-50 transition-opacity"
          onClick={onClose}
        />

        {/* Modal */}
        <div className={cn("relative bg-white rounded-lg shadow-xl w-full", sizes[size])}>
          {/* Header */}
          <div className="flex items-center justify-between p-6 border-b border-slate-200">
            <h3 className="text-xl font-bold text-slate-900">{title}</h3>
            <button
              onClick={onClose}
              className="text-slate-400 hover:text-slate-600 transition-colors"
            >
              <X size={24} />
            </button>
          </div>

          {/* Content */}
          <div className="p-6">{children}</div>

          {/* Footer */}
          {footer && (
            <div className="flex items-center justify-end gap-3 p-6 border-t border-slate-200">
              {footer}
            </div>
          )}
        </div>
      </div>
    </div>
  )
}

           --- End file: Modal.tsx ---

       üìÑ MultipleImageUpload.tsx
           --- Begin file: MultipleImageUpload.tsx ---
"use client"

import { useState, useRef } from "react"
import { Upload, X, Image as ImageIcon } from "lucide-react"
import Image from "next/image"
import { cn } from "@/lib/utils"

interface MultipleImageUploadProps {
  images: string[]
  onChange: (images: string[]) => void
  maxImages?: number
  className?: string
}

export default function MultipleImageUpload({
  images,
  onChange,
  maxImages = 5,
  className
}: MultipleImageUploadProps) {
  const [uploading, setUploading] = useState(false)
  const [dragActive, setDragActive] = useState(false)
  const fileInputRef = useRef<HTMLInputElement>(null)

  const handleDrag = (e: React.DragEvent) => {
    e.preventDefault()
    e.stopPropagation()
    if (e.type === "dragenter" || e.type === "dragover") {
      setDragActive(true)
    } else if (e.type === "dragleave") {
      setDragActive(false)
    }
  }

  const handleDrop = async (e: React.DragEvent) => {
    e.preventDefault()
    e.stopPropagation()
    setDragActive(false)

    const files = Array.from(e.dataTransfer.files).filter(file =>
      file.type.startsWith("image/")
    )
    
    if (files.length > 0) {
      await uploadFiles(files)
    }
  }

  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const files = e.target.files
    if (files && files.length > 0) {
      await uploadFiles(Array.from(files))
    }
  }

  const uploadFiles = async (files: File[]) => {
    if (images.length + files.length > maxImages) {
      alert(`Maksimal ${maxImages} gambar`)
      return
    }

    setUploading(true)
    try {
      // Upload ke Cloudinary atau storage lain
      // Untuk demo, kita convert ke base64
      const uploadedUrls = await Promise.all(
        files.map(file => {
          return new Promise<string>((resolve) => {
            const reader = new FileReader()
            reader.onloadend = () => {
              resolve(reader.result as string)
            }
            reader.readAsDataURL(file)
          })
        })
      )

      onChange([...images, ...uploadedUrls])
    } catch (error) {
      console.error("Upload error:", error)
      alert("Gagal upload gambar")
    } finally {
      setUploading(false)
    }
  }

  const removeImage = (index: number) => {
    onChange(images.filter((_, i) => i !== index))
  }

  const setAsPrimary = (index: number) => {
    const newImages = [...images]
    const [primaryImage] = newImages.splice(index, 1)
    onChange([primaryImage, ...newImages])
  }

  return (
    <div className={cn("space-y-4", className)}>
      {/* Upload Area */}
      <div
        className={cn(
          "border-2 border-dashed rounded-lg p-8 text-center transition-colors cursor-pointer",
          dragActive
            ? "border-slate-700 bg-slate-50"
            : "border-slate-300 hover:border-slate-400",
          uploading && "opacity-50 cursor-not-allowed"
        )}
        onDragEnter={handleDrag}
        onDragLeave={handleDrag}
        onDragOver={handleDrag}
        onDrop={handleDrop}
        onClick={() => !uploading && fileInputRef.current?.click()}
      >
        <input
          ref={fileInputRef}
          type="file"
          multiple
          accept="image/*"
          onChange={handleFileChange}
          className="hidden"
          disabled={uploading || images.length >= maxImages}
        />

        <Upload className="w-12 h-12 text-slate-400 mx-auto mb-4" />
        <p className="text-slate-700 font-medium mb-1">
          {uploading ? "Uploading..." : "Upload Gambar Produk"}
        </p>
        <p className="text-sm text-slate-500">
          Drag & drop atau klik untuk pilih gambar
        </p>
        <p className="text-xs text-slate-400 mt-2">
          Maksimal {maxImages} gambar ({images.length}/{maxImages})
        </p>
      </div>

      {/* Image Preview Grid */}
      {images.length > 0 && (
        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
          {images.map((url, index) => (
            <div
              key={index}
              className="relative group aspect-square rounded-lg overflow-hidden border-2 border-slate-200 hover:border-slate-400 transition-colors"
            >
              <Image
                src={url}
                alt={`Product ${index + 1}`}
                fill
                className="object-cover"
              />
              
              {/* Primary Badge */}
              {index === 0 && (
                <div className="absolute top-2 left-2 bg-slate-700 text-white text-xs px-2 py-1 rounded">
                  Utama
                </div>
              )}

              {/* Actions */}
              <div className="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100">
                {index !== 0 && (
                  <button
                    onClick={(e) => {
                      e.stopPropagation()
                      setAsPrimary(index)
                    }}
                    className="bg-white text-slate-700 px-3 py-1.5 rounded text-xs font-medium hover:bg-slate-100"
                  >
                    Jadikan Utama
                  </button>
                )}
                <button
                  onClick={(e) => {
                    e.stopPropagation()
                    removeImage(index)
                  }}
                  className="bg-red-600 text-white p-2 rounded-full hover:bg-red-700"
                >
                  <X size={16} />
                </button>
              </div>
            </div>
          ))}
        </div>
      )}

      {images.length === 0 && (
        <div className="text-center py-8 text-slate-400">
          <ImageIcon className="w-16 h-16 mx-auto mb-3 opacity-50" />
          <p className="text-sm">Belum ada gambar</p>
        </div>
      )}
    </div>
  )
}

           --- End file: MultipleImageUpload.tsx ---

       üìÑ StatsCard.tsx
           --- Begin file: StatsCard.tsx ---
import { ReactNode } from "react"
import { cn } from "@/lib/utils"

interface StatsCardProps {
  title: string
  value: string | number
  icon: ReactNode
  trend?: {
    value: number
    isPositive: boolean
  }
  className?: string
}

export default function StatsCard({ title, value, icon, trend, className }: StatsCardProps) {
  return (
    <div className={cn("bg-white rounded-lg border border-slate-200 p-6", className)}>
      <div className="flex items-center justify-between">
        <div className="flex-1">
          <p className="text-sm text-slate-600 mb-1">{title}</p>
          <p className="text-2xl font-bold text-slate-900">{value}</p>
          {trend && (
            <p className={cn(
              "text-sm mt-2",
              trend.isPositive ? "text-green-600" : "text-red-600"
            )}>
              {trend.isPositive ? "‚Üë" : "‚Üì"} {Math.abs(trend.value)}%
            </p>
          )}
        </div>
        <div className="w-12 h-12 bg-slate-100 rounded-lg flex items-center justify-center text-slate-700">
          {icon}
        </div>
      </div>
    </div>
  )
}

           --- End file: StatsCard.tsx ---

   üìÅ ui/
       üìÑ Badge.tsx
           --- Begin file: Badge.tsx ---
import { ReactNode } from "react"
import { cn } from "@/lib/utils"

interface BadgeProps {
  children: ReactNode
  variant?: "default" | "success" | "warning" | "danger" | "info"
  className?: string
}

export default function Badge({ children, variant = "default", className }: BadgeProps) {
  const variants = {
    default: "bg-slate-100 text-slate-700",
    success: "bg-green-100 text-green-700",
    warning: "bg-yellow-100 text-yellow-700",
    danger: "bg-red-100 text-red-700",
    info: "bg-blue-100 text-blue-700",
  }

  return (
    <span
      className={cn(
        "inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",
        variants[variant],
        className
      )}
    >
      {children}
    </span>
  )
}

           --- End file: Badge.tsx ---

       üìÑ Button.tsx
           --- Begin file: Button.tsx ---
import { ButtonHTMLAttributes, ReactNode } from "react"
import { cn } from "@/lib/utils"

interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  children: ReactNode
  variant?: "primary" | "secondary" | "outline" | "ghost" | "danger"
  size?: "sm" | "md" | "lg"
  isLoading?: boolean
}

export default function Button({
  children,
  variant = "primary",
  size = "md",
  isLoading = false,
  className,
  disabled,
  ...props
}: ButtonProps) {
  const baseStyles = "inline-flex items-center justify-center font-semibold rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"
  
  const variants = {
    primary: "bg-slate-700 text-white hover:bg-slate-600 focus:ring-slate-500",
    secondary: "bg-slate-100 text-slate-700 hover:bg-slate-200 focus:ring-slate-400",
    outline: "border-2 border-slate-300 text-slate-700 hover:bg-slate-50 focus:ring-slate-400",
    ghost: "text-slate-700 hover:bg-slate-100 focus:ring-slate-400",
    danger: "bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",
  }
  
  const sizes = {
    sm: "px-3 py-1.5 text-sm",
    md: "px-4 py-2.5 text-base",
    lg: "px-6 py-3 text-lg",
  }

  return (
    <button
      className={cn(baseStyles, variants[variant], sizes[size], className)}
      disabled={disabled || isLoading}
      {...props}
    >
      {isLoading ? (
        <>
          <svg className="animate-spin -ml-1 mr-2 h-4 w-4" fill="none" viewBox="0 0 24 24">
            <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" />
            <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
          </svg>
          Loading...
        </>
      ) : (
        children
      )}
    </button>
  )
}

           --- End file: Button.tsx ---

       üìÑ Card.tsx
           --- Begin file: Card.tsx ---
import { ReactNode } from "react"
import { cn } from "@/lib/utils"

interface CardProps {
  children: ReactNode
  className?: string
  padding?: "none" | "sm" | "md" | "lg"
  hover?: boolean
}

export default function Card({ 
  children, 
  className, 
  padding = "md",
  hover = false 
}: CardProps) {
  const paddingStyles = {
    none: "",
    sm: "p-4",
    md: "p-6",
    lg: "p-8",
  }

  return (
    <div
      className={cn(
        "bg-white rounded-lg border border-slate-200 shadow-sm",
        hover && "transition-shadow hover:shadow-lg",
        paddingStyles[padding],
        className
      )}
    >
      {children}
    </div>
  )
}

export function CardHeader({ children, className }: { children: ReactNode; className?: string }) {
  return (
    <div className={cn("mb-4", className)}>
      {children}
    </div>
  )
}

export function CardTitle({ children, className }: { children: ReactNode; className?: string }) {
  return (
    <h3 className={cn("text-xl font-bold text-slate-900", className)}>
      {children}
    </h3>
  )
}

export function CardContent({ children, className }: { children: ReactNode; className?: string }) {
  return (
    <div className={cn(className)}>
      {children}
    </div>
  )
}

           --- End file: Card.tsx ---

       üìÑ Input.tsx
           --- Begin file: Input.tsx ---
import { InputHTMLAttributes, forwardRef } from "react"
import { cn } from "@/lib/utils"

interface InputProps extends InputHTMLAttributes<HTMLInputElement> {
  label?: string
  error?: string
  helperText?: string
}

const Input = forwardRef<HTMLInputElement, InputProps>(
  ({ label, error, helperText, className, ...props }, ref) => {
    return (
      <div className="w-full">
        {label && (
          <label className="block text-sm font-semibold text-slate-700 mb-2">
            {label}
            {props.required && <span className="text-red-500 ml-1">*</span>}
          </label>
        )}
        <input
          ref={ref}
          className={cn(
            "w-full px-4 py-3 bg-slate-50 border rounded-lg transition-colors",
            "focus:outline-none focus:ring-2 focus:ring-slate-300 focus:border-transparent",
            "text-slate-800 placeholder:text-slate-400",
            error ? "border-red-300 focus:ring-red-300" : "border-slate-200",
            className
          )}
          {...props}
        />
        {error && (
          <p className="mt-1.5 text-sm text-red-600">{error}</p>
        )}
        {helperText && !error && (
          <p className="mt-1.5 text-xs text-slate-500">{helperText}</p>
        )}
      </div>
    )
  }
)

Input.displayName = "Input"

export default Input

           --- End file: Input.tsx ---

       üìÑ Loading.tsx
           --- Begin file: Loading.tsx ---
import { ReactNode } from "react"
import { cn } from "@/lib/utils"

interface LoadingProps {
  size?: "sm" | "md" | "lg"
  text?: string
  fullScreen?: boolean
}

export default function Loading({ size = "md", text, fullScreen = false }: LoadingProps) {
  const sizes = {
    sm: "w-8 h-8 border-2",
    md: "w-12 h-12 border-3",
    lg: "w-16 h-16 border-4",
  }

  const content = (
    <div className="flex flex-col items-center justify-center gap-4">
      <div
        className={cn(
          "animate-spin rounded-full border-slate-200 border-t-slate-700",
          sizes[size]
        )}
      />
      {text && <p className="text-slate-600 text-sm">{text}</p>}
    </div>
  )

  if (fullScreen) {
    return (
      <div className="fixed inset-0 flex items-center justify-center bg-white bg-opacity-80 z-50">
        {content}
      </div>
    )
  }

  return content
}

           --- End file: Loading.tsx ---

